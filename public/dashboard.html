<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - CareerFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .sidebar-icon {
            stroke-width: 1.5;
        }
        
        /* --- Scrollbar Styles --- */
        /* Generic Custom Scrollbar (used for main content) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4f46e5; /* indigo-600 */
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #4338ca; /* indigo-700 */
        }
        
        /* --- End Scrollbar Styles --- */

        /* --- Sidebar Scrollbar --- */
        aside nav.custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: transparent;
        }

        aside:hover nav.custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #4f46e5; /* Use original scrollbar color on hover */
        }
        /* --- End Sidebar Scrollbar --- */

        aside {
            transition: width 0.3s ease-in-out;
        }
        .sidebar-link.active {
            background-color: #4f46e5; /* indigo-600 */
            color: #ffffff;
            font-weight: 700;
        }
        .sidebar-link.active svg {
            color: #ffffff;
        }
        .ai-mentor-tab.active {
            background-color: #4f46e5; /* indigo-600 */
            color: #ffffff;
            font-weight: 500;
        }
        .sidebar-link:not(.active):hover,
        .ai-mentor-tab:not(.active):hover {
            background-color: rgba(79, 70, 229, 0.1);
        }
        
        aside.collapsed .sidebar-link {
            justify-content: center;
        }

        .sidebar-link.active:hover svg {
            color: #ffffff;
        }
        
        /* Dark Mode Styles */
        .dark { color-scheme: dark; }

        .dark body {
             background-image: none !important;
             background-color: #0f172a !important; /* slate-900 */
        }
        
        .dark aside,
        .dark header,
        .dark .bg-white\/50,
        .dark .bg-white\/70,
        .dark #user-menu,
        .dark #settings-modal-content { /* Added settings modal */
            background-color: rgba(30, 41, 59, 0.6) !important; /* slate-800 with 60% opacity */
            backdrop-filter: blur(20px);
            border-color: rgba(51, 65, 85, 1) !important; /* slate-700 */
        }

        .dark .text-slate-900,
        .dark .text-slate-800,
        .dark .font-bold {
            color: #f1f5f9; /* slate-100 */
        }

        .dark .text-slate-600,
        .dark .text-slate-500,
        .dark .text-sm {
             color: #94a3b8; /* slate-400 */
        }
        
        .dark .sidebar-link,
        .dark .ai-mentor-tab {
            color: #cbd5e1; /* slate-300 */
        }

        .dark .sidebar-link:not(.active):hover,
        .dark .ai-mentor-tab:not(.active):hover {
            background-color: rgba(79, 70, 229, 0.3); /* Secondary color hover for dark */
            color: #f8fafc; /* slate-50 */
        }
        
        .dark .sidebar-link.active,
        .dark .ai-mentor-tab.active {
            background-color: #4f46e5; /* indigo-600 */
            color: #ffffff;
        }

        .dark .sidebar-link.active svg {
            color: #ffffff;
        }

        .dark .border-white\/30 {
            border-color: rgba(51, 65, 85, 1); /* slate-700 */
        }

        .dark .bg-gray-100 {
            background-color: #334155; /* slate-700 */
        }
        
        .dark .text-gray-500 {
            color: #9ca3af; /* gray-400 */
        }

        .dark .bg-slate-50 {
            background-color: #1e293b; /* slate-800 */
            border-color: #334155; /* slate-700 */
        }

        .dark .border-slate-200 {
            border-color: #334155; /* slate-700 */
        }
        
        .dark .text-sm.font-medium.text-slate-700 {
             color: #cbd5e1; /* slate-300 */
        }
        
        .dark button.hover\:bg-slate-100:hover {
            background-color: #334155; /* slate-700 */
        }
        
        .dark .main-bg-color {
            background-color: transparent !important;
        }

        /* --- New styles for scroll fade effect --- */
        #scroll-fade-overlay {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(180deg, #dee5fb 40%, rgba(222, 229, 251, 0) 100%);
            z-index: 5;
            pointer-events: none;
            margin-bottom: -150px;
        }
        
        .dark #scroll-fade-overlay {
             background: linear-gradient(180deg, #0f172a 40%, rgba(15, 23, 42, 0) 100%);
        }
        /* --- End of new styles --- */

        /* --- Styles for Shortcut Customization --- */
        #shortcuts-container {
            position: relative;
            /* NEW: Fixed width to prevent layout shift and align items to the right */
            width: 290px; 
            display: flex;
            align-items: center;
            gap: 0.5rem; /* 8px */
            flex-direction: row-reverse;
            justify-content: flex-start;
            transition: all 0.3s ease-in-out;
        }
        #shortcuts-container.customization-active {
            border: 2px dashed #a5b4fc; /* indigo-300 */
            border-radius: 9999px; /* rounded-full */
            padding: 0.5rem;
            /* min-width: 150px; REMOVED */
            min-height: 56px;
            background-color: rgba(238, 242, 255, 0.5); /* indigo-50 with opacity */
        }
        #shortcuts-container.customization-active::before {
            content: attr(data-placeholder);
            color: #64748b; /* slate-500 */
            font-size: 0.875rem; /* text-sm */
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            /* NEW: Ensure placeholder text fits well */
            text-align: center;
            width: 90%;
        }
        .dark #shortcuts-container.customization-active {
            border-color: #6366f1; /* indigo-500 */
            background-color: rgba(30, 41, 59, 0.5); /* slate-800 with opacity */
        }
         .dark #shortcuts-container.customization-active::before {
            color: #94a3b8; /* slate-400 */
        }
        #shortcuts-container.drag-over {
            background-color: transparent;
            border-color: #4f46e5;
        }
        .sidebar-link.dragging {
            opacity: 0.4;
            cursor: grabbing;
        }
        .shortcut-item {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ffffff; /* Solid white background */
            border: 1px solid transparent;
            border-radius: 50%;
            color: #4f46e5; /* Primary indigo color for the icon */
            cursor: pointer;
            transition: all 0.2s;
            position: relative; /* For the remove button */
            flex-shrink: 0;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* Added a subtle shadow */
        }
        .dark .shortcut-item {
             background-color: #1e293b; /* Solid dark background (slate-800) */
             color: #a5b4fc; /* indigo-300 */
        }
        .shortcut-item:hover {
            background-color: #f8fafc; /* Lighter hover for light mode */
            border-color: #4f46e5;
        }
        .dark .shortcut-item:hover {
            background-color: #334155; /* slate-700 */
        }
        .shortcut-item svg {
            width: 24px;
            height: 24px;
            color: #4f46e5; /* Set icon color directly */
        }
        .dark .shortcut-item svg {
            color: #a5b4fc; /* Set icon color for dark mode */
        }
        .remove-shortcut-btn {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 20px;
            height: 20px;
            background-color: #ef4444; /* red-500 */
            color: white;
            border-radius: 50%;
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            font-size: 12px;
            line-height: 1;
            cursor: pointer;
            border: 2px solid white;
            z-index: 10;
        }
        .dark .remove-shortcut-btn {
            border-color: #1e293b; /* slate-800 */
        }
        #shortcuts-container.customization-active .shortcut-item .remove-shortcut-btn {
            display: flex; /* Show remove button only in customization mode */
        }
        .shortcut-placeholder {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #a5b4fc; /* indigo-300 */
            border-radius: 50%;
            color: #64748b; /* slate-500 */
            font-size: 24px;
            font-weight: 300;
            flex-shrink: 0;
        }
        .dark .shortcut-placeholder {
            border-color: #6366f1; /* indigo-500 */
            color: #94a3b8; /* slate-400 */
        }
        /* --- End of Shortcut Styles --- */
        /* --- Notification Badge Styles --- */
        .dark .notification-ring {
            ring-color: #1e2d3b; /* slate-800 */
        }
        /* Style for read notifications */
        .notification-read {
            background-color: transparent !important;
        }
        
        /* --- Light Mode Notification Modal Style Override --- */
        /* This block ensures the modal has a light, glassy theme when NOT in dark mode */
        html:not(.dark) #notification-modal-content, html:not(.dark) #settings-modal-content {
            background-color: #edf1fe !important; /* Updated solid light blue background */
            border-color: #cbd5e1 !important; /* A suitable solid border color (slate-300) */
            backdrop-filter: none !important; /* Removed blur for solid background */
        }
        html:not(.dark) #notification-modal-content .border-b, html:not(.dark) #settings-modal-content .border-b,
        html:not(.dark) #notification-modal-content .border-r, html:not(.dark) #settings-modal-content .border-r,
        html:not(.dark) #notification-modal-content .border-t, html:not(.dark) #settings-modal-content .border-t {
             border-color: #cbd5e1 !important; /* Solid border (slate-300) */
        }
        html:not(.dark) #notification-list li:not(.notification-category-header) {
            background-color: rgba(255, 255, 255, 0.6) !important; /* Keep inner cards white and glassy */
            border-color: rgba(255, 255, 255, 0.3) !important; /* Keep inner cards' border */
        }
        html:not(.dark) #notification-actions, html:not(.dark) #settings-actions {
             border-color: #cbd5e1 !important; /* Solid border (slate-300) */
        }
        
        /* Light Mode Text Color Fix */
        html:not(.dark) #notification-modal-content h3, html:not(.dark) #settings-modal-content h3,
        html:not(.dark) #notification-modal-content .text-slate-800, html:not(.dark) #settings-modal-content .text-slate-800,
        html:not(.dark) #notification-modal-content .text-slate-700, html:not(.dark) #settings-modal-content .text-slate-700 {
            color: #1e293b !important; /* slate-800 */
        }
        html:not(.dark) #notification-modal-content .text-slate-500, html:not(.dark) #settings-modal-content .text-slate-500,
        html:not(.dark) #notification-modal-content .text-slate-400, html:not(.dark) #settings-modal-content .text-slate-400 {
            color: #64748b !important; /* slate-500 */
        }

        .user-menu-item:hover {
             background-color: rgba(79, 70, 229, 0.1);
        }
        .dark .user-menu-item:hover {
            background-color: rgba(79, 70, 229, 0.3);
            color: #f8fafc; /* slate-50 */
        }
        .dark .user-menu-item:hover svg {
            color: #4f46e5;
        }
        
        /* User menu background for light mode */
        #user-menu {
            background-color: #ecf1fd !important;
            backdrop-filter: none !important;
        }
        
        /* NEW History button styles */
        #history-button {
            background-color: rgba(79, 70, 229, 0.7);
        }
        #history-button:hover {
            background-color: #4f46e5;
        }
        
        /* NEW Dropdown Menu Styles */
        .dropdown-toggle {
            width: 100%;
            text-align: left;
            border-radius: 0.5rem; /* rounded-lg */
        }
        .dropdown-toggle:hover {
            background-color: rgba(79, 70, 229, 0.1);
        }
        .dark .dropdown-toggle:hover {
             background-color: rgba(79, 70, 229, 0.3);
        }
        .dropdown-chevron {
            transition: transform 0.2s ease-in-out;
        }
        .dropdown-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .dropdown-container.open .dropdown-content {
            max-height: 500px; /* Adjust if content is taller */
            transition: max-height 0.4s ease-in;
        }
        .dropdown-container.open .dropdown-chevron {
            transform: rotate(90deg);
        }
        
        /* NEW Styles for Collapsed Sidebar */
        aside.collapsed .sidebar-text,
        aside.collapsed .dropdown-toggle,
        aside.collapsed nav > div:first-of-type > h3 {
            display: none;
        }
        aside.collapsed .dropdown-content {
            max-height: none;
            overflow: visible;
            padding: 0;
        }
        aside.collapsed .sidebar-link {
            justify-content: center;
            padding-left: 0;
            padding-right: 0;
        }
        aside.collapsed .logo-container {
            justify-content: center;
        }
        aside.collapsed .space-y-6 > * + * {
            margin-top: 0;
        }
        aside.collapsed .dropdown-container {
            margin-bottom: 0.5rem;
        }
        
        /* NEW Settings Modal Styles */
        .settings-tab {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            color: #475569; /* slate-600 */
            transition: background-color 0.2s, color 0.2s;
            text-align: left;
        }
        .dark .settings-tab {
            color: #cbd5e1; /* slate-300 */
        }
        .settings-tab:hover {
            background-color: rgba(79, 70, 229, 0.1);
            color: #1e293b; /* slate-800 */
        }
        .dark .settings-tab:hover {
            background-color: rgba(79, 70, 229, 0.3);
            color: #f8fafc; /* slate-50 */
        }
        .settings-tab.active {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            font-weight: 600;
        }
        .dark .settings-tab.active {
            color: white;
        }

        /* --- NEW Chat Widget Styles --- */
        #chat-widget {
            background-color: #edf1fe;
        }
        .dark #chat-widget {
            background-color: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(20px);
        }
        .chat-message {
            max-width: 80%;
            border-radius: 0.75rem; /* rounded-xl */
            position: relative;
            z-index: 5;
        }

        .user-message {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            align-self: flex-end;
        }

        /* Agent bubble styles to match notification items */
        .agent-message {
            background-color: rgba(255, 255, 255, 0.7);
            color: #1e293b; /* slate-800 */
            align-self: flex-start;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .dark .agent-message {
            background-color: rgba(30, 41, 59, 0.8); /* slate-800, matching dark mode notification items */
            color: #f1f5f9; /* slate-100 */
            border: 1px solid #334155; /* slate-700 */
        }

        /* Input area styles */
        #chat-input {
            background-color: rgba(79, 70, 229, 0.05) !important;
            border-color: transparent !important;
        }
        .dark #chat-input {
            background-color: rgba(79, 70, 229, 0.15) !important;
            border-color: transparent !important;
        }
        #chat-input::placeholder { color: #4f46e5; opacity: 0.7; }
        .dark #chat-input::placeholder { color: #a5b4fc; opacity: 0.7; }
        /* --- End Chat Widget Styles --- */

        /* --- New Chat Messages Animation --- */
        #chat-messages {
            position: relative;
            overflow: hidden; /* To contain the animation */
        }
        #chat-messages #stars-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden;
            z-index: 1; /* Behind the sun */
        }
        #chat-messages .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle linear infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        #chat-messages .section-banner-sun {
            height: 250px;
            width: 250px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2; /* In front of stars, behind messages */
            background-color: #E6E6FA;
            border-radius: 50%;
            animation: shadowPulse 5s ease-in-out infinite, rotate 30s linear infinite;
            box-shadow:
                0px 0px 35px 18px #7891D5,
                -4px 0px 9px 1px #E8F0FF inset,
                13px 1px 35px 18px #4D69B4c5 inset,
                -20px -1px 42px 22px #7891D5c2 inset,
                125px 0px 66px 30px #2B448Caa inset;
        }
        @keyframes shadowPulse {
            0%, 100% {
                box-shadow:
                    0px 0px 35px 18px #7891D5,
                    -4px 0px 9px 1px #E8F0FF inset,
                    13px 1px 35px 18px #4D69B4c5 inset,
                    -20px -1px 42px 22px #7891D5c2 inset,
                    125px 0px 66px 30px #2B448Caa inset;
            }
            50% {
                box-shadow:
                    0px 0px 50px 25px #AEBFE3,
                    -4px 0px 16px 4px #E8F0FF inset,
                    13px 1px 50px 25px #4D69B4c5 inset,
                    -20px -1px 58px 29px #7891D5c2 inset,
                    125px 0px 84px 38px #2B448Caa inset;
            }
        }
        @keyframes rotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        /* --- End Chat Messages Animation --- */

        /* Custom slider styles */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #4a5568;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: 2px solid #fff;
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: 2px solid #fff;
        }
        
        /* For Resume Preview content */
        .resume-content-view {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .resume-content-view p {
            margin: 0;
            padding: 0;
        }

        /* --- NEW Drag and Drop Styles --- */
        .resume-section {
            transition: background-color 0.2s;
        }
        /* Show dotted outline on hover ONLY when DND is active and not currently dragging */
        .resume-content-view.dnd-active:not(.dragging-active) .resume-section:hover {
            outline: 2px dashed #4f46e5; /* indigo-600 */
            background-color: rgba(238, 242, 255, 0.7); /* indigo-50 with opacity */
            cursor: grab;
        }
        /* Style for the element being dragged */
        .resume-section.dragging {
            opacity: 0.4;
            cursor: grabbing;
        }
        /* The placeholder line indicating drop position */
        .drag-over-indicator {
            background-color: #e0e7ff; /* indigo-100 */
            border: 2px dashed #4338ca; /* indigo-700 */
            color: #4338ca; /* indigo-700 */
            text-align: center;
            padding: 8px;
            font-size: 0.875rem; /* text-sm */
            font-weight: 500;
            border-radius: 6px;
            margin: 4px 0;
            animation: pulse 1.5s infinite ease-in-out;
        }
        @keyframes pulse {
            0%, 100% { 
                border-color: #4338ca;
                background-color: #e0e7ff;
            }
            50% { 
                border-color: #6d28d9; /* purple-700 */
                background-color: #ede9fe; /* violet-100 */
            }
        }
        /* --- End Drag and Drop Styles --- */

    </style>
    <script src="/js/serper-search.js"></script>
</head>
<body class="flex h-screen overflow-hidden" style="background-image: url('https://ik.imagekit.io/fdd16n9cy/di.png?updatedAt=1757770843990'); background-size: cover; background-attachment: fixed;">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-[16.5rem] bg-white/50 backdrop-blur-xl border-r border-white/30 flex flex-col z-20 flex-shrink-0">
        <div class="logo-container flex items-center justify-start p-4 h-20 flex-shrink-0">
            <div class="flex items-center gap-2 text-lg font-bold text-slate-800">
                <svg class="h-8 w-auto text-indigo-600" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 4H20V20H4V4Z"></path>
                    <path d="M12 12H28V28H12V12Z" fill-opacity="0.7"></path>
                </svg>
                <span class="sidebar-text">Career Clarified</span>
            </div>
        </div>
        <nav class="flex-1 px-4 py-4 space-y-6 custom-scrollbar overflow-y-scroll">
            <div>
                <h3 class="px-3 mb-3 text-xs font-bold uppercase tracking-wider text-slate-500 sidebar-text">Overview</h3>
                <a href="#" id="dashboard-link" data-id="dashboard" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-semibold rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span class="sidebar-text">Dashboard</span>
                </a>
            </div>
            <div class="dropdown-container open">
                <button class="dropdown-toggle flex items-center justify-between p-3">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-slate-500 sidebar-text">Career Hub</h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-chevron text-slate-500 sidebar-text"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
                <div class="dropdown-content pl-4 pt-1 space-y-1">
                    <a href="#" data-id="resume-studio" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><path d="m18 13-3.5 3.5a2 2 0 0 1-2.82 0L10 15"/><path d="m15 16 4 4"/></svg>
                        <span class="sidebar-text">Smart Resume Studio</span>
                    </a>
                     <a href="#" data-id="app-tailor" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                        <span class="sidebar-text">Application Tailor</span>
                    </a>
                    <a href="#" data-id="cover-letter" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                        <span class="sidebar-text">Cover Letter Generator</span>
                    </a>
                    <a href="#" data-id="job-finder" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                        <span class="sidebar-text">Job Finder</span>
                    </a>
                    <a href="#" data-id="job-tracker" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/><path d="M8 10v4"/><path d="M12 10v2"/><path d="M16 10v6"/></svg>
                        <span class="sidebar-text">Job Tracker</span>
                    </a>
                    <a href="#" data-id="interview-prep" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
                        <span class="sidebar-text">Interview Prep Kit</span>
                    </a>
                    <a href="#" data-id="work-history" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                        <span class="sidebar-text">Work History Manager</span>
                    </a>
                </div>
            </div>
            <div class="dropdown-container open">
                <button class="dropdown-toggle flex items-center justify-between p-3">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-slate-500 sidebar-text">Brand Building</h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-chevron text-slate-500 sidebar-text"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
                <div class="dropdown-content pl-4 pt-1 space-y-1">
                    <a href="#" id="brand-audit-link" data-id="brand-audit" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group active">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M3 6V3h3"/><path d="M18 3h3v3"/><path d="M3 18v3h3"/><path d="M18 18h3v3"/><path d="M7 12h10"/></svg>
                        <span class="sidebar-text">AI Personal Brand Audit</span>
                    </a>
                     <a href="#" data-id="content-engine" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
                        <span class="sidebar-text">Content Engine</span>
                    </a>
                    <a href="#" data-id="career-portfolio" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>
                        <span class="sidebar-text">AI Career Portfolio</span>
                    </a>
                    <a href="#" data-id="event-scout" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M14 19a6 6 0 0 0-12 0"/><circle cx="8" cy="10" r="4"/><path d="M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"/></svg>
                        <span class="sidebar-text">Career Event Scout</span>
                    </a>
                    <a href="#" data-id="brand-intelligence" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M12 5a3 3 0 1 0-5.993.251"/><path d="M12 5a3 3 0 1 1 5.993.251"/><path d="M12 19a3 3 0 1 0-5.993-.251"/><path d="M12 19a3 3 0 1 1 5.993-.251"/><path d="M21 12a3 3 0 1 1-.251-5.993"/><path d="M3 12a3 3 0 1 0 .251-5.993"/><path d="M21 12a3 3 0 1 0 .251 5.993"/><path d="M3 12a3 3 0 1 1-.251 5.993"/><path d="M12 5v14"/><path d="M12 12H5.122a3 3 0 0 1-.122-6H12"/><path d="M12 12h6.878a3 3 0 0 0 .122-6H12"/><path d="M12 12H5.122a3 3 0 0 0-.122 6H12"/><path d="M12 12h6.878a3 3 0 0 1 .122 6H12"/></svg>
                        <span class="sidebar-text">AI Brand Intelligence</span>
                    </a>
                </div>
            </div>
            <div class="dropdown-container open">
                 <button class="dropdown-toggle flex items-center justify-between p-3">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-slate-500 sidebar-text">Upskilling</h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-chevron text-slate-500 sidebar-text"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
                <div class="dropdown-content pl-4 pt-1 space-y-1">
                    <a href="#" data-id="upskilling-dash" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                        <span class="sidebar-text">Upskilling Dashboard</span>
                    </a>
                    <a href="#" data-id="skill-radar" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M19.07 4.93A10 10 0 0 0 6.99 3.34"/><path d="M4 6h.01"/><path d="M2.29 9.62A10 10 0 1 0 21.71 9.62"/><path d="M12 12v10"/><path d="M15.21 15.21A5 5 0 0 0 12 12"/></svg>
                        <span class="sidebar-text">Skill Radar</span>
                    </a>
                    <a href="#" data-id="learning-path" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M18 6H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h13l4 4V8a2 2 0 0 0-2-2z"/><path d="M12 13v8"/><path d="M12 3v3"/></svg>
                        <span class="sidebar-text">Learning Path</span>
                    </a>
                    <a href="#" data-id="sprints" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                        <span class="sidebar-text">Sprints</span>
                    </a>
                    <a href="#" data-id="certifications" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>
                        <span class="sidebar-text">Certifications</span>
                    </a>
                    <a href="#" data-id="benchmarking" class="sidebar-link flex items-center space-x-4 px-3 py-2 text-sm font-medium text-slate-600 rounded-lg group">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500 group-hover:text-indigo-600 flex-shrink-0"><path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M14 15V9h-6"/><path d="M21 3h-6v6h6V3z"/></svg>
                        <span class="sidebar-text">Skill Benchmarking</span>
                    </a>
                </div>
            </div>
        </nav>
        <div class="border-t border-white/30 p-2 flex items-center mt-auto flex-shrink-0">
            <button id="sidebar-toggle" class="p-2 rounded-lg text-indigo-600">
                <svg id="sidebar-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform duration-300"><path d="m11 17-5-5 5-5"/><path d="m18 17-5-5 5-5"/></svg>
            </button>
        </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 flex flex-col overflow-hidden main-bg-color" style="background-color: #dee5fb;">
        <div class="flex-1 relative overflow-y-auto custom-scrollbar">
        <div id="scroll-fade-overlay"></div>
        <!-- Persistent Navigation Bar -->
         <header class="sticky top-6 z-10 max-w-7xl mx-auto w-full flex items-center justify-between gap-4 h-20 pl-6 pr-2 bg-white/50 backdrop-blur-xl flex-shrink-0 rounded-full shadow-lg border border-white/30 mt-6 mb-5">
            <!-- Header Title -->
            <div id="header-title" class="flex items-center gap-3 flex-shrink-0">
                <div id="header-icon-container" class="w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0">
                </div>
                <div>
                    <h1 id="header-main-title" class="text-xl font-bold text-slate-900">AI Mentor for Brand Growth</h1>
                    <p id="header-subtitle" class="text-slate-600 text-xs mt-1">Your personal AI coach for career and brand development</p>
                </div>
            </div>

            <!-- Central Search Bar -->
            <div class="flex-1 flex justify-center">
                <div class="relative w-full max-w-sm">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-slate-400"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </div>
                    <input 
                        type="text" 
                        id="search-input" 
                        placeholder="Search features, jobs, or content..." 
                        class="w-full h-12 pl-11 pr-4 bg-white/50 border border-transparent rounded-full focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all duration-300"
                    >
                    <button 
                        id="search-button" 
                        class="absolute inset-y-0 right-0 pr-3 flex items-center"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-indigo-600 hover:text-indigo-800"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                </div>
            </div>

            <!-- Right side controls -->
            <div class="flex items-center gap-2 flex-shrink-0">
                <!-- Shortcuts Container -->
                <div id="shortcuts-container">
                    <!-- Dropped shortcuts will appear here -->
                </div>

                <!-- User Profile Dropdown -->
                <div class="relative">
                    <button id="user-menu-button" class="w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center flex-shrink-0">
                        <img id="user-avatar" src="https://placehold.co/64x64/e2e8f0/64748b?text=U" class="w-full h-full rounded-full object-cover" alt="User avatar">
                    </button>
                    <!-- Notification Badge on User Icon -->
                    <span id="user-icon-notification-badge" class="absolute top-0 right-0 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 text-white text-xs font-bold transform translate-x-1/4 -translate-y-1/4 ring-2 ring-white notification-ring hidden"></span>

                    <div id="user-menu" class="absolute right-0 mt-2 w-64 rounded-2xl shadow-lg border border-white/30 p-4 hidden z-50">
                        <div class="flex items-center gap-3 mb-4">
                            <img id="user-avatar-dropdown" src="https://placehold.co/48x48/e2e8f0/64748b?text=U" class="w-12 h-12 rounded-full object-cover" alt="User avatar">
                            <div>
                                <h4 class="font-semibold text-slate-800">User Name</h4>
                                <button id="upload-photo-button" class="text-xs text-indigo-600 hover:underline">Upload Photo</button>
                                <input type="file" id="photo-upload" class="hidden" accept="image/*">
                            </div>
                        </div>
                        <div class="border-t border-slate-200 pt-2 space-y-2">
                            <button id="notification-menu-button" class="user-menu-item group w-full text-left text-sm text-slate-700 rounded-md p-2 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-slate-500 dark:text-slate-400"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
                                <span>Notifications</span>
                                <!-- Notification Badge in Dropdown -->
                                <span id="dropdown-notification-badge" class="ml-auto bg-indigo-600 text-white text-xs font-semibold px-2 py-0.5 rounded-full hidden"></span>
                            </button>
                            <button id="edit-shortcuts-button" class="user-menu-item group w-full text-left text-sm text-slate-700 rounded-md p-2 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-slate-500 dark:text-slate-400"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                                <span>Customize Shortcuts</span>
                            </button>
                            <div id="dark-mode-row" class="user-menu-item group w-full text-left text-sm text-slate-700 rounded-md p-2 flex items-center justify-between gap-2 cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-slate-500 dark:text-slate-400"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                                    <span>Dark Mode</span>
                                </div>
                                <button id="dark-mode-toggle" class="relative inline-flex items-center h-6 rounded-full w-11 transition-colors bg-slate-200">
                                    <span class="sr-only">Enable dark mode</span>
                                    <span class="inline-block w-4 h-4 transform bg-white rounded-full transition-transform translate-x-1"></span>
                                </button>
                            </div>
                            <button id="settings-button" class="user-menu-item group w-full text-left text-sm text-slate-700 rounded-md p-2 flex items-center gap-2">
                               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-slate-500 dark:text-slate-400"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg> <span>Settings</span>
                            </button>
                             <button id="signout-button" class="user-menu-item group w-full text-left text-sm text-slate-700 rounded-md p-2 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-slate-500 dark:text-slate-400"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
                                 <span>Sign Out</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div id="main-padding-wrapper" class="px-6 md:px-8 pb-6 relative z-0">
            <div id="dashboard-content" class="max-w-7xl mx-auto hidden">
                <!-- Header Section -->
                <div class="pt-6 mb-8">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-4xl font-bold text-slate-900 mb-2">Career Analytics Dashboard</h1>
                            <p class="text-lg text-slate-600">Comprehensive overview of your career development progress</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Last updated:</span>
                                <span class="text-sm font-medium text-slate-700">2 minutes ago</span>
                            </div>
                            <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                                Refresh Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Key Metrics Row -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Total Applications -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6 hover:shadow-xl transition-all duration-300">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><path d="m18 13-3.5 3.5a2 2 0 0 1-2.82 0L10 15"/><path d="m15 16 4 4"/></svg>
                            </div>
                            <div class="text-right">
                                <span class="text-sm text-green-600 font-semibold">+12.5%</span>
                                <p class="text-xs text-slate-500">vs last month</p>
                            </div>
                        </div>
                        <div>
                            <p class="text-3xl font-bold text-slate-900 mb-1">47</p>
                            <p class="text-sm text-slate-600 mb-3">Applications Sent</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-slate-500">This month</span>
                                <span class="text-slate-700 font-medium">47 applications</span>
                            </div>
                        </div>
                    </div>

                    <!-- Interview Rate -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6 hover:shadow-xl transition-all duration-300">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
                            </div>
                            <div class="text-right">
                                <span class="text-sm text-green-600 font-semibold">+8.2%</span>
                                <p class="text-xs text-slate-500">vs last month</p>
                            </div>
                        </div>
                        <div>
                            <p class="text-3xl font-bold text-slate-900 mb-1">23%</p>
                            <p class="text-sm text-slate-600 mb-3">Interview Rate</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-slate-500">11 interviews</span>
                                <span class="text-slate-700 font-medium">from 47 applications</span>
                            </div>
                        </div>
                    </div>

                    <!-- Skills Progress -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6 hover:shadow-xl transition-all duration-300">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                            </div>
                            <div class="text-right">
                                <span class="text-sm text-green-600 font-semibold">+15</span>
                                <p class="text-xs text-slate-500">skills improved</p>
                            </div>
                        </div>
                        <div>
                            <p class="text-3xl font-bold text-slate-900 mb-1">18</p>
                            <p class="text-sm text-slate-600 mb-3">Skills Tracked</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-slate-500">Avg. progress</span>
                                <span class="text-slate-700 font-medium">73% completion</span>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Performance -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6 hover:shadow-xl transition-all duration-300">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M1 12s4-8 8-8 8 4 8 8-4 8-8 8-8-4-8-8z"/><circle cx="12" cy="12" r="3"/></svg>
                            </div>
                            <div class="text-right">
                                <span class="text-sm text-green-600 font-semibold">+34%</span>
                                <p class="text-xs text-slate-500">vs last month</p>
                            </div>
                        </div>
                        <div>
                            <p class="text-3xl font-bold text-slate-900 mb-1">2.4K</p>
                            <p class="text-sm text-slate-600 mb-3">Profile Views</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-slate-500">This month</span>
                                <span class="text-slate-700 font-medium">+820 views</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts and Analytics Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Application Trends Chart -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-slate-900">Application Trends</h3>
                                <p class="text-sm text-slate-600">Monthly application activity</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="px-3 py-1 text-xs bg-indigo-100 text-indigo-700 rounded-full">This Year</button>
                                <button class="px-3 py-1 text-xs bg-slate-100 text-slate-600 rounded-full">Last Year</button>
                            </div>
                        </div>
                        <div class="h-64 flex items-end justify-between gap-2">
                            <!-- Mock chart bars -->
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 120px;"></div>
                                <span class="text-xs text-slate-500">Jan</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 140px;"></div>
                                <span class="text-xs text-slate-500">Feb</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 160px;"></div>
                                <span class="text-xs text-slate-500">Mar</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 180px;"></div>
                                <span class="text-xs text-slate-500">Apr</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 200px;"></div>
                                <span class="text-xs text-slate-500">May</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t" style="height: 220px;"></div>
                                <span class="text-xs text-slate-500">Jun</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-8 bg-gradient-to-t from-green-500 to-green-400 rounded-t" style="height: 240px;"></div>
                                <span class="text-xs text-slate-500">Jul</span>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center justify-between text-sm">
                            <span class="text-slate-600">Total applications: 1,247</span>
                            <span class="text-green-600 font-medium">+23% from last year</span>
                        </div>
                    </div>

                    <!-- Skills Progress Chart -->
                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-slate-900">Skills Progress</h3>
                                <p class="text-sm text-slate-600">Top performing skills</p>
                            </div>
                            <button class="px-3 py-1 text-xs bg-slate-100 text-slate-600 rounded-full">View All</button>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs font-semibold text-blue-600">JS</span>
                                    </div>
                                    <span class="text-sm font-medium text-slate-900">JavaScript</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 bg-slate-200 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <span class="text-sm font-medium text-slate-700">85%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs font-semibold text-green-600">TS</span>
                                    </div>
                                    <span class="text-sm font-medium text-slate-900">TypeScript</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 bg-slate-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 72%"></div>
                                    </div>
                                    <span class="text-sm font-medium text-slate-700">72%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs font-semibold text-purple-600">R</span>
                                    </div>
                                    <span class="text-sm font-medium text-slate-900">React</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 bg-slate-200 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: 68%"></div>
                                    </div>
                                    <span class="text-sm font-medium text-slate-700">68%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs font-semibold text-orange-600">N</span>
                                    </div>
                                    <span class="text-sm font-medium text-slate-900">Node.js</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-24 bg-slate-200 rounded-full h-2">
                                        <div class="bg-orange-500 h-2 rounded-full" style="width: 55%"></div>
                                    </div>
                                    <span class="text-sm font-medium text-slate-700">55%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity and Quick Actions -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Recent Activity -->
                    <div class="lg:col-span-2 bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-slate-900">Recent Activity</h3>
                            <button class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">View All</button>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-start gap-4 p-4 bg-slate-50 rounded-xl">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><path d="m18 13-3.5 3.5a2 2 0 0 1-2.82 0L10 15"/><path d="m15 16 4 4"/></svg>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-slate-900">Applied to Senior Frontend Developer at TechCorp</p>
                                    <p class="text-xs text-slate-500 mt-1">Application submitted successfully</p>
                                    <p class="text-xs text-slate-400 mt-1">2 hours ago</p>
                                </div>
                                <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full">New</span>
                            </div>
                            <div class="flex items-start gap-4 p-4 bg-slate-50 rounded-xl">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-slate-900">Interview scheduled for tomorrow at 2:00 PM</p>
                                    <p class="text-xs text-slate-500 mt-1">Google Meet link sent to your email</p>
                                    <p class="text-xs text-slate-400 mt-1">4 hours ago</p>
                                </div>
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">Scheduled</span>
                            </div>
                            <div class="flex items-start gap-4 p-4 bg-slate-50 rounded-xl">
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-600"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-slate-900">Completed Advanced React Patterns course</p>
                                    <p class="text-xs text-slate-500 mt-1">Earned certificate and 15 skill points</p>
                                    <p class="text-xs text-slate-400 mt-1">1 day ago</p>
                                </div>
                                <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">Completed</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions & Insights -->
                    <div class="space-y-6">
                        <!-- Quick Actions -->
                        <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                            <h3 class="text-lg font-semibold text-slate-900 mb-4">Quick Actions</h3>
                            <div class="space-y-3">
                                <button class="w-full p-4 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl hover:from-indigo-600 hover:to-indigo-700 transition-all duration-200 flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><path d="m18 13-3.5 3.5a2 2 0 0 1-2.82 0L10 15"/><path d="m15 16 4 4"/></svg>
                                    <span class="font-medium">Create New Resume</span>
                                </button>
                                <button class="w-full p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                                    <span class="font-medium">Find Jobs</span>
                                </button>
                                <button class="w-full p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                                    <span class="font-medium">Start Learning</span>
                                </button>
                            </div>
                        </div>

                        <!-- AI Insights -->
                        <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-200">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                                </div>
                                <h3 class="text-lg font-semibold text-slate-900">AI Insights</h3>
                            </div>
                            <div class="space-y-3">
                                <div class="p-3 bg-white/60 rounded-lg">
                                    <p class="text-sm font-medium text-slate-900 mb-1">Skill Gap Alert</p>
                                    <p class="text-xs text-slate-600">Consider learning Docker to increase your marketability by 23%</p>
                                </div>
                                <div class="p-3 bg-white/60 rounded-lg">
                                    <p class="text-sm font-medium text-slate-900 mb-1">Profile Optimization</p>
                                    <p class="text-xs text-slate-600">Add 2 more projects to increase profile views by 15%</p>
                                </div>
                                <div class="p-3 bg-white/60 rounded-lg">
                                    <p class="text-sm font-medium text-slate-900 mb-1">Networking Opportunity</p>
                                    <p class="text-xs text-slate-600">3 relevant events this week in your area</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="brand-audit-content" class="max-w-7xl mx-auto">
                 <!-- AI Mentor Feature -->
                <div class="pt-6">
                    <div class="">
                        <!-- Navigation Tabs -->
                        <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-lg p-1.5 grid grid-cols-3 md:grid-cols-6 gap-1.5">
                            <button data-tab="dashboard" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap active">Dashboard</button>
                            <button data-tab="analysis" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap text-slate-600">Brand Analysis</button>
                            <button data-tab="insights" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap text-slate-600">Insights</button>
                            <button data-tab="goals" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap text-slate-600">Goals</button>
                            <button data-tab="achievements" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap text-slate-600">Achievements</button>
                            <button data-tab="settings" class="ai-mentor-tab px-4 py-3 rounded-md text-sm font-medium transition-colors whitespace-nowrap text-slate-600">Settings</button>
                        </div>
                        
                        <!-- Tab Content -->
                        <div id="ai-mentor-content-container" class="mt-8">
                            <!-- Dashboard Tab Content -->
                            <div id="dashboard-tab-content" class="ai-mentor-tab-content grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-2 space-y-6">
                                    <!-- Overall Brand Score -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-green-500"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
                                            Your Overall Brand Score
                                        </h3>
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-baseline gap-2">
                                                <span class="text-5xl font-bold text-yellow-500">78</span>
                                                <span class="text-slate-500">/ 100</span>
                                            </div>
                                            <button id="add-notification-button" class="flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-all duration-300 disabled:opacity-50">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                                                Re-analyze Brand
                                            </button>
                                        </div>
                                        <p class="text-slate-500 text-sm mt-2">Last updated: 9/15/2025, 10:00:00 AM</p>
                                    </div>
                                    <!-- Key Metrics Breakdown -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Key Metrics Breakdown</h3>
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            <div class="bg-slate-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-green-600">82</div>
                                                <div class="text-slate-500 text-sm capitalize">Visibility</div>
                                            </div>
                                            <div class="bg-slate-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-yellow-600">75</div>
                                                <div class="text-slate-500 text-sm capitalize">Engagement</div>
                                            </div>
                                            <div class="bg-slate-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-green-600">80</div>
                                                <div class="text-slate-500 text-sm capitalize">Professional Presence</div>
                                            </div>
                                            <div class="bg-slate-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-yellow-600">70</div>
                                                <div class="text-slate-500 text-sm capitalize">Network Quality</div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Top Recommendations -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Top Recommendations</h3>
                                        <div class="space-y-3">
                                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                                <div class="flex items-center justify-between mb-2">
                                                    <h4 class="font-medium text-slate-800">Complete Your LinkedIn Profile</h4>
                                                    <span class="text-xs font-medium px-2 py-1 rounded-full text-green-700 bg-green-100">easy</span>
                                                </div>
                                                <p class="text-slate-600 text-sm line-clamp-2">Your profile is missing key information that could improve visibility.</p>
                                                <button class="text-indigo-600 text-sm mt-2 flex items-center gap-1 hover:text-indigo-800">
                                                    View Details <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                                </button>
                                            </div>
                                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                                <div class="flex items-center justify-between mb-2">
                                                    <h4 class="font-medium text-slate-800">Improve Content Engagement</h4>
                                                    <span class="text-xs font-medium px-2 py-1 rounded-full text-yellow-800 bg-yellow-100">medium</span>
                                                </div>
                                                <p class="text-slate-600 text-sm line-clamp-2">Your posts could generate more engagement with better strategy.</p>
                                                <button class="text-indigo-600 text-sm mt-2 flex items-center gap-1 hover:text-indigo-800">
                                                    View Details <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Sidebar -->
                                <div class="space-y-6">
                                     <!-- LinkedIn Connection Status -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">LinkedIn Connection</h3>
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-blue-500"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                                                <span class="font-medium text-slate-800">Connected</span>
                                            </div>
                                            <button class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm disabled:opacity-50">Sync Now</button>
                                        </div>
                                        <p class="text-slate-500 text-xs mt-2">Last synced: 9/17/2025, 11:00:00 PM</p>
                                    </div>
                                    <!-- Recent Insights -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Recent Insights</h3>
                                        <div class="space-y-3">
                                            <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <div class="flex items-center justify-between mb-1">
                                                    <h4 class="font-medium text-slate-800 text-sm">Your LinkedIn Engagement is Trending Up! 📈</h4>
                                                    <span class="text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded-full">New</span>
                                                </div>
                                                <p class="text-slate-600 text-xs line-clamp-2">Great progress this week! Your brand score improved by 8 points. Your engagement metrics are trending upward...</p>
                                                <button class="text-indigo-600 text-xs mt-2 hover:text-indigo-800">Read More</button>
                                            </div>
                                            <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <div class="flex items-center justify-between mb-1">
                                                    <h4 class="font-medium text-slate-800 text-sm">Monthly Brand Review: Strategic Positioning</h4>
                                                </div>
                                                <p class="text-slate-600 text-xs line-clamp-2">This month has been a journey of growth and learning. You've made meaningful progress in building your professional brand...</p>
                                                <button class="text-indigo-600 text-xs mt-2 hover:text-indigo-800">Read More</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Goals Progress -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Goals Progress</h3>
                                        <div class="space-y-3">
                                             <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <h4 class="font-medium text-slate-800 text-sm mb-1">Increase Engagement Rate</h4>
                                                <div class="flex items-center justify-between text-xs text-slate-500">
                                                    <span>3.5 / 5</span>
                                                    <span>70%</span>
                                                </div>
                                                <div class="w-full bg-slate-200 rounded-full h-1 mt-2">
                                                    <div class="bg-green-500 h-1 rounded-full" style="width: 70%;"></div>
                                                </div>
                                            </div>
                                             <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <h4 class="font-medium text-slate-800 text-sm mb-1">Grow Network to 5000</h4>
                                                <div class="flex items-center justify-between text-xs text-slate-500">
                                                    <span>3200 / 5000</span>
                                                    <span>64%</span>
                                                </div>
                                                <div class="w-full bg-slate-200 rounded-full h-1 mt-2">
                                                    <div class="bg-green-500 h-1 rounded-full" style="width: 64%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <!-- Recent Achievements -->
                                    <div class="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Recent Achievements</h3>
                                        <div class="space-y-3">
                                            <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <div class="flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-yellow-500"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>
                                                    <h4 class="font-medium text-slate-800 text-sm">Consistent Creator</h4>
                                                </div>
                                                <p class="text-slate-500 text-xs mt-1">Unlocked on 9/10/2025</p>
                                            </div>
                                             <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                                <div class="flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-yellow-500"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>
                                                    <h4 class="font-medium text-slate-800 text-sm">Engagement Master</h4>
                                                </div>
                                                <p class="text-slate-500 text-xs mt-1">Unlocked on 8/25/2025</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Other Tab Contents (initially hidden) -->
                            <div id="analysis-tab-content" class="ai-mentor-tab-content hidden"></div>
                            <div id="insights-tab-content" class="ai-mentor-tab-content hidden"></div>
                            <div id="goals-tab-content" class="ai-mentor-tab-content hidden"></div>
                            <div id="achievements-tab-content" class="ai-mentor-tab-content hidden"></div>
                            <div id="settings-tab-content" class="ai-mentor-tab-content hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="upskilling-dash-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Upskilling Dashboard Content -->
                    <div id="upskilling-dash-container"></div>
                </div>
            </div>
            
            <div id="career-portfolio-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- AI-Generated Career Portfolio/Microsite Content -->
                    <div id="career-portfolio-container"></div>
                </div>
            </div>
            
            <div id="resume-studio-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Smart Resume Studio Content -->
                    <div id="resume-studio-container"></div>
                </div>
            </div>
            
            <div id="app-tailor-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Application Tailor Content -->
                    <div id="app-tailor-container"></div>
                </div>
            </div>
            
            <div id="cover-letter-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Cover Letter Generator Content -->
                    <div id="cover-letter-container"></div>
                </div>
            </div>
            
            <div id="job-finder-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Job Finder Content -->
                    <div id="job-finder-container"></div>
                </div>
            </div>
            
            <div id="job-tracker-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Job Tracker Content -->
                    <div id="job-tracker-container"></div>
                </div>
            </div>
            
            <div id="interview-prep-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Interview Prep Kit Content -->
                    <div id="interview-prep-container"></div>
                </div>
            </div>
            
            <div id="work-history-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Work History Manager Content -->
                    <div id="work-history-container"></div>
                </div>
            </div>
            
            <div id="ai-brand-audit-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- AI-Powered Personal Brand Audit Content -->
                    <div id="ai-brand-audit-container"></div>
                </div>
            </div>
            
            <div id="content-engine-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Content Engine for Thought Leadership Content -->
                    <div id="content-engine-container"></div>
                </div>
            </div>
            
            <div id="career-event-scout-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Career Event Scout Content -->
                    <div id="career-event-scout-container"></div>
                </div>
            </div>
            
            <div id="brand-intelligence-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- AI Brand Intelligence Content -->
                    <div id="brand-intelligence-container"></div>
                </div>
            </div>
            
            <div id="skill-radar-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Skill Radar Content -->
                    <div id="skill-radar-container"></div>
                </div>
            </div>
            
            <div id="learning-path-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Learning Path Content -->
                    <div id="learning-path-container"></div>
                </div>
            </div>
            
            <div id="sprints-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Sprints Content -->
                    <div id="sprints-container"></div>
                </div>
            </div>
            
            <div id="certifications-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Certifications Content -->
                    <div id="certifications-container"></div>
                </div>
            </div>
            
            <div id="skill-benchmarking-content" class="max-w-7xl mx-auto hidden">
                <div class="pt-6">
                    <!-- Skill Benchmarking Content -->
                    <div id="skill-benchmarking-container"></div>
                </div>
            </div>
            
            </div>
        </div>
    </main>

    <!-- Notification Modal -->
    <div id="notification-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <!-- Overlay -->
        <div id="notification-modal-overlay" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <!-- Modal Content -->
        <div id="notification-modal-content" class="relative w-full max-w-2xl bg-white/50 dark:bg-slate-800/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/30 dark:border-slate-700 m-4 flex flex-col" style="max-height: 90vh;">
            <!-- Header -->
            <div class="flex items-center justify-between p-5 flex-shrink-0">
                <div class="flex items-center gap-3">
                    <h3 id="notification-modal-title" class="text-lg font-semibold text-slate-800 dark:text-slate-100">Notifications</h3>
                    <span id="modal-header-notification-badge" class="bg-indigo-600 text-white text-xs font-semibold px-2 py-0.5 rounded-full hidden"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button id="close-notification-modal" class="p-2 rounded-lg hover:bg-slate-200/60 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
            </div>
            <!-- Notification List -->
            <ul id="notification-list" class="overflow-y-auto p-4 space-y-3 flex-grow custom-scrollbar relative">
                <!-- Notifications will be dynamically inserted here -->
            </ul>
            <!-- Footer Actions -->
            <div id="notification-actions" class="p-4 flex-shrink-0 flex items-center justify-between">
                <button id="history-button" class="px-4 py-2 text-white rounded-lg font-medium transition-all duration-300">History</button>
                <button id="back-button" class="px-4 py-2 bg-slate-500 text-white rounded-lg font-medium hover:bg-slate-600 transition-all duration-300 hidden">
                    &larr; Back to Notifications
                </button>
                <button id="clear-all-button" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-all duration-300">Clear All</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <!-- Overlay -->
        <div id="settings-modal-overlay" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <!-- Modal Content -->
        <div id="settings-modal-content" class="relative w-full max-w-4xl bg-white/50 dark:bg-slate-800/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/30 dark:border-slate-700 m-4 flex flex-col" style="max-height: 90vh;">
            <!-- Header -->
            <div class="flex items-center justify-between p-5 flex-shrink-0 border-b border-white/30 dark:border-slate-700">
                <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-100">Settings</h3>
                <button id="close-settings-modal" class="p-2 rounded-lg hover:bg-slate-200/60 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <!-- Main Content Area -->
            <div class="flex flex-grow overflow-hidden">
                <!-- Left Navigation -->
                <nav class="w-1/4 p-4 border-r border-white/30 dark:border-slate-700 overflow-y-auto custom-scrollbar">
                    <ul class="space-y-1">
                        <li><button class="settings-tab active" data-tab="profile">Profile</button></li>
                        <li><button class="settings-tab" data-tab="integrations">Integrations</button></li>
                        <li><button class="settings-tab" data-tab="billing">Manage Billing</button></li>
                        <li><button class="settings-tab" data-tab="invoices">Invoices</button></li>
                        <li><button class="settings-tab" data-tab="security">Security</button></li>
                        <li><button class="settings-tab" data-tab="notifications-settings">Notifications</button></li>
                    </ul>
                </nav>
                <!-- Right Content Panels -->
                <div class="w-3/4 p-6 overflow-y-auto custom-scrollbar">
                    <!-- Profile Content -->
                    <div id="profile-settings-content" class="settings-tab-content space-y-6">
                        <div>
                            <h4 class="text-xl font-semibold text-slate-800">Personal Profile</h4>
                            <p class="text-slate-500 mt-1">This is how your profile looks to others.</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/64x64/e2e8f0/64748b?text=U" class="w-16 h-16 rounded-full object-cover" alt="User Avatar">
                            <div>
                                <button class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg text-sm font-medium hover:bg-indigo-200">Change</button>
                                <button class="p-2 text-slate-500 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
                            </div>
                        </div>
                        <div>
                            <label for="fullName" class="block text-sm font-medium text-slate-700">Full Name</label>
                            <input type="text" id="fullName" value="User Name" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white/70 dark:bg-slate-700/50 dark:border-slate-600 dark:text-slate-200 p-2">
                        </div>
                         <div>
                            <label for="email" class="block text-sm font-medium text-slate-700">Email Address</label>
                            <input type="email" id="email" value="user.name@example.com" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white/70 dark:bg-slate-700/50 dark:border-slate-600 dark:text-slate-200 p-2">
                        </div>
                    </div>
                    <!-- Other Settings Content (Initially Hidden) -->
                    <div id="integrations-settings-content" class="settings-tab-content hidden space-y-6">
                         <div>
                            <h4 class="text-xl font-semibold text-slate-800 dark:text-slate-100">Integrations</h4>
                            <p class="text-slate-500 dark:text-slate-400 mt-1">Connect your favorite apps to streamline your workflow.</p>
                        </div>
                        
                        <!-- OpenAI API Integration -->
                        <div class="bg-white/50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 space-y-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 dark:text-green-400">
                                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h5 class="text-lg font-semibold text-slate-800 dark:text-slate-100">OpenAI API</h5>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Power AI features across the platform</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label for="openai-api-key" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                        API Key
                                    </label>
                                    <div class="flex gap-2">
                                        <input 
                                            type="password" 
                                            id="openai-api-key" 
                                            placeholder="sk-..." 
                                            class="flex-1 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white/70 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none"
                                        />
                                        <button 
                                            id="toggle-api-key-visibility"
                                            class="px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors"
                                            type="button"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                        </button>
                                    </div>
                                    <p class="text-xs text-slate-500 dark:text-slate-400 mt-2">
                                        Your API key is stored locally and never sent to our servers.
                                    </p>
                                </div>
                                
                                <div class="flex items-center gap-4">
                                    <button 
                                        id="test-api-key-button"
                                        class="px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors"
                                    >
                                        Test Connection
                                    </button>
                                    <span id="api-key-status" class="text-sm text-slate-500 dark:text-slate-400"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- JSearch API Integration -->
                        <div class="bg-white/50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 space-y-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
                                    <span class="text-2xl">🔍</span>
                                </div>
                                <div>
                                    <h5 class="text-lg font-semibold text-slate-800 dark:text-slate-100">JSearch API</h5>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Get real job listings from job boards</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label for="jsearch-api-key" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                        JSearch API Key (Optional)
                                    </label>
                                    <div class="flex gap-2">
                                        <input 
                                            type="password" 
                                            id="jsearch-api-key" 
                                            placeholder="Enter your JSearch API key" 
                                            class="flex-1 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white/70 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none"
                                        />
                                        <button 
                                            id="toggle-jsearch-api-key-visibility"
                                            class="px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors"
                                            type="button"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                        </button>
                                    </div>
                                    <p class="text-xs text-slate-500 dark:text-slate-400 mt-2">
                                        <strong>Note:</strong> JSearch API has browser CORS restrictions. For real job data, you'd need a backend proxy. Currently using AI-powered realistic job listings instead.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div id="billing-settings-content" class="settings-tab-content hidden">
                         <div>
                            <h4 class="text-xl font-semibold text-slate-800">Manage Billing</h4>
                            <p class="text-slate-500 mt-1">Update your payment method and view your subscription details.</p>
                        </div>
                    </div>
                     <div id="invoices-settings-content" class="settings-tab-content hidden">
                         <div>
                            <h4 class="text-xl font-semibold text-slate-800">Invoices</h4>
                            <p class="text-slate-500 mt-1">Review and download your past invoices.</p>
                        </div>
                    </div>
                     <div id="security-settings-content" class="settings-tab-content hidden">
                         <div>
                            <h4 class="text-xl font-semibold text-slate-800">Security</h4>
                            <p class="text-slate-500 mt-1">Manage your password and two-factor authentication.</p>
                        </div>
                    </div>
                    <div id="notifications-settings-settings-content" class="settings-tab-content hidden">
                         <div>
                            <h4 class="text-xl font-semibold text-slate-800">Notification Settings</h4>
                            <p class="text-slate-500 mt-1">Choose how and when you want to be notified.</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer -->
            <div id="settings-actions" class="p-4 flex-shrink-0 flex items-center justify-end gap-4 border-t border-white/30 dark:border-slate-700">
                <button id="cancel-settings-button" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg font-medium hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors">Cancel</button>
                <button id="save-settings-button" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Floating Chat Button -->
    <button id="chat-widget-button" class="fixed bottom-8 right-8 w-16 h-16 bg-indigo-600 rounded-full shadow-lg flex items-center justify-center text-white hover:bg-indigo-700 transition-colors z-50">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
    </button>
    
    <!-- Chat Widget -->
    <div id="chat-widget" class="fixed bottom-28 right-8 w-full max-w-sm h-full max-h-[600px] rounded-2xl shadow-lg hidden z-50 flex flex-col overflow-hidden">
        
        <!-- Close Button -->
        <button id="close-chat-widget" class="absolute top-4 right-4 z-20 p-2 rounded-full text-indigo-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        
        <!-- Messages -->
        <div id="chat-messages" class="flex-grow p-4 space-y-4 overflow-y-auto custom-scrollbar flex flex-col">
            <!-- Animation HTML -->
            <div id="stars-container"></div>
            <div class="section-banner-sun"></div>
            <!-- Messages will be injected here -->
        </div>
        
        <!-- Input -->
        <div class="p-4 flex-shrink-0">
            <div class="flex items-center gap-2">
                <input type="text" id="chat-input" placeholder="Type your message..." class="w-full h-10 px-3 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all duration-300 text-sm text-slate-800 dark:text-slate-200">
                <button id="send-chat-button" class="w-10 h-10 bg-indigo-600 text-white rounded-lg flex items-center justify-center flex-shrink-0 hover:bg-indigo-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            
            if (sidebar && sidebarToggle) {
                sidebarToggle.addEventListener('click', () => {
                    const isCollapsed = sidebar.classList.contains('collapsed');
                    const toggleIcon = document.getElementById('sidebar-toggle-icon');

                    if (isCollapsed) {
                        // Expanding
                        sidebar.classList.remove('w-16', 'collapsed');
                        sidebar.classList.add('w-[16.5rem]');
                        if (toggleIcon) toggleIcon.classList.remove('rotate-180');
                    } else {
                        // Collapsing
                        sidebar.classList.remove('w-[16.5rem]');
                        sidebar.classList.add('w-16', 'collapsed');
                        if (toggleIcon) toggleIcon.classList.add('rotate-180');
                    }
                });
            }

            // New navigation logic
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const contentSections = {
                'dashboard': document.getElementById('dashboard-content'),
                'brand-audit': document.getElementById('brand-audit-content'),
                'upskilling-dash': document.getElementById('upskilling-dash-content'),
                'career-portfolio': document.getElementById('career-portfolio-content'),
                'resume-studio': document.getElementById('resume-studio-content'),
                'app-tailor': document.getElementById('app-tailor-content'),
                'cover-letter': document.getElementById('cover-letter-content'),
                'job-finder': document.getElementById('job-finder-content'),
                'job-tracker': document.getElementById('job-tracker-content'),
                'interview-prep': document.getElementById('interview-prep-content'),
                'work-history': document.getElementById('work-history-content'),
                'ai-brand-audit': document.getElementById('ai-brand-audit-content'),
                'content-engine': document.getElementById('content-engine-content'),
                'event-scout': document.getElementById('career-event-scout-content'),
                'brand-intelligence': document.getElementById('brand-intelligence-content'),
                'skill-radar': document.getElementById('skill-radar-content'),
                'learning-path': document.getElementById('learning-path-content'),
                'sprints': document.getElementById('sprints-content'),
                'certifications': document.getElementById('certifications-content'),
                'benchmarking': document.getElementById('skill-benchmarking-content')
            };

            const headerMainTitle = document.getElementById('header-main-title');
            const headerSubtitle = document.getElementById('header-subtitle');
            const headerIconContainer = document.getElementById('header-icon-container');

            const headerContentMap = {
                'dashboard': { title: 'Dashboard', subtitle: 'Organize your work and improve your performance.' },
                'resume-studio': { title: 'Smart Resume Studio', subtitle: 'Craft the perfect resume with AI assistance.' },
                'app-tailor': { title: 'Application Tailor', subtitle: 'Customize your applications for each job.' },
                'cover-letter': { title: 'Cover Letter Generator', subtitle: 'Create compelling cover letters in minutes.' },
                'job-finder': { title: 'Job Finder', subtitle: 'Discover your next career opportunity.' },
                'job-tracker': { title: 'Job Tracker', subtitle: 'Keep your job applications organized.' },
                'interview-prep': { title: 'Interview Prep Kit', subtitle: 'Ace your next interview with AI-powered tools.' },
                'work-history': { title: 'Work History Manager', subtitle: 'A complete record of your professional experience.' },
                'brand-audit': { title: 'AI Personal Brand Audit', subtitle: 'Get a comprehensive analysis of your online presence.' },
                'content-engine': { title: 'Content Engine', subtitle: 'Generate professional content to build your brand.' },
                'career-portfolio': { title: 'AI Career Portfolio', subtitle: 'Your living, breathing mentor experience.' },
                'event-scout': { title: 'Career Event Scout', subtitle: 'Find networking events and opportunities.' },
                'brand-intelligence': { title: 'AI Brand Intelligence', subtitle: 'Monitor your brand and industry trends.' },
                'upskilling-dash': { title: 'Upskilling Dashboard', subtitle: 'Your central hub for skill growth.' },
                'skill-radar': { title: 'Skill Radar', subtitle: 'Identify and track in-demand skills.' },
                'learning-path': { title: 'Learning Path', subtitle: 'Personalized learning plans for your goals.' },
                'sprints': { title: 'Sprints', subtitle: 'Focused, short-term learning challenges.' },
                'certifications': { title: 'Certifications', subtitle: 'Track and manage your professional certifications.' },
                'benchmarking': { title: 'Skill Benchmarking', subtitle: 'See how your skills stack up against your peers.' }
            };

            function updateHeader(linkId) {
                const content = headerContentMap[linkId];
                const sourceLink = document.querySelector(`.sidebar-link[data-id="${linkId}"]`);

                if (content && headerMainTitle && headerSubtitle) {
                    headerMainTitle.textContent = content.title;
                    headerSubtitle.textContent = content.subtitle;
                } else { 
                    const linkText = sourceLink ? sourceLink.querySelector('.sidebar-text').textContent.trim() : 'Dashboard';
                    headerMainTitle.textContent = linkText;
                    headerSubtitle.textContent = 'Manage your career effectively.';
                }

                if (sourceLink && headerIconContainer) {
                    const iconSVG = sourceLink.querySelector('svg').cloneNode(true);
                    iconSVG.classList.remove(...iconSVG.classList);
                    iconSVG.classList.add('w-6', 'h-6', 'text-white');
                    headerIconContainer.innerHTML = ''; 
                    headerIconContainer.appendChild(iconSVG);
                }
            }


            // Set initial state
            const setActiveLink = (linkId) => {
                sidebarLinks.forEach(link => {
                    link.classList.remove('active');
                });
                const activeLink = document.querySelector(`.sidebar-link[data-id="${linkId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
                updateHeader(linkId);
            };
            
            function animateSkillProgress(percentage) {
                const circle = document.getElementById('skill-progress-circle');
                const text = document.getElementById('skill-progress-text');
                if (!circle || !text) return;

                const radius = circle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (percentage / 100) * circumference;

                circle.style.strokeDasharray = `${circumference} ${circumference}`;
                // Set initial state without transition to avoid animation on page load
                circle.style.transition = 'none';
                circle.style.strokeDashoffset = circumference;
                
                // Use a timeout to apply the transition and new offset, forcing a reflow
                setTimeout(() => {
                    circle.style.transition = 'stroke-dashoffset 1s ease-out';
                    circle.style.strokeDashoffset = offset;
                }, 50);

                // Animate the text
                let start = 0;
                const duration = 1000;
                const startTime = performance.now();

                function step(currentTime) {
                    const elapsedTime = currentTime - startTime;
                    const progress = Math.min(elapsedTime / duration, 1);
                    const currentVal = Math.round(progress * percentage);
                    
                    text.textContent = `${currentVal}%`;

                    if (progress < 1) {
                        requestAnimationFrame(step);
                    } else {
                        text.textContent = `${percentage}%`;
                    }
                }
                requestAnimationFrame(step);
            }

            const mainPaddingWrapper = document.getElementById('main-padding-wrapper');
            const showContent = (contentId) => {
                Object.values(contentSections).forEach(section => {
                    if (section) section.classList.add('hidden');
                });

                const activeContent = contentSections[contentId];
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                     // If showing the upskilling dash, trigger animation
                    if (contentId === 'upskilling-dash') {
                        animateSkillProgress(65); // Hardcoded value from PRD
                    }
                    // If showing the app-tailor, trigger rendering
                    if (contentId === 'resume-studio') {
                        setTimeout(() => {
                            window.renderSmartResumeStudio();
                        }, 100);
                    }
                    // If showing the app-tailor, trigger rendering
                    if (contentId === 'app-tailor') {
                        setTimeout(() => {
                            console.log('Application Tailor content shown, triggering render...');
                            window.renderApplicationTailor();
                        }, 100);
                    }
                    // If showing the cover-letter, trigger rendering
                    if (contentId === 'cover-letter') {
                        setTimeout(() => {
                            console.log('Cover Letter Generator content shown, triggering render...');
                            window.renderCoverLetterGenerator();
                        }, 100);
                    }
                    // If showing the job-finder, trigger rendering
                    if (contentId === 'job-finder') {
                        setTimeout(() => {
                            console.log('Job Finder content shown, triggering render...');
                            window.renderJobFinder();
                        }, 100);
                    }
                    // If showing the job-tracker, trigger rendering
                    if (contentId === 'job-tracker') {
                        setTimeout(() => {
                            console.log('Job Tracker content shown, triggering render...');
                            window.renderJobTracker();
                        }, 100);
                    }
                    // If showing the interview-prep, trigger rendering
                    if (contentId === 'interview-prep') {
                        setTimeout(() => {
                            console.log('Interview Prep Kit content shown, triggering render...');
                            window.renderInterviewPrepKit();
                        }, 100);
                    }
                    // If showing the work-history, trigger rendering
                    if (contentId === 'work-history') {
                        setTimeout(() => {
                            console.log('Work History Manager content shown, triggering render...');
                            window.renderWorkHistoryManager();
                        }, 100);
                    }
                    // If showing the ai-brand-audit, trigger rendering
                    if (contentId === 'ai-brand-audit') {
                        setTimeout(() => {
                            console.log('AI-Powered Personal Brand Audit content shown, triggering render...');
                            window.renderAIBrandAudit();
                        }, 100);
                    }
                    // If showing the content-engine, trigger rendering
                    if (contentId === 'content-engine') {
                        setTimeout(() => {
                            console.log('Content Engine for Thought Leadership content shown, triggering render...');
                            window.renderContentEngine();
                        }, 100);
                    }
                    // If showing the career-portfolio, trigger rendering
                    if (contentId === 'career-portfolio') {
                        setTimeout(() => {
                            console.log('AI-Generated Career Portfolio/Microsite content shown, triggering render...');
                            window.renderAIPortfolio();
                        }, 100);
                    }
                    // If showing the event-scout, trigger rendering
                    if (contentId === 'event-scout') {
                        setTimeout(() => {
                            console.log('Career Event Scout content shown, triggering render...');
                            window.renderCareerEventScout();
                        }, 100);
                    }
                    // If showing the brand-intelligence, trigger rendering
                    if (contentId === 'brand-intelligence') {
                        setTimeout(() => {
                            console.log('AI Brand Intelligence content shown, triggering render...');
                            window.renderAIBrandIntelligence();
                        }, 100);
                    }
                    // If showing the upskilling-dash, trigger rendering
                    if (contentId === 'upskilling-dash') {
                        setTimeout(() => {
                            console.log('Upskilling Dashboard content shown, triggering render...');
                            window.renderUpskillingDashboard();
                        }, 100);
                    }
                    // If showing the skill-radar, trigger rendering
                    if (contentId === 'skill-radar') {
                        setTimeout(() => {
                            console.log('Skill Radar content shown, triggering render...');
                            window.renderSkillRadar();
                        }, 100);
                    }
                    // If showing the learning-path, trigger rendering
                    if (contentId === 'learning-path') {
                        setTimeout(() => {
                            console.log('Learning Path content shown, triggering render...');
                            window.renderLearningPath();
                        }, 100);
                    }
                    // If showing the sprints, trigger rendering
                    if (contentId === 'sprints') {
                        setTimeout(() => {
                            console.log('Sprints content shown, triggering render...');
                            window.renderSprints();
                        }, 100);
                    }
                    // If showing the certifications, trigger rendering
                    if (contentId === 'certifications') {
                        setTimeout(() => {
                            console.log('Certifications content shown, triggering render...');
                            window.renderCertifications();
                        }, 100);
                    }
                    // If showing the benchmarking, trigger rendering
                    if (contentId === 'benchmarking') {
                        setTimeout(() => {
                            console.log('Skill Benchmarking content shown, triggering render...');
                            window.renderSkillBenchmarking();
                        }, 100);
                    }
                }
            };

            // Initially show Brand Audit
            setActiveLink('brand-audit');
            showContent('brand-audit');

            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const linkId = link.dataset.id;
                    
                    // Special handling for resume-studio to navigate to external page
                    if (linkId === 'resume-studio') {
                        window.parent.postMessage('navigate-to-smart-resume-studio', '*');
                        return;
                    }
                    
                    
                    if (contentSections[linkId]) {
                        setActiveLink(linkId);
                        showContent(linkId);
                    }
                });
            });

            // AI Mentor Tabs Logic
            const mentorTabs = document.querySelectorAll('.ai-mentor-tab');
            const mentorTabContents = document.querySelectorAll('.ai-mentor-tab-content');

            mentorTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');

                    // Update button styles
                    mentorTabs.forEach(t => {
                        t.classList.remove('active');
                    });
                    tab.classList.add('active');
                    
                    // Show content
                    mentorTabContents.forEach(content => {
                        if (content.id === `${tabId}-tab-content`) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });

                    // For now, other tabs show a placeholder
                    if (tabId !== 'dashboard') {
                        const contentEl = document.getElementById(`${tabId}-tab-content`);
                        if(contentEl && !contentEl.innerHTML) {
                             contentEl.innerHTML = `<div class="text-center p-16 bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl">
                                  <h3 class="text-xl font-semibold text-slate-800">Content for ${tab.textContent} coming soon!</h3>
                                  <p class="text-slate-600 mt-2">This section is under construction.</p>
                                  </div>`;
                        }
                    }
                });
            });

            // User menu toggle
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');
            
            if (userMenuButton && userMenu) {
                userMenuButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    userMenu.classList.toggle('hidden');
                });

                document.addEventListener('click', (e) => {
                    if (!userMenu.contains(e.target) && !userMenuButton.contains(e.target)) {
                        userMenu.classList.add('hidden');
                    }
                });
            }

            // Photo Upload
            const uploadPhotoButton = document.getElementById('upload-photo-button');
            const photoUpload = document.getElementById('photo-upload');
            const userAvatar = document.getElementById('user-avatar');
            const userAvatarDropdown = document.getElementById('user-avatar-dropdown');

            if (uploadPhotoButton && photoUpload && userAvatar && userAvatarDropdown) {
                uploadPhotoButton.addEventListener('click', () => photoUpload.click());
                photoUpload.addEventListener('change', (event) => {
                    if (event.target.files && event.target.files[0]) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const imageUrl = e.target.result;
                            userAvatar.src = imageUrl;
                            userAvatarDropdown.src = imageUrl;
                        };
                        reader.readAsDataURL(event.target.files[0]);
                    }
                });
            }

            // Dark Mode Toggle
            const darkModeRow = document.getElementById('dark-mode-row');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            if (darkModeRow && darkModeToggle) {
                darkModeRow.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    const toggleCircle = darkModeToggle.querySelector('span:last-child');
                    if (document.documentElement.classList.contains('dark')) {
                        toggleCircle.classList.remove('translate-x-1');
                        toggleCircle.classList.add('translate-x-6');
                        darkModeToggle.classList.remove('bg-slate-200');
                        darkModeToggle.classList.add('bg-indigo-600');
                    } else {
                        toggleCircle.classList.remove('translate-x-6');
                        toggleCircle.classList.add('translate-x-1');
                        darkModeToggle.classList.remove('bg-indigo-600');
                        darkModeToggle.classList.add('bg-slate-200');
                    }
                });
            }

            // --- Notification Logic ---
            const userIconBadge = document.getElementById('user-icon-notification-badge');
            const dropdownBadge = document.getElementById('dropdown-notification-badge');
            const notificationMenuButton = document.getElementById('notification-menu-button');
            const addNotificationButton = document.getElementById('add-notification-button');
            
            // Modal Elements
            const notificationModal = document.getElementById('notification-modal');
            const notificationList = document.getElementById('notification-list');
            const closeNotificationModalButton = document.getElementById('close-notification-modal');
            const notificationModalOverlay = document.getElementById('notification-modal-overlay');
            const modalHeaderBadge = document.getElementById('modal-header-notification-badge');
            const modalTitle = document.getElementById('notification-modal-title');
            const historyButton = document.getElementById('history-button');
            const clearAllButton = document.getElementById('clear-all-button');
            const backButton = document.getElementById('back-button');

            // --- Notification State ---
            let isHistoryView = false;
            let notificationHistory = [];
            
            // Demo notifications data
            let notifications = [
                // Today
                { id: 1, text: "Your profile analysis is complete. View your new insights.", timestamp: "5 mins ago", read: false, sourceId: 'brand-intelligence', createdAt: new Date('2025-09-20T09:35:00Z').getTime() },
                { id: 2, text: "Your brand score improved by 5 points!", timestamp: "50 mins ago", read: false, sourceId: 'brand-audit', createdAt: new Date('2025-09-20T08:50:00Z').getTime() },
                { id: 3, text: "New feature 'AI Portfolio' is now available.", timestamp: "2 hours ago", read: false, sourceId: 'career-portfolio', createdAt: new Date('2025-09-20T07:50:00Z').getTime() },
                { id: 4, text: "You have 3 new job recommendations.", timestamp: "5 hours ago", read: false, sourceId: 'job-finder', createdAt: new Date('2025-09-20T04:50:00Z').getTime() },
                
                // Yesterday
                { id: 5, text: "You have a new connection request from Jane Doe.", timestamp: "Yesterday", read: true, sourceId: 'event-scout', createdAt: new Date('2025-09-19T18:00:00Z').getTime() },
                { id: 6, text: "Monthly Brand Review is ready.", timestamp: "Yesterday", read: true, sourceId: 'brand-audit', createdAt: new Date('2025-09-19T12:00:00Z').getTime() },

                // This Week
                { id: 7, text: "A new post was generated for your review.", timestamp: "Wednesday", read: true, sourceId: 'content-engine', createdAt: new Date('2025-09-17T10:00:00Z').getTime() },
                { id: 8, text: "3 new articles have been generated by the Content Engine.", timestamp: "Tuesday", read: true, sourceId: 'content-engine', createdAt: new Date('2025-09-16T14:00:00Z').getTime() },
                
                // Previously (This Month / Older)
                { id: 9, text: "A new skill 'Data Analysis' was added to your Skill Radar.", timestamp: "Sep 5", read: true, sourceId: 'skill-radar', createdAt: new Date('2025-09-05T09:00:00Z').getTime() },
                { id: 10, text: "Your 'Content Engine' summary from last month.", timestamp: "Last month", read: true, sourceId: 'content-engine', createdAt: new Date('2025-08-15T12:00:00Z').getTime() },
                { id: 11, text: "Older notification from a while back.", timestamp: "2 months ago", read: true, sourceId: 'dashboard', createdAt: new Date('2025-07-10T12:00:00Z').getTime() },
            ];
            
            function filterOldNotifications() {
                // Automatically remove notifications older than 30 days from active list
                const thirtyDaysAgo = Date.now() - (30 * 24 * 60 * 60 * 1000);
                notifications = notifications.filter(n => n.createdAt >= thirtyDaysAgo);
                 // We could also clean up the history here if needed, but the prompt implies they persist.
            }
            
            function getNotificationCategory(timestamp) {
                const now = new Date('2025-09-20T09:10:00'); // Fixed time for consistent demo
                const date = new Date(timestamp);
                
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const yesterday = new Date(today);
                yesterday.setDate(yesterday.getDate() - 1);
                const notificationDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());

                if (notificationDate.getTime() === today.getTime()) return 'Today';
                if (notificationDate.getTime() === yesterday.getTime()) return 'Yesterday';
                
                const startOfWeek = new Date(today);
                startOfWeek.setDate(today.getDate() - today.getDay()); 
                if (notificationDate >= startOfWeek) return 'This Week';

                const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
                if (notificationDate >= startOfMonth) return 'This Month';

                return 'Older';
            }

            function renderNotifications() {
                const listToRender = isHistoryView ? notificationHistory : notifications;
                notificationList.innerHTML = '';
                
                if (listToRender.length === 0) {
                    const message = isHistoryView ? "Your notification history is empty." : "You're all caught up!";
                    notificationList.innerHTML = `<li class="text-center text-slate-500 dark:text-slate-400 py-12">${message}</li>`;
                    return;
                }

                const grouped = listToRender.reduce((acc, n) => {
                    const category = getNotificationCategory(n.createdAt);
                    if (!acc[category]) acc[category] = [];
                    acc[category].push(n);
                    return acc;
                }, {});

                const categoryOrder = ['Today', 'Yesterday', 'This Week', 'This Month', 'Older'];
                
                categoryOrder.forEach(category => {
                    if (grouped[category]) {
                        const header = document.createElement('li');
                        // Add a specific class to target these headers with CSS
                        header.className = 'notification-category-header';
                        // The H4 inside no longer needs a background as it scrolls with content.
                        header.innerHTML = `<h4 class="text-sm font-bold text-slate-500 dark:text-slate-400 py-2">${category}</h4>`;
                        notificationList.appendChild(header);

                        grouped[category].forEach(notification => {
                            const li = document.createElement('li');
                            const isClickable = !isHistoryView;
                            li.className = `flex items-start gap-4 p-4 rounded-xl transition-colors ${isClickable ? 'cursor-pointer bg-slate-50 border border-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700' : 'bg-slate-50/50 dark:bg-slate-800/50'}`;
                            li.dataset.id = notification.id;

                            let iconHtml = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-indigo-600"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>';
                            const sourceLink = document.querySelector(`.sidebar-link[data-id="${notification.sourceId}"]`);
                            if (sourceLink) {
                                const svgElement = sourceLink.querySelector('svg').cloneNode(true);
                                svgElement.classList.remove(...svgElement.classList);
                                svgElement.classList.add('w-5', 'h-5', 'text-indigo-600');
                                iconHtml = svgElement.outerHTML;
                            }

                            let displayTimestampText = notification.timestamp;
                            if (['This Week', 'This Month', 'Older'].includes(category)) {
                                const date = new Date(notification.createdAt);
                                displayTimestampText = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                            }
                            
                            const displayTimestamp = `<span class="font-medium" style="color: #4f46e5;">${displayTimestampText}</span>`;

                            li.innerHTML = `
                                <div class="flex-shrink-0 w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-md">${iconHtml}</div>
                                <div class="flex-grow">
                                    <div class="flex items-start justify-between">
                                        <p class="text-sm font-medium text-slate-800 dark:text-slate-200 pr-2">${notification.text}</p>
                                        ${!isHistoryView && !notification.read ? '<span class="flex-shrink-0 text-xs font-medium px-2 py-1 rounded-full bg-indigo-600 text-white">New</span>' : ''}
                                    </div>
                                    <p class="text-xs mt-1">${displayTimestamp}</p>
                                </div>
                            `;
                            
                            if (isClickable) {
                                li.addEventListener('click', () => {
                                    const notif = notifications.find(n => n.id == notification.id);
                                    if (notif) {
                                        // Mark as read if it was unread
                                        if (!notif.read) {
                                            notif.read = true;
                                            updateNotificationUI(); // Update the badges
                                        }

                                        // Find the corresponding sidebar link and click it to navigate
                                        const sourceLink = document.querySelector(`.sidebar-link[data-id="${notif.sourceId}"]`);
                                        if (sourceLink) {
                                            sourceLink.click();
                                        }
                                        
                                        // Close the modal for a seamless experience
                                        closeModal();
                                    }
                                });
                            }
                            notificationList.appendChild(li);
                        });
                    }
                });
            }


            function updateNotificationUI() {
                const unreadCount = notifications.filter(n => !n.read).length;
                const countStr = unreadCount > 99 ? '99+' : unreadCount.toString();
                if (unreadCount > 0) {
                    userIconBadge.textContent = countStr;
                    dropdownBadge.textContent = countStr;
                    modalHeaderBadge.textContent = countStr;
                    userIconBadge.classList.remove('hidden');
                    dropdownBadge.classList.remove('hidden');
                    modalHeaderBadge.classList.remove('hidden');
                } else {
                    userIconBadge.classList.add('hidden');
                    dropdownBadge.classList.add('hidden');
                    modalHeaderBadge.classList.add('hidden');
                }
            }

            function closeModal() {
                notificationModal.classList.add('hidden');
                 // Reset to default view when closing
                if (isHistoryView) {
                    isHistoryView = false;
                    modalTitle.textContent = 'Notifications';
                    historyButton.classList.remove('hidden');
                    clearAllButton.classList.remove('hidden');
                    backButton.classList.add('hidden');
                }
            }
            
            // Initial UI update
            filterOldNotifications();
            updateNotificationUI();

            // Open modal
            if (notificationMenuButton) {
                notificationMenuButton.addEventListener('click', () => {
                    filterOldNotifications();
                    renderNotifications();
                    notificationModal.classList.remove('hidden');
                    userMenu.classList.add('hidden');
                });
            }
            
            // Add a notification for demonstration
            if (addNotificationButton) {
                 addNotificationButton.addEventListener('click', () => {
                    const newNotification = { id: Date.now(), text: `Brand re-analysis complete! New insights available.`, timestamp: "Just now", read: false, sourceId: 'brand-audit', createdAt: Date.now() };
                    notifications.unshift(newNotification);
                    updateNotificationUI();
                });
            }

            // Modal event listeners
            closeNotificationModalButton.addEventListener('click', closeModal);
            notificationModalOverlay.addEventListener('click', closeModal);

            clearAllButton.addEventListener('click', () => {
                notificationHistory.unshift(...notifications);
                notifications = [];
                updateNotificationUI();
                renderNotifications();
            });

            historyButton.addEventListener('click', () => {
                isHistoryView = true;
                modalTitle.textContent = 'History';
                historyButton.classList.add('hidden');
                clearAllButton.classList.add('hidden');
                backButton.classList.remove('hidden');
                renderNotifications();
            });
            
            backButton.addEventListener('click', () => {
                isHistoryView = false;
                modalTitle.textContent = 'Notifications';
                historyButton.classList.remove('hidden');
                clearAllButton.classList.remove('hidden');
                backButton.classList.add('hidden');
                renderNotifications();
            });


            // --- Sidebar Dropdown Logic ---
            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const parentContainer = toggle.parentElement;
                    // Toggle the clicked one
                    parentContainer.classList.toggle('open');
                });
            });


            // --- Shortcut Customization Logic (with reordering) ---
            const editShortcutsButton = document.getElementById('edit-shortcuts-button');
            const shortcutsContainer = document.getElementById('shortcuts-container');
            let isCustomizing = false;
            let shortcuts = ['brand-audit', 'content-engine', 'job-finder']; // Default shortcuts
            const MAX_SHORTCUTS = 5;
            let draggedShortcutId = null; // To track internal drags

            function handleClickOutsideShortcuts(e) {
                // Deactivate customization if the click is outside the shortcuts container, the sidebar,
                // the user menu itself, and the button that toggles it.
                if (isCustomizing &&
                    !shortcutsContainer.contains(e.target) &&
                    !sidebar.contains(e.target) &&
                    !userMenu.contains(e.target) &&
                    !editShortcutsButton.contains(e.target)) {
                    toggleCustomizationMode();
                }
            }

            function renderShortcuts() {
                shortcutsContainer.innerHTML = '';

                // Control the placeholder text attribute.
                if (isCustomizing && shortcuts.length === 0) {
                    shortcutsContainer.setAttribute('data-placeholder', 'Drag & drop from the sidebar to add shortcuts');
                } else {
                    shortcutsContainer.removeAttribute('data-placeholder');
                }

                // Render the actual shortcut items
                shortcuts.forEach(id => {
                    const sourceLink = document.querySelector(`.sidebar-link[data-id="${id}"]`);
                    if (sourceLink) {
                        const shortcutItem = document.createElement('a');
                        shortcutItem.href = "#";
                        shortcutItem.className = 'shortcut-item';
                        shortcutItem.dataset.id = id;
                        shortcutItem.setAttribute('draggable', 'true'); // Make shortcuts always draggable
                        const iconHTML = sourceLink.querySelector('svg').outerHTML;
                        shortcutItem.innerHTML = `${iconHTML}<button class="remove-shortcut-btn">&times;</button>`;
                        
                        // Add click handler to navigate
                        shortcutItem.addEventListener('click', (e) => {
                            if (!isCustomizing) {
                                e.preventDefault();
                                sourceLink.click();
                            }
                        });

                        // Add remove handler
                        shortcutItem.querySelector('.remove-shortcut-btn').addEventListener('click', (e) => {
                             e.preventDefault();
                             e.stopPropagation();
                             shortcuts = shortcuts.filter(sId => sId !== id);
                             renderShortcuts();
                        });

                        // Add drag handlers for reordering
                        shortcutItem.addEventListener('dragstart', (e) => {
                            e.stopPropagation();
                            draggedShortcutId = id;
                            e.dataTransfer.setData('application/shortcut-id', id);
                            e.dataTransfer.effectAllowed = 'move';
                            setTimeout(() => shortcutItem.classList.add('dragging'), 0);
                        });

                        shortcutItem.addEventListener('dragend', () => {
                            draggedShortcutId = null;
                            shortcutItem.classList.remove('dragging');
                        });
                        
                        shortcutsContainer.appendChild(shortcutItem);
                    }
                });
                
                // Render placeholder slots (+) if in customization mode and NOT empty
                if (isCustomizing && shortcuts.length > 0) {
                    const emptySlots = MAX_SHORTCUTS - shortcuts.length;
                    for (let i = 0; i < emptySlots; i++) {
                        const placeholder = document.createElement('div');
                        placeholder.className = 'shortcut-placeholder';
                        placeholder.textContent = '+';
                        shortcutsContainer.appendChild(placeholder);
                    }
                }
            }
            
            function toggleCustomizationMode() {
                isCustomizing = !isCustomizing;
                shortcutsContainer.classList.toggle('customization-active', isCustomizing);
                sidebarLinks.forEach(link => {
                    link.setAttribute('draggable', isCustomizing);
                });
                
                const buttonSpan = editShortcutsButton.querySelector('span');
                if (isCustomizing) {
                    buttonSpan.textContent = 'Done Customizing';
                    // Add listener to exit customization by clicking away
                    document.addEventListener('click', handleClickOutsideShortcuts, true);
                } else {
                    buttonSpan.textContent = 'Customize Shortcuts';
                    // Clean up the listener when not customizing
                    document.removeEventListener('click', handleClickOutsideShortcuts, true);
                }
                renderShortcuts(); // Re-render to show/hide placeholders
            }

            editShortcutsButton.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleCustomizationMode();
            });
            
            // Drag and Drop Logic from SIDEBAR
            sidebarLinks.forEach(link => {
                link.addEventListener('dragstart', (e) => {
                    if(!isCustomizing) {
                        e.preventDefault();
                        return;
                    }
                    draggedShortcutId = null; // Ensure we know it's not an internal drag
                    e.dataTransfer.setData('application/sidebar-link-id', link.dataset.id);
                    link.classList.add('dragging');
                });
                link.addEventListener('dragend', () => {
                     link.classList.remove('dragging');
                });
            });

            // Drag handling for the CONTAINER
            shortcutsContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                // Allow drop if customizing (for new items) or if an internal item is being dragged for reordering
                if (isCustomizing || draggedShortcutId) {
                    shortcutsContainer.classList.add('drag-over');
                }
            });

             shortcutsContainer.addEventListener('dragleave', () => {
                shortcutsContainer.classList.remove('drag-over');
            });
            
            shortcutsContainer.addEventListener('drop', (e) => {
                e.preventDefault();
                shortcutsContainer.classList.remove('drag-over');
                
                const newIdFromSidebar = e.dataTransfer.getData('application/sidebar-link-id');
                const movedId = e.dataTransfer.getData('application/shortcut-id');

                // Case 1: Reordering an existing shortcut
                if (movedId) {
                    const targetElement = e.target.closest('.shortcut-item');
                    if (!targetElement || targetElement.dataset.id === movedId) {
                        return; // Dropped on itself or in a gap, do nothing
                    }

                    const fromIndex = shortcuts.indexOf(movedId);
                    const toIndex = shortcuts.indexOf(targetElement.dataset.id);

                    if (fromIndex !== -1 && toIndex !== -1) {
                        // Move element in the array
                        const [item] = shortcuts.splice(fromIndex, 1);
                        shortcuts.splice(toIndex, 0, item);
                        renderShortcuts();
                    }
                }
                // Case 2: Adding a new shortcut from the sidebar (only in customization mode)
                else if (isCustomizing && newIdFromSidebar) {
                    if (!shortcuts.includes(newIdFromSidebar) && shortcuts.length < MAX_SHORTCUTS) {
                        const targetElement = e.target.closest('.shortcut-item, .shortcut-placeholder');
                        if (targetElement && targetElement.classList.contains('shortcut-item')) {
                            const toIndex = shortcuts.indexOf(targetElement.dataset.id);
                            shortcuts.splice(toIndex, 0, newIdFromSidebar);
                        } else {
                            shortcuts.push(newIdFromSidebar);
                        }
                        renderShortcuts();
                    }
                }
            });


            // --- Settings Modal Logic ---
            const settingsButton = document.getElementById('settings-button');
            const settingsModal = document.getElementById('settings-modal');
            const closeSettingsModalButton = document.getElementById('close-settings-modal');
            const settingsModalOverlay = document.getElementById('settings-modal-overlay');
            const cancelSettingsButton = document.getElementById('cancel-settings-button');
            const settingsTabs = document.querySelectorAll('.settings-tab');
            const settingsTabContents = document.querySelectorAll('.settings-tab-content');

            if (settingsButton && settingsModal) {
                settingsButton.addEventListener('click', () => {
                    settingsModal.classList.remove('hidden');
                    userMenu.classList.add('hidden'); // Close the user menu
                });
            }

            // Signout functionality
            const signoutButton = document.getElementById('signout-button');
            if (signoutButton) {
                signoutButton.addEventListener('click', () => {
                    // Close the user menu
                    userMenu.classList.add('hidden');
                    
                    // Show confirmation dialog
                    if (confirm('Are you sure you want to sign out?')) {
                        // Clear any stored data (localStorage, sessionStorage, etc.)
                        localStorage.clear();
                        sessionStorage.clear();
                        
                        // Show loading state
                        signoutButton.innerHTML = `
                            <svg class="animate-spin w-4 h-4 text-slate-500 dark:text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span>Signing Out...</span>
                        `;
                        signoutButton.disabled = true;
                        
                        // Simulate signout process
                        setTimeout(() => {
                            // Redirect to homepage/landing page
                            window.location.href = '/landing.html';
                        }, 1500);
                    }
                });
            }

            function closeSettingsModal() {
                if (settingsModal) {
                    settingsModal.classList.add('hidden');
                }
            }

            if (closeSettingsModalButton) closeSettingsModalButton.addEventListener('click', closeSettingsModal);
            if (settingsModalOverlay) settingsModalOverlay.addEventListener('click', closeSettingsModal);
            if (cancelSettingsButton) cancelSettingsButton.addEventListener('click', closeSettingsModal);
            
            // Save Settings Button Handler
            const saveSettingsButton = document.getElementById('save-settings-button');
            if (saveSettingsButton) {
                saveSettingsButton.addEventListener('click', () => {
                    // Save API key if entered
                    if (openaiApiKeyInput && openaiApiKeyInput.value.trim()) {
                        localStorage.setItem('openai_api_key', openaiApiKeyInput.value.trim());
                    }
                    
                    // Show success message
                    if (apiKeyStatus) {
                        apiKeyStatus.textContent = '✓ Settings saved!';
                        apiKeyStatus.className = 'text-sm text-green-500';
                        setTimeout(() => {
                            closeSettingsModal();
                        }, 1000);
                    } else {
                        closeSettingsModal();
                    }
                });
            }

            settingsTabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = tab.dataset.tab;

                    // Update tab styles
                    settingsTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // Update content visibility
                    settingsTabContents.forEach(content => {
                        const contentId = `${tabId}-settings-content`;
                        if (content.id === contentId) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            // --- OpenAI API Key Management ---
            const openaiApiKeyInput = document.getElementById('openai-api-key');
            const toggleVisibilityButton = document.getElementById('toggle-api-key-visibility');
            const testApiKeyButton = document.getElementById('test-api-key-button');
            const apiKeyStatus = document.getElementById('api-key-status');

            // Load saved API key
            if (openaiApiKeyInput) {
                const savedKey = localStorage.getItem('openai_api_key');
                if (savedKey) {
                    openaiApiKeyInput.value = savedKey;
                }
            }

            // Toggle API key visibility
            if (toggleVisibilityButton && openaiApiKeyInput) {
                toggleVisibilityButton.addEventListener('click', () => {
                    const type = openaiApiKeyInput.type === 'password' ? 'text' : 'password';
                    openaiApiKeyInput.type = type;
                    
                    // Update icon
                    const icon = toggleVisibilityButton.querySelector('svg');
                    if (type === 'text') {
                        icon.innerHTML = '<path d="M17.94 18a8.07 8.07 0 0 0 1.16-9.34L21 6l-3 3M9 2L3 8l3 3m8 8l6-6-3-3M2 2l20 20M10 10l4 4m-7-7l3 3"></path>';
                    } else {
                        icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
                    }
                });
            }

            // Auto-save API key as user types
            if (openaiApiKeyInput) {
                openaiApiKeyInput.addEventListener('input', (e) => {
                    const apiKey = e.target.value.trim();
                    if (apiKey && apiKey.startsWith('sk-')) {
                        localStorage.setItem('openai_api_key', apiKey);
                        apiKeyStatus.textContent = '';
                    }
                });
            }

            // Test API key connection
            if (testApiKeyButton && openaiApiKeyInput) {
                testApiKeyButton.addEventListener('click', async () => {
                    const apiKey = openaiApiKeyInput.value.trim();
                    
                    if (!apiKey) {
                        apiKeyStatus.textContent = 'Please enter an API key';
                        apiKeyStatus.className = 'text-sm text-red-500';
                        return;
                    }
                    
                    if (!apiKey.startsWith('sk-')) {
                        apiKeyStatus.textContent = 'Invalid API key format';
                        apiKeyStatus.className = 'text-sm text-red-500';
                        return;
                    }
                    
                    testApiKeyButton.disabled = true;
                    apiKeyStatus.textContent = 'Testing...';
                    apiKeyStatus.className = 'text-sm text-blue-500';
                    
                    try {
                        const response = await fetch('https://api.openai.com/v1/models', {
                            headers: {
                                'Authorization': `Bearer ${apiKey}`
                            }
                        });
                        
                        if (response.ok) {
                            apiKeyStatus.textContent = '✓ API key is valid';
                            apiKeyStatus.className = 'text-sm text-green-500';
                            localStorage.setItem('openai_api_key', apiKey);
                        } else {
                            apiKeyStatus.textContent = '✗ Invalid API key';
                            apiKeyStatus.className = 'text-sm text-red-500';
                        }
                    } catch (error) {
                        apiKeyStatus.textContent = '✗ Connection failed';
                        apiKeyStatus.className = 'text-sm text-red-500';
                    } finally {
                        testApiKeyButton.disabled = false;
                    }
                });
            }

            // --- JSearch API Key Management ---
            const jsearchApiKeyInput = document.getElementById('jsearch-api-key');
            const toggleJsearchVisibilityButton = document.getElementById('toggle-jsearch-api-key-visibility');

            // Load saved JSearch API key
            if (jsearchApiKeyInput) {
                const savedKey = localStorage.getItem('jsearch_api_key');
                if (savedKey) {
                    jsearchApiKeyInput.value = savedKey;
                }
            }

            // Toggle JSearch API key visibility
            if (toggleJsearchVisibilityButton && jsearchApiKeyInput) {
                toggleJsearchVisibilityButton.addEventListener('click', () => {
                    const type = jsearchApiKeyInput.type === 'password' ? 'text' : 'password';
                    jsearchApiKeyInput.type = type;
                    
                    // Update icon
                    const icon = toggleJsearchVisibilityButton.querySelector('svg');
                    if (type === 'text') {
                        icon.innerHTML = '<path d="M17.94 18a8.07 8.07 0 0 0 1.16-9.34L21 6l-3 3M9 2L3 8l3 3m8 8l6-6-3-3M2 2l20 20M10 10l4 4m-7-7l3 3"></path>';
                    } else {
                        icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
                    }
                });
            }

            // Auto-save JSearch API key as user types
            if (jsearchApiKeyInput) {
                jsearchApiKeyInput.addEventListener('input', (e) => {
                    const apiKey = e.target.value.trim();
                    if (apiKey) {
                        localStorage.setItem('jsearch_api_key', apiKey);
                    }
                });
            }

            // --- NEW Chat Widget Logic ---
            const chatWidgetButton = document.getElementById('chat-widget-button');
            const chatWidget = document.getElementById('chat-widget');
            const closeChatWidgetButton = document.getElementById('close-chat-widget');
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const sendChatButton = document.getElementById('send-chat-button');

            // --- Star Generation for Chat Widget ---
            const starsContainer = document.querySelector('#chat-widget #stars-container');
            if (starsContainer) {
                const numberOfStars = 100;
                const sunRadius = 125; // Half of the sun's 250px width/height
                const minStarRadius = sunRadius + 15; // Start stars just outside the sun
                const maxStarRadius = sunRadius + 120; // How far out the stars should go

                for (let i = 0; i < numberOfStars; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    
                    const size = Math.random() * 2 + 1;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;
                    
                    // Random position in a circle around the sun's center
                    const angle = Math.random() * 2 * Math.PI;
                    const radius = Math.random() * (maxStarRadius - minStarRadius) + minStarRadius;
                    const xOffset = radius * Math.cos(angle);
                    const yOffset = radius * Math.sin(angle);
                    
                    star.style.left = `calc(50% + ${xOffset}px)`;
                    star.style.top = `calc(50% + ${yOffset}px)`;
                    
                    star.style.animationDuration = `${Math.random() * 3 + 2}s`;
                    star.style.animationDelay = `${Math.random() * 3}s`;
                    starsContainer.appendChild(star);
                }
            }

            if (chatWidgetButton && chatWidget) {
                chatWidgetButton.addEventListener('click', () => {
                    chatWidget.classList.remove('hidden');
                    chatWidgetButton.classList.add('hidden');
                });
            }

            if (closeChatWidgetButton) {
                closeChatWidgetButton.addEventListener('click', () => {
                    chatWidget.classList.add('hidden');
                    chatWidgetButton.classList.remove('hidden');
                });
            }

            function addMessage(message, type) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${type}-message p-3 rounded-lg`;
                messageDiv.innerHTML = `<p class="text-sm">${message}</p>`;
                chatMessages.appendChild(messageDiv);
                // Auto-scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight; 
            }

            function handleSendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText) {
                    addMessage(messageText, 'user');
                    chatInput.value = '';
                    
                    // Simulate agent reply
                    setTimeout(() => {
                        addMessage("Thanks for your message! An agent will be with you shortly.", 'agent');
                    }, 1000);
                }
            }

            // Initial agent message
            addMessage("Hello! I am Luna.<br>How can I help you today?", 'agent');

            if (sendChatButton) sendChatButton.addEventListener('click', handleSendMessage);
            if (chatInput) chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            });


            renderShortcuts();
        });
    </script>

    <!-- Smart Resume Studio React Component -->
    <script type="text/babel">
        const { useState } = React;

        const SmartResumeStudio = () => {
            const [parsedResume, setParsedResume] = useState(null);
            const [isUploading, setIsUploading] = useState(false);
            const [uploadProgress, setUploadProgress] = useState(0);
            const [error, setError] = useState('');
            const [file, setFile] = useState(null);
            const [isProcessing, setIsProcessing] = useState(false);
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const handleFileChange = (e) => {
                const selectedFile = e.target.files?.[0];
                if (selectedFile) {
                    // Validate file type
                    if (!['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/msword', 'text/plain'].includes(selectedFile.type)) {
                        setError('Please select a PDF, DOCX, or TXT file');
                        return;
                    }
                    
                    // Validate file size (max 5MB)
                    if (selectedFile.size > 5 * 1024 * 1024) {
                        setError('File size must be less than 5MB');
                        return;
                    }
                    
                    setFile(selectedFile);
                    setError('');
                }
            };

            const handleParseResume = async () => {
                if (!file) return;

                setIsProcessing(true);
                setError('');
                setUploadProgress(0);

                try {
                    // Create form data
                    const formData = new FormData();
                    formData.append('file', file);

                    // Get API key
                    const apiKey = localStorage.getItem('openai_api_key');
                    if (!apiKey) {
                        throw new Error('OpenAI API key not found. Please set it in Settings.');
                    }

                    // Read file as text
                    const reader = new FileReader();
                    reader.onload = async (e) => {
                        try {
                            const fileContent = e.target?.result;
                            if (!fileContent) throw new Error('Failed to read file');

                            // Call OpenAI API to parse resume
                            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': `Bearer ${apiKey}`
                                },
                                body: JSON.stringify({
                                    model: 'gpt-4o-mini',
                                    messages: [
                                        {
                                            role: 'user',
                                            content: `Extract structured data from this resume text and return valid JSON only. The JSON should include:
{
  "personalInfo": {
    "name": "Full Name",
    "email": "email@example.com",
    "phone": "+1234567890",
    "location": "City, State",
    "linkedIn": "linkedin.com/in/username",
    "portfolio": "website.com"
  },
  "summary": "Professional summary",
  "skills": {
    "technical": ["skill1", "skill2"],
    "soft": ["communication", "leadership"],
    "languages": ["English", "Spanish"]
  },
  "experience": [{
    "company": "Company Name",
    "position": "Job Title",
    "startDate": "YYYY-MM",
    "endDate": "YYYY-MM or Present",
    "description": "Job description",
    "achievements": ["achievement1", "achievement2"]
  }],
  "education": [{
    "institution": "University Name",
    "degree": "Degree Type",
    "field": "Field of Study",
    "graduationDate": "YYYY-MM"
  }],
  "certifications": [{
    "name": "Certification Name",
    "issuer": "Issuing Organization",
    "date": "YYYY-MM",
    "expiryDate": "YYYY-MM or null"
  }],
  "projects": [{
    "name": "Project Name",
    "description": "Project description",
    "technologies": ["tech1", "tech2"],
    "link": "project-url.com"
  }]
}

Resume text:
${typeof fileContent === 'string' ? fileContent : new TextDecoder().decode(fileContent)}

Return only valid JSON, no additional text:`
                                        }
                                    ],
                                    temperature: 0.3,
                                    max_tokens: 3000
                                })
                            });

                            if (!response.ok) {
                                const errorData = await response.json();
                                throw new Error(errorData.error?.message || 'Failed to parse resume');
                            }

                            const data = await response.json();
                            const content = data.choices[0]?.message?.content;
                            
                            if (!content) {
                                throw new Error('No response from OpenAI');
                            }

                            // Extract JSON from response
                            const jsonMatch = content.match(/\{[\s\S]*\}/);
                            const parsedData = jsonMatch ? JSON.parse(jsonMatch[0]) : JSON.parse(content);

                            // Save to localStorage
                            const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                            savedResumes[file.name] = parsedData;
                            localStorage.setItem('parsed_resumes', JSON.stringify(savedResumes));

                            setParsedResume(parsedData);
                            setUploadProgress(100);
                        } catch (err) {
                            setError(err.message || 'Failed to parse resume');
                        } finally {
                            setIsProcessing(false);
                        }
                    };

                    reader.onerror = () => {
                        setError('Failed to read file');
                        setIsProcessing(false);
                    };

                    reader.readAsText(file);
                } catch (err) {
                    setError(err.message || 'Failed to upload file');
                    setIsProcessing(false);
                }
            };

            const handleDownloadJSON = () => {
                if (!parsedResume) return;
                
                const blob = new Blob([JSON.stringify(parsedResume, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'resume-data.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            return (
                <div className="space-y-6">
                    {/* Upload Section */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                        <h3 className="text-xl font-bold mb-4 text-slate-900">Upload Your Resume</h3>
                        <p className="text-slate-600 mb-6">Upload your resume in PDF, DOCX, or TXT format to extract structured data</p>
                        
                        <div className="space-y-4">
                            <label className={`block ${isLightMode ? 'border-gray-300' : 'border-gray-600'} border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors`}>
                                <input
                                    type="file"
                                    onChange={handleFileChange}
                                    accept=".pdf,.docx,.doc,.txt"
                                    className="hidden"
                                />
                                <svg className="mx-auto h-12 w-12 text-slate-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m7-4h.01M20 33l4 4"/>
                                </svg>
                                <span className="block mt-2 text-sm font-medium text-slate-700">
                                    Click to upload or drag and drop
                                </span>
                                <span className="block mt-1 text-xs text-slate-500">
                                    PDF, DOCX, or TXT (MAX. 5MB)
                                </span>
                            </label>

                            {file && (
                                <div className={`p-4 rounded-lg ${isLightMode ? 'bg-indigo-50' : 'bg-indigo-900/20'}`}>
                                    <div className="flex items-center justify-between">
                                        <div className="flex items-center space-x-3">
                                            <svg className="h-6 w-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                            <div>
                                                <p className="text-sm font-medium text-slate-900">{file.name}</p>
                                                <p className="text-xs text-slate-600">{(file.size / 1024).toFixed(2)} KB</p>
                                            </div>
                                        </div>
                                        <button
                                            onClick={() => setFile(null)}
                                            className="text-red-600 hover:text-red-800"
                                        >
                                            <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            )}

                            {error && (
                                <div className="p-4 bg-red-50 border border-red-200 rounded-lg">
                                    <p className="text-sm text-red-800">{error}</p>
                                </div>
                            )}

                            {isProcessing && (
                                <div className="space-y-2">
                                    <div className="w-full bg-gray-200 rounded-full h-2.5">
                                        <div className="bg-indigo-600 h-2.5 rounded-full" style={{ width: `${uploadProgress}%` }}></div>
                                    </div>
                                    <p className="text-sm text-slate-600 text-center">Processing resume... This may take a moment.</p>
                                </div>
                            )}

                            <button
                                onClick={handleParseResume}
                                disabled={!file || isProcessing}
                                className={`w-full py-3 px-4 rounded-lg font-medium transition-colors ${
                                    file && !isProcessing 
                                        ? 'bg-indigo-600 text-white hover:bg-indigo-700' 
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`}
                            >
                                {isProcessing ? 'Processing...' : 'Parse Resume'}
                            </button>
                        </div>
                    </div>

                    {/* Parsed Resume Display */}
                    {parsedResume && (
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                            <div className="flex items-center justify-between mb-6">
                                <h3 className="text-xl font-bold text-slate-900">Parsed Resume Data</h3>
                                <button
                                    onClick={handleDownloadJSON}
                                    className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium"
                                >
                                    Download JSON
                                </button>
                            </div>

                            <div className="space-y-6">
                                {/* Personal Info */}
                                {parsedResume.personalInfo && (
                                    <div>
                                        <h4 className="text-lg font-semibold text-slate-900 mb-3">Personal Information</h4>
                                        <div className={`grid grid-cols-2 gap-4 ${isLightMode ? 'bg-gray-50' : 'bg-gray-800/50'} p-4 rounded-lg`}>
                                            <div>
                                                <p className="text-sm text-slate-600">Name</p>
                                                <p className="text-slate-900 font-medium">{parsedResume.personalInfo.name || 'N/A'}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-slate-600">Email</p>
                                                <p className="text-slate-900 font-medium">{parsedResume.personalInfo.email || 'N/A'}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-slate-600">Phone</p>
                                                <p className="text-slate-900 font-medium">{parsedResume.personalInfo.phone || 'N/A'}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-slate-600">Location</p>
                                                <p className="text-slate-900 font-medium">{parsedResume.personalInfo.location || 'N/A'}</p>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Skills */}
                                {parsedResume.skills && (
                                    <div>
                                        <h4 className="text-lg font-semibold text-slate-900 mb-3">Skills</h4>
                                        <div className={`${isLightMode ? 'bg-gray-50' : 'bg-gray-800/50'} p-4 rounded-lg`}>
                                            {parsedResume.skills.technical && parsedResume.skills.technical.length > 0 && (
                                                <div className="mb-3">
                                                    <p className="text-sm text-slate-600 mb-2">Technical Skills</p>
                                                    <div className="flex flex-wrap gap-2">
                                                        {parsedResume.skills.technical.map((skill, index) => (
                                                            <span key={index} className="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">
                                                                {skill}
                                                            </span>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                            {parsedResume.skills.soft && parsedResume.skills.soft.length > 0 && (
                                                <div>
                                                    <p className="text-sm text-slate-600 mb-2">Soft Skills</p>
                                                    <div className="flex flex-wrap gap-2">
                                                        {parsedResume.skills.soft.map((skill, index) => (
                                                            <span key={index} className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                                                                {skill}
                                                            </span>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {/* Experience */}
                                {parsedResume.experience && parsedResume.experience.length > 0 && (
                                    <div>
                                        <h4 className="text-lg font-semibold text-slate-900 mb-3">Work Experience</h4>
                                        <div className="space-y-4">
                                            {parsedResume.experience.map((exp, index) => (
                                                <div key={index} className={`${isLightMode ? 'bg-gray-50' : 'bg-gray-800/50'} p-4 rounded-lg`}>
                                                    <div className="flex items-start justify-between mb-2">
                                                        <div>
                                                            <h5 className="font-semibold text-slate-900">{exp.position}</h5>
                                                            <p className="text-slate-600">{exp.company}</p>
                                                        </div>
                                                        <span className="text-sm text-slate-600">
                                                            {exp.startDate} - {exp.endDate}
                                                        </span>
                                                    </div>
                                                    <p className="text-sm text-slate-700">{exp.description}</p>
                                                    {exp.achievements && exp.achievements.length > 0 && (
                                                        <ul className="mt-2 space-y-1">
                                                            {exp.achievements.map((achievement, i) => (
                                                                <li key={i} className="text-sm text-slate-600 flex items-start">
                                                                    <span className="mr-2">•</span>
                                                                    <span>{achievement}</span>
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Smart Resume Studio when resume-studio-content is shown
        window.renderSmartResumeStudio = function() {
            const container = document.getElementById('resume-studio-container');
            
            if (container) {
                try {
                    const root = ReactDOM.createRoot(container);
                    root.render(<SmartResumeStudio />);
                } catch (error) {
                    console.error('Error rendering Smart Resume Studio:', error);
                }
            }
        };
    </script>

    <!-- Application Tailor React Component -->
    <script type="text/babel">
        const { useState } = React;

        const ApplicationTailor = () => {
            const [step, setStep] = useState('upload');
            const [resumeFile, setResumeFile] = useState(null);
            const [resumeContent, setResumeContent] = useState('');
            const [jobDescription, setJobDescription] = useState('');
            const [companyUrl, setCompanyUrl] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [uploadError, setUploadError] = useState('');
            const [analysisError, setAnalysisError] = useState('');
            const [tailoredResume, setTailoredResume] = useState('');
            const [matchScores, setMatchScores] = useState({
                overall: 94,
                keywordAlignment: 92,
                skillMatching: 88,
                experienceRelevance: 95,
                atsCompatibility: 98
            });
            const [optimizations, setOptimizations] = useState([]);
            const [isFetchingUrl, setIsFetchingUrl] = useState(false);
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            // Function to fetch job description from URL
            const handleFetchJobDescription = async () => {
                if (!companyUrl.trim()) {
                    alert('Please enter a URL first');
                    return;
                }

                // Validate URL
                try {
                    new URL(companyUrl);
                } catch (error) {
                    alert('Please enter a valid URL');
                    return;
                }

                setIsFetchingUrl(true);
                const apiKey = localStorage.getItem('openai_api_key');
                
                if (!apiKey) {
                    alert('OpenAI API key not found. Please set it in Settings > Integrations.');
                    setIsFetchingUrl(false);
                    return;
                }

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a web scraper. Extract the full job description from web pages, including job title, requirements, responsibilities, qualifications, and company information. Return the complete job posting text.'
                                },
                                {
                                    role: 'user',
                                    content: `Please fetch and extract the complete job description from this URL: ${companyUrl}

Extract:
- Job title
- Company name
- Full job description
- Requirements/qualifications
- Responsibilities
- Any other relevant details

Return the complete job posting text in a clear, readable format. If you cannot access the URL, explain why and provide guidance.`
                                }
                            ],
                            temperature: 0.3,
                            max_tokens: 4000
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to fetch job description');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (content) {
                        setJobDescription(content);
                        alert('✅ Job description fetched successfully!');
                    } else {
                        throw new Error('No content extracted from URL');
                    }
                } catch (error) {
                    console.error('Error fetching job description:', error);
                    alert(error.message || 'Failed to fetch job description. Please paste it manually.');
                } finally {
                    setIsFetchingUrl(false);
                }
            };

            const handleFileUpload = (event) => {
                const file = event.target.files?.[0];
                if (file) {
                    const allowedTypes = [
                        'application/pdf',
                        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                        'application/msword',
                        'text/plain'
                    ];
                    
                    if (!allowedTypes.includes(file.type)) {
                        setUploadError('Please select a valid file type (PDF, DOCX, or TXT)');
                        return;
                    }
                    
                    if (file.size > 10 * 1024 * 1024) {
                        setUploadError('File size must be less than 10MB');
                        return;
                    }
                    
                    setResumeFile(file);
                    setUploadError('');
                    
                    // Read file content
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setResumeContent(e.target.result);
                    };
                    reader.readAsText(file);
                    
                    setStep('job-input');
                }
            };

            const handleAnalysis = async () => {
                if (!jobDescription.trim()) return;
                
                setIsProcessing(true);
                setAnalysisError('');
                setStep('analysis');
                
                try {
                    // Get API key
                    const apiKey = localStorage.getItem('openai_api_key');
                    if (!apiKey) {
                        throw new Error('OpenAI API key not found. Please set it in Settings.');
                    }

                    // Call OpenAI to analyze and tailor the resume
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are an expert resume writer and career coach. You help job seekers tailor their resumes to specific job postings by analyzing requirements, identifying matching skills and experiences, and optimizing content for ATS (Applicant Tracking Systems).'
                                },
                                {
                                    role: 'user',
                                    content: `Analyze this resume and tailor it to match the following job description.

RESUME CONTENT:
${resumeContent}

JOB DESCRIPTION:
${jobDescription}

TASK:
1. Analyze the job requirements and identify key keywords, skills, and qualifications needed
2. Review the resume to identify matching and missing elements
3. Create a tailored version of the resume that:
   - Naturally integrates relevant keywords from the job description
   - Emphasizes matching skills and experiences
   - Reorders/prioritizes relevant work experience
   - Optimizes for ATS compatibility
   - Maintains authenticity and avoids keyword stuffing

4. Calculate match scores in these categories (as percentages):
   - Overall Job Match Score
   - Keyword Alignment
   - Skill Matching
   - Experience Relevance
   - ATS Compatibility

5. List key optimizations made

Return your response in the following JSON format:
{
  "tailoredResume": "The optimized resume content...",
  "matchScores": {
    "overall": 94,
    "keywordAlignment": 92,
    "skillMatching": 88,
    "experienceRelevance": 95,
    "atsCompatibility": 98
  },
  "optimizations": [
    {
      "category": "Keywords Added",
      "description": "12 relevant keywords integrated naturally"
    },
    {
      "category": "Skills Emphasized",
      "description": "Highlighted matching technical skills"
    }
  ]
}`
                                }
                            ],
                            temperature: 0.5,
                            max_tokens: 3000
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to analyze resume');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (!content) {
                        throw new Error('No response from OpenAI');
                    }

                    // Extract JSON from response
                    const jsonMatch = content.match(/\{[\s\S]*\}/);
                    if (!jsonMatch) {
                        throw new Error('Invalid response format');
                    }

                    const result = JSON.parse(jsonMatch[0]);
                    
                    setTailoredResume(result.tailoredResume || '');
                    setMatchScores(result.matchScores || matchScores);
                    setOptimizations(result.optimizations || []);
                    
                    // Save to localStorage for later use
                    const analysisResult = {
                        tailoredResume: result.tailoredResume,
                        matchScores: result.matchScores,
                        optimizations: result.optimizations,
                        jobDescription: jobDescription,
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem('last_resume_analysis', JSON.stringify(analysisResult));
                    
                    setStep('results');
                } catch (error) {
                    console.error('Error during analysis:', error);
                    setAnalysisError(error.message || 'Failed to analyze resume. Please try again.');
                    setStep('job-input');
                } finally {
                    setIsProcessing(false);
                }
            };

            const handleDownload = () => {
                if (!tailoredResume) return;
                
                const blob = new Blob([tailoredResume], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `tailored-resume-${new Date().getTime()}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            return (
                <div className="space-y-8">
                    {/* Progress Indicator */}
                    <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div className="flex items-center justify-between mb-4">
                            <span className="text-sm font-semibold text-slate-800">Progress</span>
                            <span className="text-sm text-slate-600">
                                Step {step === 'upload' ? 1 : step === 'job-input' ? 2 : step === 'analysis' ? 3 : 4} of 4
                            </span>
                        </div>
                        <div className="w-full bg-slate-200 rounded-full h-3">
                            <div 
                                className="bg-gradient-to-r from-indigo-500 to-purple-600 h-3 rounded-full transition-all duration-500 shadow-lg"
                                style={{ 
                                    width: step === 'upload' ? '25%' : 
                                           step === 'job-input' ? '50%' : 
                                           step === 'analysis' ? '75%' : '100%' 
                                }}
                            ></div>
                        </div>
                    </div>

                    {/* Step 1: Resume Upload */}
                    {step === 'upload' && (
                        <div className="max-w-2xl mx-auto">
                            <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                <h3 className="text-2xl font-bold text-slate-800 mb-6 text-center">Upload Your Resume</h3>
                                
                                <div className="border-2 border-dashed border-slate-300 rounded-2xl p-12 text-center hover:border-indigo-500/50 transition-colors">
                                    <input
                                        type="file"
                                        accept=".pdf,.docx,.doc"
                                        onChange={handleFileUpload}
                                        className="hidden"
                                        id="resume-upload"
                                    />
                                    
                                    <div className="flex flex-col items-center gap-6">
                                        <div className="w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
                                            <div className="w-10 h-10 text-white text-2xl">📤</div>
                                        </div>
                                        
                                        <div>
                                            <h4 className="text-xl font-semibold text-slate-800 mb-3">
                                                {resumeFile ? resumeFile.name : 'Choose your resume file'}
                                            </h4>
                                            <p className="text-slate-600">
                                                {resumeFile ? 
                                                    `${(resumeFile.size / 1024 / 1024).toFixed(2)} MB • Ready to proceed` :
                                                    'PDF or DOCX format (Max 10MB)'
                                                }
                                            </p>
                                        </div>
                                        
                                        <label
                                            htmlFor="resume-upload"
                                            className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold cursor-pointer transition-all duration-300 hover:from-indigo-600 hover:to-purple-700 hover:transform hover:scale-105"
                                        >
                                            {resumeFile ? 'Change File' : 'Select File'}
                                        </label>
                                    </div>
                                </div>

                                {uploadError && (
                                    <div className="mt-6 bg-red-50 border border-red-200 rounded-2xl p-4">
                                        <div className="flex items-center gap-3">
                                            <div className="w-5 h-5 text-red-600">⚠️</div>
                                            <p className="text-red-700 font-medium">{uploadError}</p>
                                        </div>
                                    </div>
                                )}

                                {resumeFile && (
                                    <div className="mt-6 text-center">
                                        <button
                                            onClick={() => setStep('job-input')}
                                            className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-300 hover:from-indigo-600 hover:to-purple-700 hover:transform hover:scale-105"
                                        >
                                            Continue to Job Details
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Step 2: Job Input */}
                    {step === 'job-input' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h3 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6 flex items-center gap-3`}>
                                        <div className="w-6 h-6 text-indigo-500">🏢</div>
                                        Company Information
                                    </h3>
                                    
                                    <div>
                                        <label className={`block text-sm font-semibold ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-3`}>
                                            Company Website or Job Posting URL (Optional)
                                        </label>
                                        <div className="flex gap-2">
                                            <input
                                                type="url"
                                                value={companyUrl}
                                                onChange={(e) => setCompanyUrl(e.target.value)}
                                                placeholder="https://company.com or job posting URL"
                                                className={`flex-1 px-4 py-3 ${isLightMode ? 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all duration-300`}
                                            />
                                            <button
                                                onClick={handleFetchJobDescription}
                                                disabled={!companyUrl.trim() || isFetchingUrl}
                                                className={`px-6 py-3 rounded-xl font-medium transition-all duration-300 whitespace-nowrap ${
                                                    companyUrl.trim() && !isFetchingUrl 
                                                        ? 'bg-indigo-600 text-white hover:bg-indigo-700' 
                                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                }`}
                                            >
                                                {isFetchingUrl ? '⏳ Fetching...' : '🔍 Fetch Job'}
                                            </button>
                                        </div>
                                        <p className={`text-xs ${isLightMode ? 'text-gray-600' : 'text-gray-400'} mt-2`}>
                                            {isFetchingUrl ? 'Fetching job description from URL...' : 'Paste URL and click "Fetch Job" to automatically extract job description'}
                                        </p>
                                    </div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h3 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6 flex items-center gap-3`}>
                                        <div className="w-6 h-6 text-purple-500">📄</div>
                                        Job Description
                                    </h3>
                                    
                                    <div>
                                        <label className={`block text-sm font-semibold ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-3`}>
                                            Complete Job Posting
                                        </label>
                                        <textarea
                                            value={jobDescription}
                                            onChange={(e) => setJobDescription(e.target.value)}
                                            placeholder="Paste the complete job description here..."
                                            rows={12}
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none resize-none transition-all duration-300`}
                                        />
                                        <div className="flex items-center justify-between mt-3">
                                            <p className={`text-xs ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                                Include job title, requirements, responsibilities, and company information
                                            </p>
                                            <span className={`text-xs ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                                {jobDescription.length} characters
                                            </span>
                                        </div>
                                    </div>

                                    <button
                                        onClick={handleAnalysis}
                                        disabled={!jobDescription.trim() || isProcessing}
                                        className="w-full mt-6 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-300 hover:from-indigo-600 hover:to-purple-700 hover:transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                                    >
                                        {isProcessing ? (
                                            <>
                                                <div className="w-5 h-5 animate-spin">⟳</div>
                                                Analyzing...
                                            </>
                                        ) : (
                                            <>
                                                <div className="w-5 h-5">✨</div>
                                                Analyze & Tailor Resume
                                            </>
                                        )}
                                    </button>

                                    {analysisError && (
                                        <div className="mt-4 bg-red-50 border border-red-200 rounded-xl p-4">
                                            <div className="flex items-center gap-3">
                                                <div className="w-5 h-5 text-red-600">⚠️</div>
                                                <p className="text-red-700 font-medium">{analysisError}</p>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Resume Summary</h3>
                                    <div className="space-y-4">
                                        <div className="flex items-center gap-3">
                                            <div className="w-5 h-5 text-green-500">✅</div>
                                            <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'} text-sm`}>Resume uploaded successfully</span>
                                        </div>
                                        <div className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                            <strong className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>File:</strong> {resumeFile?.name}
                                        </div>
                                        <div className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                            <strong className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>Size:</strong> {resumeFile ? (resumeFile.size / 1024 / 1024).toFixed(2) : '0'} MB
                                        </div>
                                    </div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Tips for Best Results</h3>
                                    <div className="space-y-4 text-sm">
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Include the complete job posting for better analysis</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Company URL helps personalize the application</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>More details = better customization</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 3: Analysis */}
                    {step === 'analysis' && (
                        <div className="max-w-3xl mx-auto text-center">
                            <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-12`}>
                                <div className="w-24 h-24 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-8 shadow-lg">
                                    <div className="w-12 h-12 text-white text-4xl animate-pulse">✨</div>
                                </div>
                                <h3 className={`text-3xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Analyzing Job Requirements</h3>
                                <p className={`text-lg ${isLightMode ? 'text-gray-600' : 'text-gray-400'} mb-8`}>Our AI is analyzing the job posting and tailoring your resume...</p>
                                
                                <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-800'} rounded-full h-4 mb-6`}>
                                    <div className="bg-gradient-to-r from-indigo-500 to-purple-600 h-4 rounded-full transition-all duration-1000 shadow-lg animate-pulse" style={{ width: '75%' }}></div>
                                </div>
                                
                                <div className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-2xl p-6`}>
                                    <h4 className={`text-sm font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-3`}>Processing Steps</h4>
                                    <div className={`space-y-2 text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                        <div className="flex items-center gap-2">
                                            <div className="w-4 h-4 text-green-500">✅</div>
                                            <span>Extracting job requirements</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-4 h-4 text-green-500">✅</div>
                                            <span>Analyzing skill matches</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-4 h-4 text-indigo-500 animate-spin">⟳</div>
                                            <span>Optimizing content alignment</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className={`w-4 h-4 border-2 ${isLightMode ? 'border-gray-300' : 'border-gray-600'} rounded-full`}></div>
                                            <span>Generating tailored resume</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 4: Results */}
                    {step === 'results' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2">
                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <h3 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} flex items-center gap-3`}>
                                            <div className="w-6 h-6 text-indigo-500">✨</div>
                                            Your Tailored Resume
                                        </h3>
                                        <div className="flex gap-3">
                                            <button className={`${isLightMode ? 'bg-gray-100 text-gray-700 hover:bg-gray-200' : 'bg-gray-700 text-gray-50 hover:bg-gray-600'} px-4 py-2 rounded-xl font-medium flex items-center gap-2 transition-colors`}>
                                                <div className="w-4 h-4">👁️</div>
                                                Preview
                                            </button>
                                            <button onClick={handleDownload} className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-xl font-medium flex items-center gap-2 hover:from-indigo-600 hover:to-purple-700 transition-colors">
                                                <div className="w-4 h-4">⬇️</div>
                                                Download
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-2xl p-6`}>
                                        {tailoredResume ? (
                                            <div className="space-y-6">
                                                <div className={`bg-white ${isLightMode ? 'text-gray-900' : 'bg-gray-900 text-gray-50'} p-8 rounded-xl whitespace-pre-wrap font-mono text-sm`}>
                                                    {tailoredResume}
                                                </div>
                                            </div>
                                        ) : (
                                            <div className="text-center py-20">
                                                <div className={`w-16 h-16 ${isLightMode ? 'text-gray-400' : 'text-gray-400'} mx-auto mb-4 text-6xl`}>📄</div>
                                                <h4 className={`text-xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Tailored Resume Ready</h4>
                                                <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Your resume has been optimized for this specific job posting</p>
                                            </div>
                                        )}
                                    </div>
                                    
                                    {analysisError && (
                                        <div className="mt-6 bg-red-50 border border-red-200 rounded-2xl p-4">
                                            <div className="flex items-center gap-3">
                                                <div className="w-5 h-5 text-red-600">⚠️</div>
                                                <p className="text-red-700 font-medium">{analysisError}</p>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Tailoring Results</h3>
                                    <div className="space-y-4">
                                        <div className="text-center">
                                            <div className="text-4xl font-bold text-green-500 mb-2">{matchScores.overall}%</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>Job Match Score</div>
                                        </div>
                                        
                                        <div className="space-y-3 text-sm">
                                            <div className="flex justify-between">
                                                <span className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>Keyword Alignment</span>
                                                <span className="text-green-500 font-semibold">{matchScores.keywordAlignment}%</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>Skill Matching</span>
                                                <span className="text-green-500 font-semibold">{matchScores.skillMatching}%</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>Experience Relevance</span>
                                                <span className="text-green-500 font-semibold">{matchScores.experienceRelevance}%</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className={isLightMode ? 'text-gray-900' : 'text-gray-50'}>ATS Compatibility</span>
                                                <span className="text-green-500 font-semibold">{matchScores.atsCompatibility}%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Key Optimizations</h3>
                                    <div className="space-y-3">
                                        {optimizations.length > 0 ? (
                                            optimizations.map((opt, index) => (
                                                <div key={index} className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-xl p-3`}>
                                                    <h4 className="text-green-500 text-sm font-semibold mb-1">{opt.category}</h4>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-400'} text-sm`}>{opt.description}</p>
                                                </div>
                                            ))
                                        ) : (
                                            <>
                                                <div className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-xl p-3`}>
                                                    <h4 className="text-green-500 text-sm font-semibold mb-1">Keywords Added</h4>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-400'} text-sm`}>12 relevant keywords integrated naturally</p>
                                                </div>
                                                
                                                <div className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-xl p-3`}>
                                                    <h4 className="text-blue-500 text-sm font-semibold mb-1">Skills Emphasized</h4>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-400'} text-sm`}>Highlighted matching technical skills</p>
                                                </div>
                                                
                                                <div className={`${isLightMode ? 'bg-gray-50 border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-xl p-3`}>
                                                    <h4 className="text-purple-500 text-sm font-semibold mb-1">Experience Reordered</h4>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-400'} text-sm`}>Most relevant experience prioritized</p>
                                                </div>
                                            </>
                                        )}
                                    </div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Actions</h3>
                                    <div className="space-y-2">
                                        <button
                                            onClick={() => setStep('job-input')}
                                            className={`w-full text-left p-3 ${isLightMode ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100' : 'text-gray-400 hover:text-gray-50 hover:bg-gray-800'} rounded-xl transition-colors`}
                                        >
                                            Edit job description
                                        </button>
                                        <button
                                            onClick={() => setStep('upload')}
                                            className={`w-full text-left p-3 ${isLightMode ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100' : 'text-gray-400 hover:text-gray-50 hover:bg-gray-800'} rounded-xl transition-colors`}
                                        >
                                            Use different resume
                                        </button>
                                        <button className={`w-full text-left p-3 ${isLightMode ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100' : 'text-gray-400 hover:text-gray-50 hover:bg-gray-800'} rounded-xl transition-colors`}>
                                            Generate cover letter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Application Tailor when app-tailor-content is shown
        window.renderApplicationTailor = function() {
            console.log('renderApplicationTailor called');
            const container = document.getElementById('app-tailor-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Application Tailor...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<ApplicationTailor />);
                    console.log('Application Tailor rendered successfully');
                } catch (error) {
                    console.error('Error rendering Application Tailor:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Application Tailor</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('app-tailor-container not found');
            }
        };

        // Add event listener for when app-tailor content is shown
        document.addEventListener('DOMContentLoaded', function() {
            // Render Application Tailor immediately when DOM is ready
            setTimeout(() => {
                const appTailorContent = document.getElementById('app-tailor-content');
                if (appTailorContent && !appTailorContent.classList.contains('hidden')) {
                    console.log('Application Tailor content is visible, rendering...');
                    window.renderApplicationTailor();
                }
            }, 100);

            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const appTailorContent = document.getElementById('app-tailor-content');
                        if (appTailorContent && !appTailorContent.classList.contains('hidden')) {
                            console.log('Application Tailor content became visible, rendering...');
                            window.renderApplicationTailor();
                        }
                    }
                });
            });

            const appTailorContent = document.getElementById('app-tailor-content');
            if (appTailorContent) {
                observer.observe(appTailorContent, { attributes: true, attributeFilter: ['class'] });
            }
        });

        // Cover Letter Generator React Component
        const CoverLetterGenerator = () => {
            const [step, setStep] = useState('upload');
            const [cvFile, setCvFile] = useState(null);
            const [cvContent, setCvContent] = useState('');
            const [companyUrl, setCompanyUrl] = useState('');
            const [jobDescription, setJobDescription] = useState('');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [isGenerating, setIsGenerating] = useState(false);
            const [analysisData, setAnalysisData] = useState(null);
            const [generatedCoverLetter, setGeneratedCoverLetter] = useState('');
            const [editedCoverLetter, setEditedCoverLetter] = useState('');
            const [uploadError, setUploadError] = useState('');
            const [showPreview, setShowPreview] = useState(false);
            const [isFetchingUrl, setIsFetchingUrl] = useState(false);

            // Function to fetch job description from URL
            const handleFetchJobDescription = async () => {
                if (!companyUrl.trim()) {
                    alert('Please enter a URL first');
                    return;
                }

                // Validate URL
                try {
                    new URL(companyUrl);
                } catch (error) {
                    alert('Please enter a valid URL');
                    return;
                }

                setIsFetchingUrl(true);
                const apiKey = localStorage.getItem('openai_api_key');
                
                if (!apiKey) {
                    alert('OpenAI API key not found. Please set it in Settings > Integrations.');
                    setIsFetchingUrl(false);
                    return;
                }

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a web scraper. Extract the full job description from web pages, including job title, requirements, responsibilities, qualifications, and company information. Return the complete job posting text.'
                                },
                                {
                                    role: 'user',
                                    content: `Please fetch and extract the complete job description from this URL: ${companyUrl}

Extract:
- Job title
- Company name
- Full job description
- Requirements/qualifications
- Responsibilities
- Any other relevant details

Return the complete job posting text in a clear, readable format. If you cannot access the URL, explain why and provide guidance.`
                                }
                            ],
                            temperature: 0.3,
                            max_tokens: 4000
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to fetch job description');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (content) {
                        setJobDescription(content);
                        alert('✅ Job description fetched successfully!');
                    } else {
                        throw new Error('No content extracted from URL');
                    }
                } catch (error) {
                    console.error('Error fetching job description:', error);
                    alert(error.message || 'Failed to fetch job description. Please paste it manually.');
                } finally {
                    setIsFetchingUrl(false);
                }
            };

            const handleFileUpload = (event) => {
                const file = event.target.files?.[0];
                if (file) {
                    const allowedTypes = [
                        'application/pdf',
                        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                        'application/msword',
                        'text/plain'
                    ];
                    
                    if (!allowedTypes.includes(file.type)) {
                        setUploadError('Please select a valid file type (PDF, DOCX, DOC, or TXT)');
                        return;
                    }
                    
                    if (file.size > 10 * 1024 * 1024) {
                        setUploadError('File size must be less than 10MB');
                        return;
                    }
                    
                    setCvFile(file);
                    setUploadError('');
                    
                    // Read file content
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setCvContent(e.target.result);
                    };
                    reader.readAsText(file);
                    
                    setStep('input');
                }
            };

            const handleAnalysis = async () => {
                if (!jobDescription.trim()) return;
                
                setIsAnalyzing(true);
                setStep('generate');
                
                try {
                    // Get API key
                    const apiKey = localStorage.getItem('openai_api_key');
                    if (!apiKey) {
                        throw new Error('OpenAI API key not found. Please set it in Settings > Integrations.');
                    }

                    // Call OpenAI to analyze the resume and job description
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a career advisor who analyzes resumes and job postings to identify matches and gaps. Provide structured analysis data in JSON format.'
                                },
                                {
                                    role: 'user',
                                    content: `Analyze this resume and job description to prepare for generating a tailored cover letter.

RESUME/CV CONTENT:
${cvContent}

JOB DESCRIPTION:
${jobDescription}

COMPANY INFORMATION:
${companyUrl || 'Not provided'}

TASK:
Analyze and extract key information to help write a targeted cover letter.

Return your analysis in the following JSON format:
{
  "jobTitle": "Extracted job title from the job description",
  "keyRequirements": ["List", "of", "key", "requirements", "and", "skills", "from", "job", "description"],
  "matchingSkills": ["List", "of", "skills", "from", "resume", "that", "match", "the", "job"],
  "gaps": ["Skills", "or", "requirements", "from", "job", "that", "are", "missing", "in", "resume"],
  "companyInfo": "Company name and brief description if available"
}

Return only valid JSON, no additional text:`
                                }
                            ],
                            temperature: 0.3,
                            max_tokens: 1000
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to analyze documents');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (!content) {
                        throw new Error('No response from OpenAI');
                    }

                    // Extract JSON from response
                    const jsonMatch = content.match(/\{[\s\S]*\}/);
                    if (!jsonMatch) {
                        throw new Error('Invalid response format');
                    }

                    const analysis = JSON.parse(jsonMatch[0]);
                    setAnalysisData(analysis);
                } catch (error) {
                    console.error('Error during analysis:', error);
                    alert(error.message || 'Failed to analyze documents. Using basic information.');
                    
                    // Fallback to basic mock data
                    setAnalysisData({
                        cvContent: cvContent,
                        jobDescription: jobDescription,
                        companyInfo: companyUrl || 'Company Information',
                        jobTitle: 'Position',
                        keyRequirements: [],
                        matchingSkills: [],
                        gaps: []
                    });
                } finally {
                    setIsAnalyzing(false);
                }
            };

            const handleGenerate = async () => {
                setIsGenerating(true);
                
                try {
                    // Get API key
                    const apiKey = localStorage.getItem('openai_api_key');
                    if (!apiKey) {
                        throw new Error('OpenAI API key not found. Please set it in Settings > Integrations.');
                    }

                    // Call OpenAI to generate cover letter
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are an expert cover letter writer. You create compelling, professional cover letters that are tailored to specific job postings. Your cover letters are concise, engaging, and highlight the most relevant qualifications.'
                                },
                                {
                                    role: 'user',
                                    content: `Write a professional cover letter based on this resume and job description.

RESUME/CV CONTENT:
${cvContent}

JOB DESCRIPTION:
${jobDescription}

COMPANY INFORMATION:
${companyUrl || 'Not provided'}

INSTRUCTIONS:
1. Write a compelling cover letter that:
   - Demonstrates understanding of the job requirements
   - Highlights relevant experience and skills from the resume
   - Shows enthusiasm for the position
   - Incorporates specific details from the job description
   - Is professional, concise (3-4 paragraphs), and engaging
   - Addresses the hiring manager professionally

2. Format:
   - Use proper business letter format
   - Start with "Dear Hiring Manager," (or specific name if company name is provided)
   - Include 3-4 body paragraphs
   - End with "Best regards," or "Sincerely," followed by [Your Name]

3. Make it specific to the job posting and company, not generic.

Return only the cover letter text, no additional explanation:`
                                }
                            ],
                            temperature: 0.7,
                            max_tokens: 800
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to generate cover letter');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (!content) {
                        throw new Error('No response from OpenAI');
                    }
                    
                    setGeneratedCoverLetter(content);
                    setEditedCoverLetter(content);
                    setStep('edit');
                } catch (error) {
                    console.error('Error generating cover letter:', error);
                    alert(error.message || 'Failed to generate cover letter. Please try again.');
                } finally {
                    setIsGenerating(false);
                }
            };

            const handleCopy = async () => {
                try {
                    await navigator.clipboard.writeText(editedCoverLetter);
                    alert('Cover letter copied to clipboard!');
                } catch (error) {
                    console.error('Failed to copy:', error);
                }
            };

            const handleDownload = () => {
                const element = document.createElement('a');
                const file = new Blob([editedCoverLetter], { type: 'text/plain' });
                element.href = URL.createObjectURL(file);
                element.download = 'cover-letter.txt';
                document.body.appendChild(element);
                element.click();
                document.body.removeChild(element);
            };

            const handleReset = () => {
                setStep('upload');
                setCvFile(null);
                setCvContent('');
                setCompanyUrl('');
                setJobDescription('');
                setAnalysisData(null);
                setGeneratedCoverLetter('');
                setEditedCoverLetter('');
                setUploadError('');
            };

            return (
                <div className="space-y-8">

                    {/* Progress Indicator */}
                    <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div className="flex items-center justify-between mb-4">
                            <span className="text-sm font-semibold text-slate-800">Progress</span>
                            <span className="text-sm text-slate-600">
                                Step {step === 'upload' ? 1 : step === 'input' ? 2 : step === 'generate' ? 3 : 4} of 4
                            </span>
                        </div>
                        <div className="w-full bg-slate-200 rounded-full h-3">
                            <div 
                                className="bg-gradient-to-r from-emerald-500 to-teal-500 h-3 rounded-full transition-all duration-500 shadow-lg"
                                style={{ 
                                    width: step === 'upload' ? '25%' : 
                                           step === 'input' ? '50%' : 
                                           step === 'generate' ? '75%' : '100%' 
                                }}
                            ></div>
                        </div>
                    </div>

                    {/* Step 1: CV Upload */}
                    {step === 'upload' && (
                        <div className="max-w-2xl mx-auto">
                            <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                <h3 className="text-2xl font-bold text-slate-800 mb-6 text-center">Upload Your CV</h3>
                                
                                <div className="border-2 border-dashed border-slate-300 rounded-2xl p-12 text-center hover:border-emerald-500/50 transition-colors">
                                    <input
                                        type="file"
                                        accept=".pdf,.docx,.doc,.txt"
                                        onChange={handleFileUpload}
                                        className="hidden"
                                        id="cv-upload"
                                    />
                                    
                                    <div className="flex flex-col items-center gap-6">
                                        <div className="w-20 h-20 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg">
                                            <div className="w-10 h-10 text-white text-2xl">📤</div>
                                        </div>
                                        
                                        <div>
                                            <h4 className="text-xl font-semibold text-slate-800 mb-3">
                                                {cvFile ? cvFile.name : 'Choose your CV file'}
                                            </h4>
                                            <p className="text-slate-600">
                                                {cvFile ? 
                                                    `${(cvFile.size / 1024 / 1024).toFixed(2)} MB • Ready to proceed` :
                                                    'PDF, DOCX, DOC, or TXT format (Max 10MB)'
                                                }
                                            </p>
                                        </div>
                                        
                                        <label
                                            htmlFor="cv-upload"
                                            className="bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-8 py-4 rounded-xl font-semibold cursor-pointer transition-all duration-300 hover:from-emerald-600 hover:to-teal-600 hover:transform hover:scale-105"
                                        >
                                            {cvFile ? 'Change File' : 'Select File'}
                                        </label>
                                    </div>
                                </div>

                                {uploadError && (
                                    <div className="mt-6 bg-red-50 border border-red-200 rounded-2xl p-4">
                                        <div className="flex items-center gap-3">
                                            <div className="w-5 h-5 text-red-600">⚠️</div>
                                            <p className="text-red-700 font-medium">{uploadError}</p>
                                        </div>
                                    </div>
                                )}

                                {cvFile && (
                                    <div className="mt-6 text-center">
                                        <button
                                            onClick={() => setStep('input')}
                                            className="bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-300 hover:from-emerald-600 hover:to-teal-600 hover:transform hover:scale-105"
                                        >
                                            Continue to Job Information
                                        </button>
                                    </div>
                                )}

                                <div className="mt-6 text-center">
                                    <p className="text-sm text-slate-600">Supported formats: PDF, DOCX, DOC, TXT</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 2: Job Information Input */}
                    {step === 'input' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2 space-y-6">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                    <h3 className="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3">
                                        <div className="w-6 h-6 text-emerald-500">🏢</div>
                                        Company Information
                                    </h3>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-slate-800 mb-3">
                                            Company Website or Job Posting URL (Optional)
                                        </label>
                                        <div className="flex gap-2">
                                            <input
                                                type="url"
                                                value={companyUrl}
                                                onChange={(e) => setCompanyUrl(e.target.value)}
                                                placeholder="https://company.com or job posting URL"
                                                className="flex-1 px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all duration-300"
                                            />
                                            <button
                                                onClick={handleFetchJobDescription}
                                                disabled={!companyUrl.trim() || isFetchingUrl}
                                                className={`px-6 py-3 rounded-xl font-medium transition-all duration-300 whitespace-nowrap ${
                                                    companyUrl.trim() && !isFetchingUrl 
                                                        ? 'bg-emerald-600 text-white hover:bg-emerald-700' 
                                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                }`}
                                            >
                                                {isFetchingUrl ? '⏳ Fetching...' : '🔍 Fetch Job'}
                                            </button>
                                        </div>
                                        <p className="text-xs text-slate-600 mt-2">
                                            {isFetchingUrl ? 'Fetching job description from URL...' : 'Paste URL and click "Fetch Job" to automatically extract job description'}
                                        </p>
                                    </div>
                                </div>

                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                    <h3 className="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3">
                                        <div className="w-6 h-6 text-teal-500">📝</div>
                                        Job Description
                                    </h3>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-slate-800 mb-3">
                                            Complete Job Posting
                                        </label>
                                        <textarea
                                            value={jobDescription}
                                            onChange={(e) => setJobDescription(e.target.value)}
                                            placeholder="Paste the complete job description here..."
                                            rows={12}
                                            className="w-full px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none resize-none transition-all duration-300"
                                        />
                                        <div className="flex items-center justify-between mt-3">
                                            <p className="text-xs text-slate-600">
                                                Include job title, requirements, responsibilities, and company information
                                            </p>
                                            <span className="text-xs text-slate-600">
                                                {jobDescription.length} characters
                                            </span>
                                        </div>
                                    </div>

                                    <button
                                        onClick={handleAnalysis}
                                        disabled={!jobDescription.trim() || isAnalyzing}
                                        className="w-full mt-6 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-300 hover:from-emerald-600 hover:to-teal-600 hover:transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                                    >
                                        {isAnalyzing ? (
                                            <>
                                                <div className="w-5 h-5 animate-spin">⟳</div>
                                                Analyzing...
                                            </>
                                        ) : (
                                            <>
                                                <div className="w-5 h-5">✨</div>
                                                Analyze & Continue
                                            </>
                                        )}
                                    </button>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">CV Summary</h3>
                                    <div className="space-y-4">
                                        <div className="flex items-center gap-3">
                                            <div className="w-5 h-5 text-green-600">✅</div>
                                            <span className="text-slate-800 text-sm">CV uploaded successfully</span>
                                        </div>
                                        <div className="text-sm text-slate-600">
                                            <strong className="text-slate-800">File:</strong> {cvFile?.name}
                                        </div>
                                        <div className="text-sm text-slate-600">
                                            <strong className="text-slate-800">Size:</strong> {cvFile ? (cvFile.size / 1024 / 1024).toFixed(2) : '0'} MB
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">Tips for Best Results</h3>
                                    <div className="space-y-4 text-sm">
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">Include the complete job posting for better analysis</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">Company URL helps personalize the cover letter</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">More details = better customization</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 3: Analysis & Generation */}
                    {step === 'generate' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2 space-y-6">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                    <h3 className="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3">
                                        <div className="w-6 h-6 text-green-500">✅</div>
                                        Analysis Complete - Ready to Generate
                                    </h3>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="bg-white/70 rounded-xl p-4">
                                            <h4 className="text-green-600 text-sm font-semibold mb-2">Matching Skills</h4>
                                            <div className="flex flex-wrap gap-2">
                                                {analysisData?.matchingSkills?.map((skill, index) => (
                                                    <span key={index} className="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">
                                                        {skill}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white/70 rounded-xl p-4">
                                            <h4 className="text-blue-600 text-sm font-semibold mb-2">Areas to Address</h4>
                                            <div className="flex flex-wrap gap-2">
                                                {analysisData?.gaps?.map((gap, index) => (
                                                    <span key={index} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
                                                        {gap}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>

                                    {companyUrl && (
                                        <div className="mt-6 bg-white/70 rounded-xl p-4">
                                            <h4 className="text-purple-600 text-sm font-semibold mb-2">Company Insights</h4>
                                            <p className="text-slate-600 text-sm">
                                                Based on company research, we'll emphasize cultural fit and company values in your cover letter.
                                            </p>
                                        </div>
                                    )}

                                    <button
                                        onClick={handleGenerate}
                                        disabled={isGenerating}
                                        className="w-full mt-6 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-300 hover:from-emerald-600 hover:to-teal-600 hover:transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                                    >
                                        {isGenerating ? (
                                            <>
                                                <div className="w-5 h-5 animate-spin">⟳</div>
                                                Generating Cover Letter...
                                            </>
                                        ) : (
                                            <>
                                                <div className="w-5 h-5">✨</div>
                                                Generate Cover Letter
                                            </>
                                        )}
                                    </button>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">Job Analysis</h3>
                                    <div className="space-y-3 text-sm">
                                        <div>
                                            <span className="text-slate-600">Position:</span>
                                            <span className="text-slate-800 font-medium ml-2">{analysisData?.jobTitle}</span>
                                        </div>
                                        <div>
                                            <span className="text-slate-600">Company:</span>
                                            <span className="text-slate-800 font-medium ml-2">{analysisData?.companyInfo}</span>
                                        </div>
                                        <div>
                                            <span className="text-slate-600">Key Requirements:</span>
                                            <div className="mt-1 flex flex-wrap gap-1">
                                                {analysisData?.keyRequirements?.map((req, index) => (
                                                    <span key={index} className="bg-slate-100 text-slate-700 text-xs px-2 py-1 rounded">
                                                        {req}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">What AI Will Include</h3>
                                    <div className="space-y-2 text-sm text-slate-600">
                                        <div className="flex items-start gap-2">
                                            <div className="w-1.5 h-1.5 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <span>Personalized opening based on company research</span>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-1.5 h-1.5 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <span>Skill alignment with job requirements</span>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-1.5 h-1.5 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <span>Professional closing with clear next steps</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 4: Edit Generated Cover Letter */}
                    {step === 'edit' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-8">
                                    <div className="flex items-center justify-between mb-6">
                                        <h3 className="text-2xl font-bold text-slate-800 flex items-center gap-3">
                                            <div className="w-6 h-6 text-emerald-500">✏️</div>
                                            Edit Your Cover Letter
                                        </h3>
                                        <div className="flex gap-3">
                                            <button 
                                                onClick={() => setShowPreview(!showPreview)}
                                                className="bg-white/70 text-slate-800 px-4 py-2 rounded-xl font-medium flex items-center gap-2 hover:bg-white/90 transition-colors"
                                            >
                                                <div className="w-4 h-4">{showPreview ? '✏️' : '👁️'}</div>
                                                {showPreview ? 'Edit' : 'Preview'}
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {showPreview ? (
                                            <div className="bg-white rounded-xl p-6 min-h-96 border">
                                                <div className="whitespace-pre-wrap text-slate-800 leading-relaxed">
                                                    {editedCoverLetter}
                                                </div>
                                            </div>
                                        ) : (
                                            <textarea
                                                value={editedCoverLetter}
                                                onChange={(e) => setEditedCoverLetter(e.target.value)}
                                                className="w-full h-96 px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none resize-none transition-all duration-300"
                                                placeholder="Your cover letter will appear here..."
                                            />
                                        )}
                                        
                                        <div className="flex flex-wrap gap-3">
                                            <button
                                                onClick={handleCopy}
                                                className="bg-blue-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 hover:bg-blue-600 transition-colors"
                                            >
                                                <div className="w-4 h-4">📋</div>
                                                Copy to Clipboard
                                            </button>
                                            <button
                                                onClick={handleDownload}
                                                className="bg-green-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 hover:bg-green-600 transition-colors"
                                            >
                                                <div className="w-4 h-4">⬇️</div>
                                                Download as TXT
                                            </button>
                                            <button className="bg-purple-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 hover:bg-purple-600 transition-colors">
                                                <div className="w-4 h-4">📄</div>
                                                Download as PDF
                                            </button>
                                            <button className="bg-slate-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 hover:bg-slate-600 transition-colors">
                                                <div className="w-4 h-4">💾</div>
                                                Save Draft
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">Cover Letter Quality</h3>
                                    <div className="space-y-4">
                                        <div className="text-center">
                                            <div className="text-4xl font-bold text-green-600 mb-2">94%</div>
                                            <div className="text-sm text-slate-600">Overall Quality Score</div>
                                        </div>
                                        
                                        <div className="space-y-3 text-sm">
                                            <div className="flex justify-between">
                                                <span className="text-slate-800">Professional Tone</span>
                                                <span className="text-green-600 font-semibold">Excellent</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-slate-800">Skill Alignment</span>
                                                <span className="text-green-600 font-semibold">Very Good</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-slate-800">Personalization</span>
                                                <span className="text-green-600 font-semibold">Excellent</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-slate-800">Length</span>
                                                <span className="text-green-600 font-semibold">Perfect</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">Customization Tips</h3>
                                    <div className="space-y-3 text-sm">
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">Personalize the opening with specific company details</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">Add specific examples from your experience</p>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-slate-600">Adjust tone to match company culture</p>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">Quick Actions</h3>
                                    <div className="space-y-2">
                                        <button
                                            onClick={() => setStep('input')}
                                            className="w-full text-left p-3 text-slate-600 hover:text-slate-800 hover:bg-white/70 rounded-xl transition-colors"
                                        >
                                            Edit job description
                                        </button>
                                        <button
                                            onClick={() => setStep('upload')}
                                            className="w-full text-left p-3 text-slate-600 hover:text-slate-800 hover:bg-white/70 rounded-xl transition-colors"
                                        >
                                            Use different CV
                                        </button>
                                        <button className="w-full text-left p-3 text-slate-600 hover:text-slate-800 hover:bg-white/70 rounded-xl transition-colors">
                                            Generate another version
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Cover Letter Generator when cover-letter-content is shown
        window.renderCoverLetterGenerator = function() {
            console.log('renderCoverLetterGenerator called');
            const container = document.getElementById('cover-letter-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Cover Letter Generator...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<CoverLetterGenerator />);
                    console.log('Cover Letter Generator rendered successfully');
                } catch (error) {
                    console.error('Error rendering Cover Letter Generator:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Cover Letter Generator</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('cover-letter-container not found');
            }
        };

        // Job Finder React Component
        const JobFinder = () => {
            const [activeTab, setActiveTab] = useState('search');
            const [quickSearchJobTitle, setQuickSearchJobTitle] = useState('');
            const [quickSearchLocation, setQuickSearchLocation] = useState('');
            const [isSearching, setIsSearching] = useState(false);
            const [jobResults, setJobResults] = useState([]);
            const [selectedJob, setSelectedJob] = useState(null);
            const [showJobModal, setShowJobModal] = useState(false);
            const [companyDetails, setCompanyDetails] = useState(null);
            const [companyReviews, setCompanyReviews] = useState([]);
            const [companyInterviews, setCompanyInterviews] = useState([]);
            const [isLoadingCompanyData, setIsLoadingCompanyData] = useState(false);
            const [resumeData, setResumeData] = useState(null);
            const [userAlerts, setUserAlerts] = useState([]);
            const [locationSuggestions, setLocationSuggestions] = useState([]);
            const [showLocationSuggestions, setShowLocationSuggestions] = useState(false);
            const [resumeLocationSuggestions, setResumeLocationSuggestions] = useState([]);
            const [showResumeLocationSuggestions, setShowResumeLocationSuggestions] = useState(false);
            const [jobTitleSuggestions, setJobTitleSuggestions] = useState([]);
            const [showJobTitleSuggestions, setShowJobTitleSuggestions] = useState(false);
            
            // IP-based location detection
            const [ipDetectedLocation, setIpDetectedLocation] = useState(null);
            const [isDetectingLocation, setIsDetectingLocation] = useState(false);
            
            // Filter states
            const [filters, setFilters] = useState({
                datePosted: 'Any time',
                experienceLevel: 'Any level',
                remote: 'Any',
                salaryRange: 'Any'
            });
            const [showFilterDropdown, setShowFilterDropdown] = useState({
                datePosted: false,
                experienceLevel: false,
                remote: false,
                salaryRange: false
            });
            const [currentPage, setCurrentPage] = useState(1);
            const [searchHistory, setSearchHistory] = useState([]);
            
            // Resume management states
            const [uploadedResumes, setUploadedResumes] = useState({});
            const [activeResume, setActiveResume] = useState(null);
            const [isUploadingResume, setIsUploadingResume] = useState(false);
            const [aiRecommendations, setAiRecommendations] = useState([]);
            const [isLoadingRecommendations, setIsLoadingRecommendations] = useState(false);
            
            // Resume-based search filter states
            const [resumeFilters, setResumeFilters] = useState({
                workType: 'Full-time',
                remote: 'Any',
                experienceLevel: 'Any level',
                minSalary: 'Any',
                location: '',
                skillsFilter: []
            });
            const [personalizedJobResults, setPersonalizedJobResults] = useState([]);
            const [isSearchingPersonalized, setIsSearchingPersonalized] = useState(false);
            const [selectedSearchStrategy, setSelectedSearchStrategy] = useState(null);
            const [isGeneratingQuery, setIsGeneratingQuery] = useState(false);
            const [aiReasoning, setAiReasoning] = useState(null);
            
            // Common locations database - Expanded with global cities
            const locationDatabase = [
                // Remote options
                'Remote',
                'Remote, Worldwide',
                
                // Indian Cities
                'Hyderabad, Telangana, India',
                'Mumbai, Maharashtra, India',
                'Delhi, India',
                'Bangalore, Karnataka, India',
                'Chennai, Tamil Nadu, India',
                'Kolkata, West Bengal, India',
                'Pune, Maharashtra, India',
                'Ahmedabad, Gujarat, India',
                'Jaipur, Rajasthan, India',
                'Lucknow, Uttar Pradesh, India',
                'Kanpur, Uttar Pradesh, India',
                'Nagpur, Maharashtra, India',
                'Visakhapatnam, Andhra Pradesh, India',
                'Bhopal, Madhya Pradesh, India',
                'Chandigarh, India',
                'Coimbatore, Tamil Nadu, India',
                'Patna, Bihar, India',
                'Kochi, Kerala, India',
                'Indore, Madhya Pradesh, India',
                'Guwahati, Assam, India',
                
                // United States
                'New York, NY, United States',
                'Los Angeles, CA, United States',
                'San Francisco, CA, United States',
                'Chicago, IL, United States',
                'Boston, MA, United States',
                'Seattle, WA, United States',
                'Austin, TX, United States',
                'Denver, CO, United States',
                'Philadelphia, PA, United States',
                'San Diego, CA, United States',
                'Portland, OR, United States',
                'Atlanta, GA, United States',
                'Miami, FL, United States',
                'Washington, DC, United States',
                
                // United Kingdom
                'London, England, United Kingdom',
                'Manchester, England, United Kingdom',
                'Birmingham, England, United Kingdom',
                'Leeds, England, United Kingdom',
                'Glasgow, Scotland, United Kingdom',
                'Edinburgh, Scotland, United Kingdom',
                'Liverpool, England, United Kingdom',
                'Bristol, England, United Kingdom',
                'Brighton, England, United Kingdom',
                'Cambridge, England, United Kingdom',
                'Oxford, England, United Kingdom',
                'Belfast, Northern Ireland, United Kingdom',
                
                // Europe
                'Berlin, Germany',
                'Munich, Germany',
                'Hamburg, Germany',
                'Frankfurt, Germany',
                'Paris, France',
                'Lyon, France',
                'Marseille, France',
                'Amsterdam, Netherlands',
                'Rotterdam, Netherlands',
                'Barcelona, Spain',
                'Madrid, Spain',
                'Valencia, Spain',
                'Rome, Italy',
                'Milan, Italy',
                'Zurich, Switzerland',
                'Geneva, Switzerland',
                'Vienna, Austria',
                'Prague, Czech Republic',
                'Stockholm, Sweden',
                'Oslo, Norway',
                'Copenhagen, Denmark',
                'Helsinki, Finland',
                'Dublin, Ireland',
                'Brussels, Belgium',
                'Warsaw, Poland',
                'Budapest, Hungary',
                'Lisbon, Portugal',
                'Athens, Greece',
                
                // Asia Pacific
                'Singapore',
                'Hong Kong',
                'Tokyo, Japan',
                'Seoul, South Korea',
                'Shanghai, China',
                'Beijing, China',
                'Shenzhen, China',
                'Dubai, United Arab Emirates',
                'Abu Dhabi, United Arab Emirates',
                'Riyadh, Saudi Arabia',
                'Jakarta, Indonesia',
                'Manila, Philippines',
                'Bangkok, Thailand',
                'Kuala Lumpur, Malaysia',
                'Ho Chi Minh City, Vietnam',
                'Hanoi, Vietnam',
                
                // Australia & New Zealand
                'Sydney, NSW, Australia',
                'Melbourne, VIC, Australia',
                'Brisbane, QLD, Australia',
                'Perth, WA, Australia',
                'Adelaide, SA, Australia',
                'Auckland, New Zealand',
                'Wellington, New Zealand',
                
                // Canada
                'Toronto, Ontario, Canada',
                'Vancouver, BC, Canada',
                'Montreal, Quebec, Canada',
                'Calgary, Alberta, Canada',
                'Ottawa, Ontario, Canada',
                
                // Latin America
                'São Paulo, Brazil',
                'Rio de Janeiro, Brazil',
                'Mexico City, Mexico',
                'Buenos Aires, Argentina',
                'Santiago, Chile',
                'Bogotá, Colombia',
                'Lima, Peru',
                
                // Africa
                'Cape Town, South Africa',
                'Johannesburg, South Africa',
                'Lagos, Nigeria',
                'Nairobi, Kenya',
                'Cairo, Egypt',
                
                // Middle East
                'Tel Aviv, Israel',
                'Jerusalem, Israel',
                'Istanbul, Turkey',
                'Ankara, Turkey',
                
                // Malta
                'Malta',
                'Valletta, Malta',
                
                // Additional US cities
                'Portland, ME, United States',
                'Baltimore, MD, United States',
                'Nashville, TN, United States',
                'Charlotte, NC, United States',
                'Jacksonville, FL, United States'
            ];
            
            // Common job titles database
            const jobTitlesDatabase = [
                'Software Engineer', 'Senior Software Engineer', 'Full Stack Developer',
                'Frontend Developer', 'Backend Developer', 'DevOps Engineer',
                'Data Scientist', 'Data Analyst', 'Business Analyst',
                'Product Manager', 'Senior Product Manager', 'Technical Product Manager',
                'Project Manager', 'Program Manager', 'Scrum Master',
                'UX Designer', 'UI Designer', 'Product Designer',
                'Marketing Manager', 'Digital Marketing Manager', 'Content Marketing Manager',
                'Sales Manager', 'Business Development Manager', 'Account Manager',
                'Customer Success Manager', 'Customer Support Manager',
                'HR Manager', 'Talent Acquisition Manager', 'HR Business Partner',
                'Operations Manager', 'Business Operations Manager',
                'Financial Analyst', 'Investment Analyst', 'Business Intelligence Analyst',
                'QA Engineer', 'Test Engineer', 'Automation Engineer',
                'Security Engineer', 'Cloud Engineer', 'Site Reliability Engineer',
                'Machine Learning Engineer', 'AI Engineer', 'ML Engineer',
                'Systems Engineer', 'Network Engineer', 'Database Administrator',
                'IT Manager', 'IT Director', 'CTO', 'Technical Director',
                'Solutions Architect', 'Enterprise Architect',
                'Business Consultant', 'Management Consultant',
                'Copywriter', 'Content Writer', 'Technical Writer',
                'Social Media Manager', 'Community Manager',
                'Graphic Designer', 'Web Designer', 'Motion Graphics Designer',
                'Video Editor', 'Content Creator', 'Influencer Marketing Manager'
            ];
            
            // Handle job title input change
            const handleJobTitleChange = (value) => {
                setQuickSearchJobTitle(value);
                
                if (value.trim().length > 0) {
                    // Filter job titles based on input
                    const filtered = jobTitlesDatabase.filter(title =>
                        title.toLowerCase().includes(value.toLowerCase())
                    ).slice(0, 10); // Show max 10 suggestions
                    
                    setJobTitleSuggestions(filtered);
                    setShowJobTitleSuggestions(true);
                } else {
                    setJobTitleSuggestions([]);
                    setShowJobTitleSuggestions(false);
                }
            };
            
            // Handle job title suggestion selection
            const handleSelectJobTitle = (title) => {
                setQuickSearchJobTitle(title);
                setShowJobTitleSuggestions(false);
                setJobTitleSuggestions([]);
            };
            
            // Handle location input change
            const handleLocationChange = (value) => {
                setQuickSearchLocation(value);
                
                if (value.trim().length > 0) {
                    // Filter locations based on input
                    const filtered = locationDatabase.filter(loc =>
                        loc.toLowerCase().includes(value.toLowerCase())
                    ).slice(0, 10); // Show max 10 suggestions
                    
                    setLocationSuggestions(filtered);
                    setShowLocationSuggestions(true);
                } else {
                    setLocationSuggestions([]);
                    setShowLocationSuggestions(false);
                }
            };
            
            // Handle location suggestion selection
            const handleSelectLocation = (location) => {
                setQuickSearchLocation(location);
                setShowLocationSuggestions(false);
                setLocationSuggestions([]);
            };
            
            // Handle location input change for resume filter
            const handleResumeLocationChange = (value) => {
                setResumeFilters(prev => ({...prev, location: value}));
                
                if (value.trim().length > 0) {
                    // Filter locations based on input
                    const filtered = locationDatabase.filter(loc =>
                        loc.toLowerCase().includes(value.toLowerCase())
                    ).slice(0, 10); // Show max 10 suggestions
                    
                    setResumeLocationSuggestions(filtered);
                    setShowResumeLocationSuggestions(true);
                } else {
                    setResumeLocationSuggestions([]);
                    setShowResumeLocationSuggestions(false);
                }
            };
            
            // Handle location suggestion selection for resume filter
            const handleSelectResumeLocation = (location) => {
                setResumeFilters(prev => ({...prev, location: location}));
                setShowResumeLocationSuggestions(false);
                setResumeLocationSuggestions([]);
            };
            
            // Detect user location from IP address
            const detectUserLocationFromIP = async () => {
                setIsDetectingLocation(true);
                try {
                    // Try ipapi.co first (HTTPS support, free tier)
                    try {
                        const response = await fetch('https://ipapi.co/json/');
                        const data = await response.json();
                        
                        if (data.city && data.region && data.country_name) {
                            const location = `${data.city}, ${data.region}, ${data.country_name}`;
                            setIpDetectedLocation(location);
                            localStorage.setItem('ip_detected_location', location);
                            localStorage.setItem('ip_location_timestamp', Date.now().toString());
                            console.log('IP Location detected (ipapi.co):', location);
                            setIsDetectingLocation(false);
                            return location;
                        }
                    } catch (apiCoError) {
                        console.log('ipapi.co failed, trying ip-api.com...', apiCoError);
                    }
                    
                    // Fallback to ip-api.com (HTTP, no API key needed for basic usage)
                    // Note: This might cause mixed content warnings in HTTPS, but will work
                    const response = await fetch('http://ip-api.com/json/');
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        // Format: "City, State, Country"
                        let location = '';
                        if (data.city && data.regionName && data.country) {
                            location = `${data.city}, ${data.regionName}, ${data.country}`;
                        } else if (data.city && data.country) {
                            location = `${data.city}, ${data.country}`;
                        } else if (data.country) {
                            location = data.country;
                        }
                        
                        if (location) {
                            setIpDetectedLocation(location);
                            localStorage.setItem('ip_detected_location', location);
                            localStorage.setItem('ip_location_timestamp', Date.now().toString());
                            console.log('IP Location detected (ip-api.com):', location);
                            setIsDetectingLocation(false);
                            return location;
                        }
                    }
                } catch (error) {
                    console.error('Error detecting location from IP:', error);
                    // Try to load from localStorage if available
                    const saved = localStorage.getItem('ip_detected_location');
                    if (saved) {
                        setIpDetectedLocation(saved);
                        setIsDetectingLocation(false);
                        return saved;
                    }
                }
                setIsDetectingLocation(false);
                return null;
            };
            
            // Normalize location for better search results
            const normalizeLocationForSearch = (location) => {
                if (!location) return '';
                
                const loc = location.trim();
                if (!loc) return '';
                
                // Common Indian city mappings with variants
                const cityMappings = {
                    'bangalore': {
                        variants: ['bangalore', 'bengaluru', 'ejipura', 'kormangla', 'koramangala', 'bangalore-47', 'bangalore 47'],
                        standard: 'Bangalore, Karnataka, India'
                    },
                    'mumbai': {
                        variants: ['mumbai', 'bombay'],
                        standard: 'Mumbai, Maharashtra, India'
                    },
                    'delhi': {
                        variants: ['delhi', 'new delhi', 'noida', 'gurgaon', 'gurugram'],
                        standard: 'Delhi, India'
                    },
                    'chennai': {
                        variants: ['chennai', 'madras'],
                        standard: 'Chennai, Tamil Nadu, India'
                    },
                    'hyderabad': {
                        variants: ['hyderabad'],
                        standard: 'Hyderabad, Telangana, India'
                    },
                    'pune': {
                        variants: ['pune', 'puna'],
                        standard: 'Pune, Maharashtra, India'
                    },
                    'kolkata': {
                        variants: ['kolkata', 'calcutta'],
                        standard: 'Kolkata, West Bengal, India'
                    },
                    'ahmedabad': {
                        variants: ['ahmedabad'],
                        standard: 'Ahmedabad, Gujarat, India'
                    },
                    'visakhapatnam': {
                        variants: ['visakhapatnam', 'vizag', 'visakha'],
                        standard: 'Visakhapatnam, Andhra Pradesh, India'
                    },
                    'jaipur': {
                        variants: ['jaipur'],
                        standard: 'Jaipur, Rajasthan, India'
                    },
                    'surat': {
                        variants: ['surat'],
                        standard: 'Surat, Gujarat, India'
                    },
                    'lucknow': {
                        variants: ['lucknow'],
                        standard: 'Lucknow, Uttar Pradesh, India'
                    },
                    'kanpur': {
                        variants: ['kanpur'],
                        standard: 'Kanpur, Uttar Pradesh, India'
                    },
                    'nagpur': {
                        variants: ['nagpur'],
                        standard: 'Nagpur, Maharashtra, India'
                    },
                    'indore': {
                        variants: ['indore'],
                        standard: 'Indore, Madhya Pradesh, India'
                    },
                    'thane': {
                        variants: ['thane'],
                        standard: 'Thane, Maharashtra, India'
                    },
                    'bhopal': {
                        variants: ['bhopal'],
                        standard: 'Bhopal, Madhya Pradesh, India'
                    }
                };
                
                // Check if location contains any city name
                const locLower = loc.toLowerCase();
                
                for (const [city, mapping] of Object.entries(cityMappings)) {
                    for (const variant of mapping.variants) {
                        if (locLower.includes(variant)) {
                            return mapping.standard;
                        }
                    }
                }
                
                // If no match found, try to extract the main city from comma-separated address
                const parts = loc.split(',').map(p => p.trim().replace(/-\d+$/, '').trim()); // Remove pincode suffixes like "-47"
                
                if (parts.length > 0) {
                    // Check if any part matches a known city
                    for (const part of parts) {
                        const partLower = part.toLowerCase();
                        for (const [city, mapping] of Object.entries(cityMappings)) {
                            for (const variant of mapping.variants) {
                                if (partLower === variant || partLower.includes(variant) || variant.includes(partLower)) {
                                    return mapping.standard;
                                }
                            }
                        }
                    }
                    
                    // If no city match, try to use the last non-numeric part as city
                    const lastPart = parts[parts.length - 1];
                    const secondLastPart = parts.length > 1 ? parts[parts.length - 2] : null;
                    
                    // Use second-last if last is a country/state, otherwise use last
                    if (secondLastPart && !['india', 'usa', 'uk', 'canada', 'australia'].includes(lastPart.toLowerCase())) {
                        return secondLastPart + ', India';
                    } else if (lastPart && !/^\d+$/.test(lastPart) && lastPart.length > 2) {
                        return lastPart + ', India';
                    }
                }
                
                // Fallback: return original location if it looks reasonable
                return loc;
            };
            
            // Get final location for search with priority logic
            const getFinalLocationForSearch = (context = 'personalized') => {
                let location = '';
                
                // Priority 1: User explicitly set location filter (for personalized search)
                if (context === 'personalized' && resumeFilters.location && resumeFilters.location.trim()) {
                    location = resumeFilters.location.trim();
                }
                // Priority 2: Quick Search location (if used in quick search context)
                else if (context === 'quick' && quickSearchLocation && quickSearchLocation.trim()) {
                    location = quickSearchLocation.trim();
                }
                // Priority 3: Resume location
                else if (activeResume && uploadedResumes[activeResume]) {
                    const resumeLoc = uploadedResumes[activeResume].personalInfo?.location;
                    if (resumeLoc && resumeLoc.trim()) {
                        location = resumeLoc.trim();
                    }
                }
                // Priority 4: IP-detected location
                else if (ipDetectedLocation) {
                    location = ipDetectedLocation;
                }
                
                // Normalize the location for better search results
                if (location) {
                    const normalized = normalizeLocationForSearch(location);
                    console.log(`Location normalization: "${location}" -> "${normalized}"`);
                    return normalized;
                }
                
                // Priority 5: No location
                return '';
            };
            
            // Helper function for strategy labels
            const getStrategyLabel = (strategyId) => {
                const labels = {
                    'background': 'Your Background',
                    'career_progression': 'Career Progression',
                    'skill_based': 'Skills',
                    'passion_based': 'Your Interests',
                    'industry_switch': 'Industry Switch'
                };
                return labels[strategyId] || 'Strategy';
            };
            
            // Generate search query using OpenAI based on strategy type
            const generateSearchQueryFromStrategy = async (strategyType, resumeData) => {
                const apiKey = localStorage.getItem('openai_api_key');
                if (!apiKey) {
                    throw new Error('OpenAI API key required for strategy-based search. Please set it in Settings.');
                }

                // Prepare resume data for prompt - extract key fields only to avoid large payload
                const resumeSummary = {
                    currentRole: resumeData.experience?.[0]?.position || '',
                    recentJobs: (resumeData.experience || []).slice(0, 2).map(exp => ({
                        position: exp.position || '',
                        company: exp.company || '',
                        duration: exp.duration || ''
                    })),
                    skills: resumeData.skills?.technical || [],
                    industries: resumeData.experience?.map(exp => exp.company).filter(Boolean).slice(0, 3) || [],
                    projects: (resumeData.projects || []).slice(0, 3).map(p => p.name || p.description || '').filter(Boolean),
                    interests: resumeData.skills?.soft || [],
                    education: (resumeData.education || []).slice(0, 2).map(e => e.degree || e.institution || '').filter(Boolean),
                    summary: (resumeData.summary || '').substring(0, 300) // Limit summary length
                };

                const strategyPrompts = {
                    'background': `Using this CV summary, generate:
1. A concise job search query string that finds roles similar to the user's current job title and industry. Include related titles that fit the same skill and experience level.
2. A brief explanation (2-3 sentences) describing how you determined these job matches based on the CV, citing specific evidence like their current role, skills, or experience.

Format your response as JSON with two fields: "query" and "reasoning".

Example response format:
{
  "query": "Software Engineer OR Backend Developer jobs",
  "reasoning": "Based on your CV, you're currently working as a Software Engineer with experience in Python and AWS. We've identified similar roles like Backend Developer that match your technical skills and experience level in software development."
}

CV Summary: ${JSON.stringify(resumeSummary)}`,
                    
                    'career_progression': `Based on this CV summary, predict the user's next logical job titles representing career growth. Use known job hierarchy patterns. Generate:
1. A concise job search query for those next-level roles.
2. A brief explanation (2-3 sentences) describing the career progression logic, citing their current role and explaining why the suggested roles are the next step.

Format your response as JSON with two fields: "query" and "reasoning".

Example response format:
{
  "query": "Senior Software Engineer OR Tech Lead jobs",
  "reasoning": "Your CV shows you're currently working as a Software Engineer with 3 years of experience. Based on typical career progression patterns, the next logical step is a Senior Software Engineer or Tech Lead role, which builds on your current responsibilities and technical expertise."
}

CV Summary: ${JSON.stringify(resumeSummary)}`,
                    
                    'skill_based': `Ignore the user's job title. Use only the skills from this CV summary to generate:
1. A job search query for roles that commonly require these skills.
2. A brief explanation (2-3 sentences) describing which skills from their CV led to these job recommendations.

Format your response as JSON with two fields: "query" and "reasoning".

Example response format:
{
  "query": "Python Developer OR Data Analyst jobs",
  "reasoning": "Your CV highlights strong skills in Python, Data Analysis, and Machine Learning. These technical competencies are directly transferable to roles like Python Developer and Data Analyst, regardless of your current job title."
}

CV Summary: ${JSON.stringify(resumeSummary)}`,
                    
                    'passion_based': `Based on the user's hobbies, projects, and interests from this CV summary, infer potential passion-aligned roles and generate:
1. A job search query for those roles.
2. A brief explanation (2-3 sentences) describing how their interests and projects align with these job opportunities.

Format your response as JSON with two fields: "query" and "reasoning".

Example response format:
{
  "query": "AI Engineer OR Automation Developer jobs",
  "reasoning": "Your CV mentions projects like 'Built AI chatbot' and interests in 'AI tools and automation'. This passion for artificial intelligence and automation aligns well with roles like AI Engineer or Automation Developer, where you can work on projects you're genuinely excited about."
}

CV Summary: ${JSON.stringify(resumeSummary)}`,
                    
                    'industry_switch': `Based on the user's skills and experience from this CV summary, identify transferable industries they could work in. Generate:
1. Job search queries for those industries using their technical background.
2. A brief explanation (2-3 sentences) describing which skills are transferable and which industries would benefit from their background.

Format your response as JSON with two fields: "query" and "reasoning".

Example response format:
{
  "query": "Data Analyst jobs in Healthcare OR Finance",
  "reasoning": "While your background is in Mechanical Engineering, your CV shows strong skills in Data Analysis and Python. These technical skills are highly transferable to industries like Healthcare and Finance, where data-driven insights are crucial for decision-making."
}

CV Summary: ${JSON.stringify(resumeSummary)}`
                };

                try {
                    console.log('Generating query for strategy:', strategyType);
                    
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a career matching assistant. Generate a JSON object with "query" (job search query string) and "reasoning" (brief explanation with evidence from CV) fields. Return ONLY valid JSON, no markdown, no additional text.'
                                },
                                {
                                    role: 'user',
                                    content: strategyPrompts[strategyType]
                                }
                            ],
                            temperature: 0.7,
                            max_tokens: 400
                        })
                    });

                    console.log('OpenAI API response status:', response.status);

                    if (!response.ok) {
                        let errorMessage = 'Failed to generate search query';
                        try {
                            const errorData = await response.json();
                            errorMessage = errorData.error?.message || errorMessage;
                            console.error('OpenAI API error details:', errorData);
                        } catch (e) {
                            const errorText = await response.text();
                            console.error('OpenAI API error (non-JSON):', errorText);
                            errorMessage = `API Error: ${response.status} ${response.statusText}`;
                        }
                        throw new Error(errorMessage);
                    }

                    const data = await response.json();
                    console.log('OpenAI API response data:', data);
                    
                    if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                        console.error('Invalid response structure:', data);
                        throw new Error('Invalid response format from OpenAI');
                    }

                    let responseText = data.choices[0].message.content.trim();
                    
                    if (!responseText) {
                        console.error('Empty response');
                        throw new Error('Empty response from OpenAI');
                    }
                    
                    // Clean up response - remove markdown code blocks if present
                    responseText = responseText.replace(/^```json\n?/g, '');
                    responseText = responseText.replace(/^```\n?/g, '');
                    responseText = responseText.replace(/```$/g, '');
                    responseText = responseText.trim();
                    
                    // Parse JSON response
                    let parsedResponse;
                    try {
                        parsedResponse = JSON.parse(responseText);
                    } catch (parseError) {
                        console.error('Failed to parse JSON response:', responseText);
                        throw new Error('Invalid JSON response from OpenAI');
                    }
                    
                    const query = parsedResponse.query?.trim() || '';
                    const reasoning = parsedResponse.reasoning?.trim() || '';
                    
                    if (!query) {
                        throw new Error('Generated query is empty');
                    }
                    
                    console.log('Successfully generated search query:', query);
                    console.log('AI Reasoning:', reasoning);
                    
                    return { query, reasoning };
                } catch (error) {
                    console.error('Error in generateSearchQueryFromStrategy:', error);
                    console.error('Strategy type:', strategyType);
                    console.error('Resume summary:', resumeSummary);
                    throw error;
                }
            };
            
            // Handle filter toggle
            const handleToggleFilter = (filterType) => {
                setShowFilterDropdown(prev => ({
                    ...prev,
                    [filterType]: !prev[filterType]
                }));
            };
            
            // Handle filter selection
            const handleSelectFilter = (filterType, value) => {
                setFilters(prev => ({
                    ...prev,
                    [filterType]: value
                }));
                setShowFilterDropdown(prev => ({
                    ...prev,
                    [filterType]: false
                }));
            };
            
            // Resume management functions
            const handleResumeUpload = async (event) => {
                const file = event.target.files?.[0];
                if (!file) return;
                
                if (!file.type.includes('pdf') && !file.type.includes('text') && !file.name.endsWith('.docx')) {
                    alert('Please upload a PDF, DOCX, or TXT file');
                    return;
                }
                
                setIsUploadingResume(true);
                
                try {
                    // Read file as text
                    const reader = new FileReader();
                    const fileContent = await new Promise((resolve, reject) => {
                        reader.onload = (e) => resolve(e.target.result);
                        reader.onerror = reject;
                        reader.readAsText(file);
                    });
                    
                    // Parse resume - try OpenAI first, fall back to simple parser
                    let parsedData;
                    const apiKey = localStorage.getItem('openai_api_key');
                    
                    if (apiKey) {
                        try {
                            parsedData = await parseResumeWithOpenAI(fileContent);
                        } catch (aiError) {
                            console.error('OpenAI parsing failed, using simple parser:', aiError);
                            parsedData = parseResumeText(fileContent);
                        }
                    } else {
                        parsedData = parseResumeText(fileContent);
                    }
                    
                    // Save to localStorage
                    const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                    savedResumes[file.name] = parsedData;
                    localStorage.setItem('parsed_resumes', JSON.stringify(savedResumes));
                    
                    // Update state
                    setUploadedResumes(savedResumes);
                    
                    // Set as active resume
                    setActiveResume(file.name);
                    setResumeData(parsedData);
                    
                    // Save to localStorage
                    localStorage.setItem('active_resume_for_job_search', file.name);
                    
                    // Generate AI recommendations
                    generateAIRecommendations(parsedData);
                    
                    alert('Resume uploaded successfully!');
                } catch (error) {
                    console.error('Error uploading resume:', error);
                    alert('Failed to upload resume. ' + (error.message || 'Please try again.'));
                } finally {
                    setIsUploadingResume(false);
                    event.target.value = ''; // Reset file input
                }
            };
            
            // OpenAI-powered resume parser for accurate extraction
            const parseResumeWithOpenAI = async (text) => {
                const apiKey = localStorage.getItem('openai_api_key');
                
                if (!apiKey) {
                    throw new Error('OpenAI API key not found. Please set it in Settings.');
                }
                
                const prompt = `Extract structured data from this resume text and return valid JSON only. The JSON should include:

{
  "personalInfo": {
    "name": "Full Name",
    "email": "email@example.com",
    "phone": "+1234567890",
    "location": "City, State, Country",
    "linkedIn": "linkedin.com/in/username",
    "portfolio": "website.com"
  },
  "summary": "Professional summary or objective",
  "skills": {
    "technical": ["skill1", "skill2", "skill3"],
    "soft": ["communication", "leadership", "teamwork"],
    "languages": ["English", "Spanish"]
  },
  "experience": [{
    "company": "Company Name",
    "position": "Job Title",
    "startDate": "YYYY-MM",
    "endDate": "YYYY-MM or Present",
    "description": "Job description",
    "achievements": ["achievement1", "achievement2"]
  }],
  "education": [{
    "institution": "University Name",
    "degree": "Degree Type",
    "field": "Field of Study",
    "graduationDate": "YYYY-MM"
  }],
  "certifications": [{
    "name": "Certification Name",
    "issuer": "Issuing Organization",
    "date": "YYYY-MM",
    "expiryDate": "YYYY-MM or null"
  }],
  "projects": [{
    "name": "Project Name",
    "description": "Project description",
    "technologies": ["tech1", "tech2"],
    "link": "project-url.com"
  }]
}

Resume text:
${text}

Return only valid JSON, no additional text. Be comprehensive and extract all skills, experiences, and relevant information.`;

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a resume parser. Extract all relevant information from resumes accurately and return valid JSON only.'
                                },
                                {
                                    role: 'user',
                                    content: prompt
                                }
                            ],
                            temperature: 0.3,
                            max_tokens: 4000
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'Failed to parse resume');
                    }

                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (!content) {
                        throw new Error('No response from OpenAI');
                    }

                    // Try to extract JSON from the response
                    const jsonMatch = content.match(/\{[\s\S]*\}/);
                    if (jsonMatch) {
                        return JSON.parse(jsonMatch[0]);
                    }

                    // If no JSON found, try parsing the whole content
                    return JSON.parse(content);
                } catch (error) {
                    console.error('Error parsing resume with OpenAI:', error);
                    throw error;
                }
            };
            
            // Simple resume parser (fallback when OpenAI is not available)
            const parseResumeText = (text) => {
                const lines = text.split('\n').map(line => line.trim()).filter(line => line.length > 0);
                
                // Extract basic information
                const personalInfo = {
                    name: '',
                    email: '',
                    phone: '',
                    location: '',
                    linkedIn: '',
                    portfolio: ''
                };
                
                const skills = {
                    technical: [],
                    soft: [],
                    languages: []
                };
                
                const experience = [];
                const education = [];
                
                // Extract email
                const emailMatch = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/);
                if (emailMatch) personalInfo.email = emailMatch[0];
                
                // Extract phone
                const phoneMatch = text.match(/(\+?1[-.\s]?)?\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})/);
                if (phoneMatch) personalInfo.phone = phoneMatch[0];
                
                // Extract LinkedIn
                const linkedinMatch = text.match(/linkedin\.com\/in\/[a-zA-Z0-9-]+/i);
                if (linkedinMatch) personalInfo.linkedIn = linkedinMatch[0];
                
                // Extract location (common patterns) - IMPROVED VERSION
                const locationPatterns = [
                    // Pattern 1: "live/located/based in/at [Location]"
                    /(?:live|located|based|stay|reside|address|from)\s+(?:in|at|near)\s+([^,\n]+(?:,\s*[^,\n]+)*)/i,
                    // Pattern 2: "City, State, Country" format
                    /([A-Z][a-z]+(?:\s+[A-Z][a-z]+)?(?:\s*,\s*[A-Z][a-z]+(?:\s+[A-Z][a-z]+)?)*),\s*(?:India|USA|UK|United Kingdom|Canada|Australia|United States)/i,
                    // Pattern 3: Indian address format "Area, Locality, City-Pincode" or "Area, City-Pincode"
                    /([A-Z][a-z]+(?:\s+[A-Z][a-z]+)?(?:\s*,\s*[A-Z][a-z]+(?:\s+[A-Z][a-z]+)?)*),\s*([A-Z][a-z]+)(?:[-]\s*\d+)?/i,
                    // Pattern 4: Standalone city names (for Indian cities)
                    /\b(?:Bangalore|Bengaluru|Mumbai|Bombay|Delhi|New Delhi|Chennai|Madras|Kolkata|Calcutta|Hyderabad|Pune|Ahmedabad|Jaipur|Lucknow|Kanpur|Nagpur|Indore|Thane|Bhopal|Visakhapatnam|Vizag|Surat|Patna|Vadodara|Ghaziabad|Ludhiana|Coimbatore|Agra|Madurai|Nashik|Meerut|Rajkot|Varanasi|Srinagar|Amritsar|Noida|Ranchi|Chandigarh|Raipur|Gwalior|Jabalpur|Kormangla|Koramangala|Ejipura)\b/i
                ];
                
                locationPatterns.forEach(pattern => {
                    const match = text.match(pattern);
                    if (match) {
                        // Get the matched location
                        let extractedLocation = match[1] || match[2] || match[0];
                        
                        // Clean up common prefixes
                        extractedLocation = extractedLocation.replace(/^(?:live|located|based|stay|reside|address|from|in|at|near)\s+/i, '');
                        extractedLocation = extractedLocation.trim();
                        
                        if (extractedLocation && extractedLocation.length > 2) {
                            personalInfo.location = extractedLocation;
                        }
                    }
                });
                
                // Extract common technical skills (expanded list)
                const commonSkills = [
                    'JavaScript', 'Python', 'Java', 'React', 'Node.js', 'SQL', 'HTML', 'CSS',
                    'TypeScript', 'Angular', 'Vue.js', 'PHP', 'C++', 'C#', 'Ruby', 'Go',
                    'AWS', 'Azure', 'Docker', 'Kubernetes', 'Git', 'MongoDB', 'PostgreSQL',
                    'Machine Learning', 'Data Science', 'AI', 'DevOps', 'Agile', 'Scrum',
                    'Express', 'Django', 'Flask', 'Spring', 'REST API', 'GraphQL', 'MongoDB',
                    'Redis', 'RabbitMQ', 'Microservices', 'CI/CD', 'Jenkins', 'Terraform',
                    'Redux', 'Next.js', 'Nuxt', 'Svelte', 'jQuery', 'Bootstrap', 'Tailwind',
                    'SASS', 'LESS', 'Webpack', 'Vite', 'npm', 'yarn', 'pip', 'conda',
                    'Postman', 'Swagger', 'Jira', 'Confluence', 'Slack', 'Trello', 'Asana'
                ];
                
                const textLower = text.toLowerCase();
                commonSkills.forEach(skill => {
                    if (textLower.includes(skill.toLowerCase()) || textLower.includes(skill.toLowerCase().replace('.', ''))) {
                        skills.technical.push(skill);
                    }
                });
                
                // Extract job titles and companies (simple pattern matching)
                const jobTitles = [
                    'Software Engineer', 'Developer', 'Programmer', 'Analyst', 'Manager',
                    'Designer', 'Consultant', 'Specialist', 'Coordinator', 'Director',
                    'Senior', 'Junior', 'Lead', 'Principal', 'Architect', 'Tech Lead'
                ];
                
                let currentJob = null;
                lines.forEach(line => {
                    const lineLower = line.toLowerCase();
                    jobTitles.forEach(title => {
                        if (lineLower.includes(title.toLowerCase()) && line.length < 100 && line.length > 10) {
                            if (currentJob) experience.push(currentJob);
                            currentJob = {
                                position: line,
                                company: '',
                                startDate: '',
                                endDate: 'Present',
                                description: '',
                                achievements: []
                            };
                        }
                    });
                });
                
                if (currentJob) experience.push(currentJob);
                
                return {
                    personalInfo,
                    summary: lines.slice(0, 3).join(' ') || 'Professional with relevant experience and skills.',
                    skills,
                    experience: experience.slice(0, 5), // Limit to 5 most recent
                    education: [],
                    certifications: [],
                    projects: []
                };
            };
            
            const handleSelectResume = (resumeName) => {
                const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                if (savedResumes[resumeName]) {
                    setActiveResume(resumeName);
                    setResumeData(savedResumes[resumeName]);
                    localStorage.setItem('active_resume_for_job_search', resumeName);
                    generateAIRecommendations(savedResumes[resumeName]);
                }
            };
            
            const handleDeleteResume = (resumeName) => {
                if (!confirm(`Are you sure you want to delete "${resumeName}"?`)) {
                    return;
                }
                
                const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                delete savedResumes[resumeName];
                localStorage.setItem('parsed_resumes', JSON.stringify(savedResumes));
                
                setUploadedResumes(savedResumes);
                
                if (activeResume === resumeName) {
                    const remainingResumes = Object.keys(savedResumes);
                    if (remainingResumes.length > 0) {
                        const firstResume = remainingResumes[0];
                        handleSelectResume(firstResume);
                    } else {
                        setActiveResume(null);
                        setResumeData(null);
                        setAiRecommendations([]);
                        localStorage.removeItem('active_resume_for_job_search');
                    }
                }
            };
            
            const generateAIRecommendations = async (resumeData) => {
                setIsLoadingRecommendations(true);
                
                try {
                    // Extract key information from resume
                    const skills = resumeData.skills?.technical || [];
                    const experience = resumeData.experience || [];
                    const recentJob = experience[0]?.position || '';
                    const recentCompany = experience[0]?.company || '';
                    
                    // Build search query based on resume with better skill extraction
                    let searchQuery = recentJob || 'jobs';
                    
                    // Use top 5 most relevant skills for better matching
                    if (skills.length > 0) {
                        const topSkills = skills.slice(0, 5).join(' ');
                        searchQuery += ` ${topSkills}`;
                    }
                    
                    // Add location for better results - use IP location as fallback
                    const rawLocation = resumeData.personalInfo?.location || ipDetectedLocation || '';
                    const location = normalizeLocationForSearch(rawLocation);
                    
                    console.log('Searching for real job recommendations with Serper.dev...');
                    if (location) {
                        console.log('Using normalized location:', location, '(original:', rawLocation + ')');
                    }
                    
                    try {
                        // Use Serper API to get real job listings
                        const searchData = await SerperSearch.searchJobs(
                            searchQuery,
                            location
                        );
                        
                        if (searchData && searchData.organic && searchData.organic.length > 0) {
                            console.log(`Found ${searchData.organic.length} real job recommendations`);
                            
                            // Transform Serper.dev results to recommendation format
                            const recommendations = searchData.organic.slice(0, 10).map((result, index) => {
                                const company = serperExtractCompany(result);
                                const title = serperExtractJobTitle(result.title);
                                const salary = serperExtractSalary(result.snippet);
                                
                                // Calculate match score based on resume skills
                                const matchScore = calculateResumeMatchScore(result, resumeData);
                                
                                return {
                                    id: index + 1,
                                    title: title,
                                    company: company,
                                    location: resumeData.personalInfo?.location || 'Various',
                                    salary: salary,
                                    type: serperExtractJobType(result.snippet),
                                    description: result.snippet,
                                    requirements: serperExtractRequirements(result.snippet),
                                    postedDate: new Date().toISOString().split('T')[0],
                                    url: result.link,
                                    source: new URL(result.link).hostname.replace('www.', ''),
                                    matchScore: matchScore,
                                    whyMatch: generateResumeMatchReason(result, resumeData)
                                };
                            });
                            
                            setAiRecommendations(recommendations);
                        } else {
                            console.log('No job recommendations found from Serper.dev');
                            setAiRecommendations([]);
                        }
                    } catch (serperError) {
                        console.error('Serper.dev error:', serperError);
                        setAiRecommendations([]);
                    }
                } catch (error) {
                    console.error('Error generating recommendations:', error);
                    setAiRecommendations([]);
                } finally {
                    setIsLoadingRecommendations(false);
                }
            };
            
            // Helper function to calculate match score based on resume
            const calculateResumeMatchScore = (jobResult, resumeData) => {
                let score = 60; // Base score
                
                const jobText = (jobResult.title + ' ' + jobResult.snippet).toLowerCase();
                const resumeSkills = resumeData.skills?.technical || [];
                const resumeExperience = resumeData.experience || [];
                const resumeLocation = resumeData.personalInfo?.location || '';
                
                // Check for skill matches with higher weight for top skills
                let skillMatches = 0;
                resumeSkills.forEach((skill, index) => {
                    if (jobText.includes(skill.toLowerCase())) {
                        skillMatches++;
                        // Give more weight to top skills
                        const weight = index < 3 ? 8 : 5;
                        score += weight;
                    }
                });
                
                // Check for experience level match
                const recentJob = resumeExperience[0]?.position || '';
                if (recentJob && jobText.includes(recentJob.toLowerCase())) {
                    score += 15;
                }
                
                // Check for location match
                if (resumeLocation && jobText.includes(resumeLocation.toLowerCase().split(',')[0])) {
                    score += 10;
                }
                
                // Check for soft skills mentioned in summary
                const summary = resumeData.summary || '';
                if (summary.length > 50 && jobText.includes(summary.toLowerCase().substring(0, 50))) {
                    score += 5;
                }
                
                return Math.min(score, 95); // Cap at 95%
            };
            
            // Helper function to generate match reason
            const generateResumeMatchReason = (jobResult, resumeData) => {
                const jobText = (jobResult.title + ' ' + jobResult.snippet).toLowerCase();
                const resumeSkills = resumeData.skills?.technical || [];
                const matchedSkills = resumeSkills.filter(skill => 
                    jobText.includes(skill.toLowerCase())
                );
                
                // Get top matched skills
                if (matchedSkills.length > 0) {
                    const topSkills = matchedSkills.slice(0, 3).join(', ');
                    const count = matchedSkills.length;
                    if (count > 3) {
                        return `Matches your skills: ${topSkills} (+${count - 3} more)`;
                    }
                    return `Matches your skills: ${topSkills}`;
                }
                
                // Check for job title match
                const recentJob = resumeData.experience?.[0]?.position || '';
                if (recentJob && jobText.includes(recentJob.toLowerCase())) {
                    return `Matches your experience as ${recentJob}`;
                }
                
                // Check for soft skills match
                const softSkills = resumeData.skills?.soft || [];
                const matchedSoftSkills = softSkills.filter(skill => 
                    jobText.includes(skill.toLowerCase())
                );
                
                if (matchedSoftSkills.length > 0) {
                    return `Matches your ${matchedSoftSkills[0]} skills`;
                }
                
                // Check for location match
                const location = resumeData.personalInfo?.location || '';
                if (location && jobText.includes(location.toLowerCase().split(',')[0])) {
                    return `Located in ${location.split(',')[0]}`;
                }
                
                return 'Good match for your background';
            };
            
            // Handle personalized job search based on resume and filters
            const handlePersonalizedSearch = async (strategyType = null) => {
                if (!activeResume) {
                    alert('Please select a resume first');
                    return;
                }
                
                const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                const resumeData = savedResumes[activeResume];
                
                if (!resumeData) {
                    alert('Resume data not found');
                    return;
                }
                
                setIsSearchingPersonalized(true);
                
                try {
                    // Build search query from resume
                    const skills = resumeData.skills?.technical || [];
                    const experience = resumeData.experience || [];
                    const recentJob = experience[0]?.position || 'jobs';
                    // Use priority-based location logic
                    const location = getFinalLocationForSearch('personalized');
                    
                    let searchQuery;
                    
                    // If strategy is selected, use OpenAI to generate query
                    const strategyToUse = strategyType || selectedSearchStrategy;
                    if (strategyToUse) {
                        setIsGeneratingQuery(true);
                        try {
                            const result = await generateSearchQueryFromStrategy(strategyToUse, resumeData);
                            searchQuery = result.query;
                            setAiReasoning(result.reasoning); // Store the reasoning
                            console.log(`Generated search query for ${strategyToUse}:`, searchQuery);
                            console.log('AI Reasoning:', result.reasoning);
                            
                            // If OpenAI returns empty query, fall back to default
                            if (!searchQuery || searchQuery.trim() === '') {
                                console.log('OpenAI returned empty query, using default');
                                searchQuery = recentJob;
                                if (skills.length > 0) {
                                    searchQuery += ` ${skills.slice(0, 5).join(' ')}`;
                                }
                                setAiReasoning(null); // Clear reasoning if fallback
                            }
                        } catch (error) {
                            console.error('Error generating query:', error);
                            const errorMsg = error.message || 'Unknown error';
                            console.error('Full error details:', error);
                            alert(`Failed to generate search query: ${errorMsg}. Using default search.`);
                            // Fallback to default query building
                            searchQuery = recentJob;
                            if (skills.length > 0) {
                                searchQuery += ` ${skills.slice(0, 5).join(' ')}`;
                            }
                            setAiReasoning(null); // Clear reasoning on error
                        } finally {
                            setIsGeneratingQuery(false);
                        }
                    } else {
                        // Use existing default logic (no strategy selected)
                        searchQuery = recentJob;
                        // Add top 3 skills only (not 5) to keep query shorter
                        if (skills.length > 0) {
                            searchQuery += ` ${skills.slice(0, 3).join(' ')}`;
                        }
                        setAiReasoning(null); // Clear reasoning when no strategy is selected
                    }
                    
                    // Limit query length to prevent API errors (max 200 chars)
                    if (searchQuery.length > 200) {
                        console.warn('Query too long, truncating:', searchQuery);
                        searchQuery = searchQuery.substring(0, 200).trim();
                    }
                    
                    // Enhance query with better filter phrases (simplified)
                    const enhancedQuery = enhanceQueryWithFilters(searchQuery, resumeFilters);
                    
                    // Limit enhanced query length too (max 250 chars)
                    const finalQuery = enhancedQuery.length > 250 ? enhancedQuery.substring(0, 250).trim() : enhancedQuery;
                    
                    console.log('Searching personalized jobs with Serper.dev...');
                    console.log('Final search query:', finalQuery);
                    console.log('Query length:', finalQuery.length);
                    if (location) {
                        console.log('Using normalized location for personalized search:', location);
                        console.log('Resume location from data:', resumeData.personalInfo?.location);
                    }
                    
                    // Fetch more results for better client-side filtering (request 50-80 results)
                    let searchData;
                    try {
                        searchData = await SerperSearch.searchJobs(finalQuery, location, { num: 40 });
                        console.log('Serper API response:', searchData);
                    } catch (serperError) {
                        console.error('Serper API error:', serperError);
                        throw new Error(`Job search API failed: ${serperError.message || 'Unknown error'}`);
                    }
                    
                    if (!searchData) {
                        throw new Error('No response from job search API');
                    }
                    
                    // Also try fetching with options to get more results
                    let allResults = [];
                    if (searchData && searchData.organic && searchData.organic.length > 0) {
                        allResults = searchData.organic;
                        console.log(`Received ${allResults.length} results from Serper API`);
                        
                        // If we got results but less than 40, try to fetch more pages
                        if (allResults.length > 0 && allResults.length < 40) {
                            try {
                                // Try fetching page 2 for more results
                                const searchOptions = { num: 40, page: 2 };
                                const page2Data = await SerperSearch.searchJobs(finalQuery, location, searchOptions);
                                if (page2Data && page2Data.organic && page2Data.organic.length > 0) {
                                    allResults = [...allResults, ...page2Data.organic];
                                    console.log(`Added ${page2Data.organic.length} more results from page 2. Total: ${allResults.length}`);
                                }
                            } catch (e) {
                                console.log('Could not fetch additional page, using available results:', e);
                            }
                        }
                    } else {
                        console.warn('No results from Serper API. Response:', searchData);
                    }
                    
                    if (allResults.length > 0) {
                        // First, transform all results to job objects with extracted data
                        // Filter out any null/undefined results first
                        const validResults = allResults.filter(result => result && typeof result === 'object');
                        console.log(`Processing ${validResults.length} valid results out of ${allResults.length} total`);
                        
                        if (validResults.length === 0) {
                            throw new Error('Received results from API but none were valid');
                        }
                        
                        const allJobs = validResults.map((result, index) => {
                            try {
                                if (!result || typeof result !== 'object') {
                                    throw new Error('Invalid result object');
                                }
                                
                                const company = serperExtractCompany(result);
                                const title = serperExtractJobTitle(result.title);
                                const salary = serperExtractSalary(result.snippet);
                                const jobType = serperExtractJobType(result.snippet); // Extract from snippet
                                
                                // Safely extract source from URL
                                let source = 'Unknown';
                                if (result.link) {
                                    try {
                                        source = new URL(result.link).hostname.replace('www.', '');
                                    } catch (urlError) {
                                        console.warn('Invalid URL:', result.link, urlError);
                                        // Try to extract domain manually
                                        const urlMatch = result.link.match(/https?:\/\/([^\/]+)/);
                                        if (urlMatch) {
                                            source = urlMatch[1].replace('www.', '');
                                        }
                                    }
                                }
                                
                                // Create job object with all data needed for filtering
                                const jobObj = {
                                    id: index + 1,
                                    title: title || 'Untitled',
                                    company: company || 'Unknown Company',
                                    location: location || 'Various',
                                    salary: salary || 'Competitive',
                                    type: jobType || 'Full-time', // Use extracted type
                                    description: result.snippet || '',
                                    snippet: result.snippet || '', // Keep snippet for filtering
                                    requirements: serperExtractRequirements(result.snippet),
                                    postedDate: new Date().toISOString().split('T')[0],
                                    url: result.link || '#',
                                    source: source,
                                    rawResult: result // Keep raw result for additional parsing if needed
                                };
                                
                                return jobObj;
                            } catch (jobError) {
                                console.error('Error processing job result:', jobError, result);
                                // Return a minimal valid job object
                                return {
                                    id: index + 1,
                                    title: result.title || 'Untitled',
                                    company: 'Unknown Company',
                                    location: location || 'Various',
                                    salary: 'Competitive',
                                    type: 'Full-time',
                                    description: result.snippet || '',
                                    snippet: result.snippet || '',
                                    requirements: 'See details in job description.',
                                    postedDate: new Date().toISOString().split('T')[0],
                                    url: result.link || '#',
                                    source: 'Unknown',
                                    rawResult: result
                                };
                            }
                        });
                        
                        // Client-side filtering based on filters
                        let filteredJobs = allJobs.filter(job => filterJobByCriteria(job, resumeFilters));
                        
                        console.log(`Fetched ${allJobs.length} jobs, filtered to ${filteredJobs.length} matching criteria`);
                        
                        // If filtering removed all results, show all jobs but warn the user
                        if (filteredJobs.length === 0 && allJobs.length > 0) {
                            console.warn(`No jobs matched strict filter criteria. Showing all ${allJobs.length} jobs.`);
                            // Still show results, just without strict filtering
                            filteredJobs = allJobs.slice(0, 50); // Take more to ensure variety
                        }
                        
                        // Take top 30 filtered jobs and add match scores
                        const finalJobs = filteredJobs.slice(0, 30).map((job, index) => ({
                            ...job,
                            id: index + 1,
                            whyMatch: generateResumeMatchReason(job.rawResult || { title: job.title, snippet: job.snippet }, resumeData),
                            matchScore: calculateResumeMatchScore(job.rawResult || { title: job.title, snippet: job.snippet }, resumeData)
                        }));
                        
                        setPersonalizedJobResults(finalJobs);
                        console.log(`✅ Successfully set ${finalJobs.length} personalized job results`);
                        console.log('Sample job:', finalJobs[0]);
                        
                        // Only show alert if we truly got no results from API
                        if (finalJobs.length === 0 && allJobs.length === 0) {
                            // This case is already handled by the "else" block below
                        }
                    } else {
                        alert('No jobs found. Try adjusting your search criteria or filters.');
                        setPersonalizedJobResults([]);
                    }
                } catch (error) {
                    console.error('Error searching personalized jobs:', error);
                    console.error('Error stack:', error.stack);
                    // Safely get searchQuery - it might not be defined if error happens early
                    let searchQueryValue = 'not set';
                    try {
                        if (typeof searchQuery !== 'undefined') {
                            searchQueryValue = searchQuery;
                        }
                    } catch (e) {
                        // searchQuery not accessible
                    }
                    
                    console.error('Error details:', {
                        message: error.message,
                        name: error.name,
                        activeResume: activeResume,
                        searchQuery: searchQueryValue,
                        location: location || 'not set',
                        strategy: strategyToUse || 'none'
                    });
                    
                    // Show more specific error message
                    let errorMessage = 'Failed to search for jobs. ';
                    if (error.message) {
                        errorMessage += `Error: ${error.message}`;
                    } else {
                        errorMessage += 'Please check the console for details.';
                    }
                    alert(errorMessage);
                    setPersonalizedJobResults([]);
                } finally {
                    setIsSearchingPersonalized(false);
                    setIsGeneratingQuery(false);
                }
            };
            
            // Helper to get currency symbol for a location
            const getCurrencySymbol = (location) => {
                if (!location) return '$';
                const loc = location.toLowerCase();
                if (loc.includes('india')) return '₹';
                if (loc.includes('uk') || loc.includes('united kingdom')) return '£';
                if (loc.includes('europe')) return '€';
                if (loc.includes('australia')) return 'A$';
                if (loc.includes('canada')) return 'C$';
                return '$';
            };
            
            // Enhanced query construction with better filter phrases (simplified to avoid long queries)
            const enhanceQueryWithFilters = (baseQuery, filters) => {
                let enhancedQuery = baseQuery;
                
                // Simplified work type filter (shorter phrases)
                if (filters.workType && filters.workType !== 'Any') {
                    const workTypeMap = {
                        'Full-time': 'full-time',
                        'Part-time': 'part-time',
                        'Contract': 'contract',
                        'Internship': 'internship'
                    };
                    const workTypePhrase = workTypeMap[filters.workType] || filters.workType.toLowerCase();
                    enhancedQuery += ` ${workTypePhrase}`;
                }
                
                // Simplified remote/on-site filter
                if (filters.remote && filters.remote !== 'Any') {
                    if (filters.remote === 'Remote') {
                        enhancedQuery += ' remote';
                    } else if (filters.remote === 'On-site') {
                        enhancedQuery += ' on-site';
                    } else if (filters.remote === 'Hybrid') {
                        enhancedQuery += ' hybrid';
                    }
                }
                
                // Simplified experience level filter
                if (filters.experienceLevel && filters.experienceLevel !== 'Any level') {
                    const experienceMap = {
                        'Entry Level': 'entry-level',
                        'Mid Level': 'mid-level',
                        'Senior Level': 'senior',
                        'Executive': 'executive'
                    };
                    const experiencePhrase = experienceMap[filters.experienceLevel] || filters.experienceLevel.toLowerCase();
                    enhancedQuery += ` ${experiencePhrase}`;
                }
                
                return enhancedQuery;
            };
            
            // Client-side filtering based on job description
            const filterJobByCriteria = (job, filters) => {
                const jobText = ((job.title || '') + ' ' + (job.description || '') + ' ' + (job.snippet || '')).toLowerCase();
                
                // Check work type
                if (filters.workType && filters.workType !== 'Any') {
                    const workTypePatterns = {
                        'Full-time': ['full-time', 'full time', 'permanent', 'fulltime'],
                        'Part-time': ['part-time', 'part time', 'parttime'],
                        'Contract': ['contract', 'contractor', 'contract role', 'freelance'],
                        'Internship': ['intern', 'internship', 'intern position', 'co-op']
                    };
                    const patterns = workTypePatterns[filters.workType] || [];
                    const matchesWorkType = patterns.some(pattern => jobText.includes(pattern));
                    if (!matchesWorkType) return false;
                }
                
                // Check remote/on-site/hybrid
                if (filters.remote && filters.remote !== 'Any') {
                    if (filters.remote === 'Remote') {
                        const remotePatterns = ['remote', 'work from home', 'wfh', 'work remotely', 'remote position', 'work from anywhere'];
                        const matchesRemote = remotePatterns.some(pattern => jobText.includes(pattern));
                        // Exclude if it mentions on-site or hybrid
                        const excludesOnsite = !jobText.includes('on-site') && !jobText.includes('on site') && !jobText.includes('office-based');
                        if (!matchesRemote || !excludesOnsite) return false;
                    } else if (filters.remote === 'On-site') {
                        const onsitePatterns = ['on-site', 'on site', 'office-based', 'in office', 'in-person'];
                        const matchesOnsite = onsitePatterns.some(pattern => jobText.includes(pattern));
                        // Exclude if it clearly mentions remote
                        const excludesRemote = !jobText.includes('remote') && !jobText.includes('work from home');
                        if (!matchesOnsite || !excludesRemote) return false;
                    } else if (filters.remote === 'Hybrid') {
                        const hybridPatterns = ['hybrid', 'hybrid work', 'hybrid position', 'flexible work', 'combination'];
                        const matchesHybrid = hybridPatterns.some(pattern => jobText.includes(pattern));
                        if (!matchesHybrid) {
                            // If not explicitly hybrid but has both remote and on-site mentions, consider it hybrid
                            const hasRemote = jobText.includes('remote') || jobText.includes('work from home');
                            const hasOnsite = jobText.includes('on-site') || jobText.includes('office');
                            if (!hasRemote || !hasOnsite) return false;
                        }
                    }
                }
                
                // Check experience level
                if (filters.experienceLevel && filters.experienceLevel !== 'Any level') {
                    const experiencePatterns = {
                        'Entry Level': ['entry-level', 'entry level', 'junior', 'graduate', 'new graduate', 'recent graduate', 'associate', '0-2 years', '0-1 years'],
                        'Mid Level': ['mid-level', 'mid level', 'experienced', '2-5 years', '3+ years', '3-7 years', 'intermediate'],
                        'Senior Level': ['senior', 'senior level', '5+ years', '7+ years', 'lead', 'expert', 'principal'],
                        'Executive': ['executive', 'director', 'vp', 'vice president', 'c-level', 'chief', 'head of']
                    };
                    const patterns = experiencePatterns[filters.experienceLevel] || [];
                    const matchesExperience = patterns.some(pattern => jobText.includes(pattern));
                    
                    // If no explicit experience match, check for disqualifying patterns
                    if (!matchesExperience && filters.experienceLevel === 'Entry Level') {
                        // Exclude if it mentions senior, lead, director, etc.
                        const disqualifying = ['senior', 'lead', 'principal', 'director', 'manager', '5+ years', '7+ years'];
                        if (disqualifying.some(pattern => jobText.includes(pattern))) return false;
                    }
                    
                    // Only return false if we're strict about experience and no match found
                    // For more lenient matching, we can allow jobs through even without explicit experience match
                    // This helps when job descriptions don't explicitly state experience level
                    if (!matchesExperience && patterns.length > 0) {
                        // Give it a chance - maybe the job title indicates the level
                        const titleLower = (job.title || '').toLowerCase();
                        const titleMatch = patterns.some(pattern => titleLower.includes(pattern));
                        if (!titleMatch) {
                            // Last chance: check if experience requirements are in a format we can parse
                            const yearPattern = /\d+\s*\+?\s*years?/g;
                            const yearsMatch = jobText.match(yearPattern);
                            if (yearsMatch) {
                                const years = yearsMatch.map(m => parseInt(m.match(/\d+/)?.[0] || '0'));
                                const maxYears = Math.max(...years);
                                if (filters.experienceLevel === 'Entry Level' && maxYears > 3) return false;
                                if (filters.experienceLevel === 'Mid Level' && (maxYears < 2 || maxYears > 8)) return false;
                                if (filters.experienceLevel === 'Senior Level' && maxYears < 5) return false;
                                if (filters.experienceLevel === 'Executive' && maxYears < 8) return false;
                            } else {
                                // No explicit experience found - allow through for better coverage
                                // This helps jobs that don't explicitly state requirements
                            }
                        }
                    }
                }
                
                return true; // Passed all filters
            };
            
            // Check for saved resume and detect IP location
            React.useEffect(() => {
                const savedResumes = JSON.parse(localStorage.getItem('parsed_resumes') || '{}');
                setUploadedResumes(savedResumes);
                
                // Load active resume
                const activeResumeName = localStorage.getItem('active_resume_for_job_search');
                if (activeResumeName && savedResumes[activeResumeName]) {
                    setActiveResume(activeResumeName);
                    setResumeData(savedResumes[activeResumeName]);
                    // Generate recommendations asynchronously
                    setTimeout(() => {
                        generateAIRecommendations(savedResumes[activeResumeName]);
                    }, 100);
                } else if (Object.keys(savedResumes).length > 0) {
                    // Fall back to first resume
                    const firstResumeName = Object.keys(savedResumes)[0];
                    setActiveResume(firstResumeName);
                    setResumeData(savedResumes[firstResumeName]);
                    setTimeout(() => {
                        generateAIRecommendations(savedResumes[firstResumeName]);
                    }, 100);
                }
                
                // Load saved alerts
                const savedAlerts = JSON.parse(localStorage.getItem('job_alerts') || '[]');
                setUserAlerts(savedAlerts);
                
                // Detect user location from IP
                const savedLocation = localStorage.getItem('ip_detected_location');
                const timestamp = localStorage.getItem('ip_location_timestamp');
                
                if (savedLocation && timestamp) {
                    const age = Date.now() - parseInt(timestamp);
                    const twentyFourHours = 24 * 60 * 60 * 1000;
                    
                    if (age < twentyFourHours) {
                        // Use cached location (valid for 24 hours)
                        setIpDetectedLocation(savedLocation);
                        console.log('Using cached IP location:', savedLocation);
                    } else {
                        // Refresh location after 24 hours
                        detectUserLocationFromIP();
                    }
                } else {
                    // First time - detect location
                    detectUserLocationFromIP();
                }
                
                // Load search history
                const savedHistory = JSON.parse(localStorage.getItem('job_search_history') || '[]');
                setSearchHistory(savedHistory);
                
                // Close dropdowns when clicking outside
                const handleClickOutside = (event) => {
                    if (!event.target.closest('.filter-dropdown-container') && 
                        !event.target.closest('.job-title-suggestions-container') &&
                        !event.target.closest('.location-suggestions-container')) {
                        setShowFilterDropdown({
                            datePosted: false,
                            experienceLevel: false,
                            remote: false,
                            salaryRange: false
                        });
                        setShowLocationSuggestions(false);
                        setShowJobTitleSuggestions(false);
                    }
                };
                
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            // Quick search function with Serper.dev (real job listings)
            const handleQuickSearch = async () => {
                if (!quickSearchJobTitle.trim()) {
                    alert('Please enter a job title');
                    return;
                }
                
                setIsSearching(true);
                setCurrentPage(1);
                
                try {
                    // Build search query with filters and resume context
                    let searchQuery = `${quickSearchJobTitle} jobs`;
                    
                    // Enhance search query if resume is available
                    if (resumeData) {
                        const skills = resumeData.skills?.technical?.slice(0, 3).join(', ') || '';
                        if (skills) {
                            searchQuery += ` with ${skills}`;
                        }
                    }
                    
                    if (quickSearchLocation) {
                        searchQuery += ` in ${quickSearchLocation}`;
                    }
                    
                    // Add experience level filter
                    if (filters.experienceLevel !== 'Any level') {
                        searchQuery += ` ${filters.experienceLevel}`;
                    }
                    
                    // Add remote filter
                    if (filters.remote === 'Remote') {
                        searchQuery += ' remote';
                    } else if (filters.remote === 'On-site') {
                        searchQuery += ' on-site';
                    } else if (filters.remote === 'Hybrid') {
                        searchQuery += ' hybrid';
                    }
                    
                    // Add salary filter
                    if (filters.salaryRange !== 'Any') {
                        searchQuery += ` ${filters.salaryRange} salary`;
                    }
                    
                    console.log('Searching for real job listings with Serper.dev...');
                    let finalJobs = [];
                    
                    // Get final location with priority logic (Quick Search location or IP location)
                    const finalLocation = getFinalLocationForSearch('quick');
                    if (finalLocation) {
                        console.log('Using location for quick search:', finalLocation);
                    }
                    
                    try {
                        // STEP 1: Get REAL job listings from Serper.dev
                        const searchData = await SerperSearch.searchJobs(
                            quickSearchJobTitle,
                            finalLocation
                        );
                        
                        if (searchData && searchData.organic && searchData.organic.length > 0) {
                            console.log(`Found ${searchData.organic.length} real job listings`);
                            
                            // STEP 2: Transform Serper.dev results to your job format
                            finalJobs = searchData.organic.map((result, index) => {
                                const company = serperExtractCompany(result);
                                const title = serperExtractJobTitle(result.title);
                                const salary = serperExtractSalary(result.snippet);
                                
                                return {
                                    id: index + 1,
                                    title: title,
                                    company: company,
                                    location: quickSearchLocation || 'Various',
                                    salary: salary,
                                    type: serperExtractJobType(result.snippet),
                                    description: result.snippet,
                                    requirements: serperExtractRequirements(result.snippet),
                                    postedDate: new Date().toISOString().split('T')[0],
                                    url: result.link,
                                    source: new URL(result.link).hostname.replace('www.', ''),
                                    whyMatch: generateWhyMatch(quickSearchJobTitle),
                                    matchScore: serperCalculateMatchScore(result, filters)
                                };
                            });
                        } else {
                            console.log('No job listings found from Serper.dev');
                        }
                    } catch (serperError) {
                        console.error('Serper.dev error:', serperError);
                        // Fallback to OpenAI-generated listings if Serper fails
                    }
                    
                    // Fallback if Serper.dev didn't return results - use OpenAI
                    if (finalJobs.length === 0) {
                        console.log('Falling back to AI-generated job listings...');
                        const openAIApiKey = localStorage.getItem('openai_api_key');
                        
                        if (openAIApiKey) {
                            try {
                                const aiResponse = await fetch('https://api.openai.com/v1/chat/completions', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'Authorization': `Bearer ${openAIApiKey}`
                                    },
                                    body: JSON.stringify({
                                        model: 'gpt-4o-mini',
                                        messages: [
                                            {
                                                role: 'system',
                                                content: 'Generate realistic job listings with real company names and proper URLs to real job boards.'
                                            },
                                            {
                                                role: 'user',
                                                content: `Generate 10 realistic ${quickSearchJobTitle} job listings for ${quickSearchLocation || 'any location'}. Include real company names and proper job board URLs (linkedin.com, indeed.com, glassdoor.com). Return ONLY a valid JSON array with complete URLs.`
                                            }
                                        ],
                                        temperature: 0.7,
                                        max_tokens: 3000
                                    })
                                });
                                
                                const aiData = await aiResponse.json();
                                const content = aiData.choices[0]?.message?.content;
                                const jsonMatch = content.match(/\[[\s\S]*\]/);
                                
                                if (jsonMatch) {
                                    finalJobs = JSON.parse(jsonMatch[0]).map((job, index) => ({
                                        id: index + 1,
                                        title: job.title || quickSearchJobTitle,
                                        company: job.company || 'Company',
                                        location: job.location || quickSearchLocation || 'Remote',
                                        salary: job.salary || generateSalaryRange(filters.salaryRange),
                                        type: job.type || 'Full-time',
                                        description: job.description || `We are looking for a ${quickSearchJobTitle} to join our team.`,
                                        requirements: job.requirements || 'Relevant experience and skills required.',
                                        postedDate: job.postedDate || new Date().toISOString().split('T')[0],
                                        url: job.url || '#',
                                        source: extractSource(job.url),
                                        whyMatch: generateWhyMatch(quickSearchJobTitle),
                                        matchScore: calculateSimpleMatchScore(filters)
                                    }));
                                }
                            } catch (e) {
                                console.error('OpenAI error:', e);
                            }
                        }
                    }
                    
                    // Final fallback to mock data if all else fails
                    if (finalJobs.length === 0) {
                        finalJobs = generateFallbackJobs(quickSearchJobTitle, quickSearchLocation, filters);
                    }
                    
                    // Save to search history
                    const historyItem = {
                        jobTitle: quickSearchJobTitle,
                        location: quickSearchLocation,
                        filters: filters,
                        timestamp: new Date().toISOString(),
                        resultsCount: finalJobs.length
                    };
                    const updatedHistory = [historyItem, ...searchHistory.slice(0, 9)];
                    setSearchHistory(updatedHistory);
                    localStorage.setItem('job_search_history', JSON.stringify(updatedHistory));
                    
                    setJobResults(finalJobs);
                } catch (error) {
                    console.error('Error searching jobs:', error);
                    alert('Failed to search for jobs. Please try again.');
                } finally {
                    setIsSearching(false);
                }
            };
            
            // Helper functions for Serper.dev integration
            const serperExtractCompany = (result) => {
                // Extract from title like "Software Engineer - Google | LinkedIn"
                const titleParts = result.title.split(' - ');
                if (titleParts.length > 1 && titleParts[1].includes('|')) {
                    const company = titleParts[1].split('|')[0].trim();
                    return company;
                }
                
                // Or extract from displayedLink: "jobs.google.com"
                try {
                    const host = new URL(result.link).hostname;
                    const domain = host.split('.')[1];
                    if (domain) {
                        return domain.charAt(0).toUpperCase() + domain.slice(1);
                    }
                } catch (e) {
                    console.error('Error extracting company:', e);
                }
                
                return 'Company';
            };
            
            const serperExtractJobTitle = (title) => {
                // Remove company names and job boards: "Software Engineer - Google | Indeed"
                return title.split(' - ')[0].split('|')[0].trim();
            };
            
            const serperExtractSalary = (snippet) => {
                if (!snippet) return 'Competitive';
                
                // Use regex to find salary ranges in snippet
                const salaryPatterns = [
                    /\$[\d,]+(\s*-\s*\$[\d,]+)?/g,
                    /([\d,]+)\s*-\s*([\d,]+)\s*(USD|dollars)/gi,
                    /(salary|pay):\s*\$?[\d,]+(-\$?[\d,]+)?/gi
                ];
                
                for (const pattern of salaryPatterns) {
                    const match = snippet.match(pattern);
                    if (match && match[0]) {
                        return match[0].trim();
                    }
                }
                
                return 'Competitive';
            };
            
            const serperExtractJobType = (snippet) => {
                if (!snippet) return 'Full-time';
                
                const lowerSnippet = snippet.toLowerCase();
                if (lowerSnippet.includes('full-time') || lowerSnippet.includes('fulltime')) {
                    return 'Full-time';
                } else if (lowerSnippet.includes('part-time') || lowerSnippet.includes('parttime')) {
                    return 'Part-time';
                } else if (lowerSnippet.includes('contract')) {
                    return 'Contract';
                } else if (lowerSnippet.includes('intern')) {
                    return 'Internship';
                }
                return 'Full-time'; // Default
            };
            
            const serperExtractRequirements = (snippet) => {
                // Extract key requirements from snippet (first 200 chars)
                if (!snippet) return 'See details in job description.';
                
                if (snippet.length > 200) {
                    return snippet.substring(0, 197) + '...';
                }
                return snippet;
            };
            
            const serperCalculateMatchScore = (result, filters) => {
                let score = 85; // Base score for real listings
                
                // Increase score for premium job boards
                const link = result.link.toLowerCase();
                if (link.includes('linkedin.com')) score += 10;
                if (link.includes('indeed.com')) score += 8;
                if (link.includes('glassdoor.com')) score += 7;
                if (link.includes('monster.com')) score += 6;
                if (link.includes('dice.com')) score += 5;
                
                // Increase score if title/snippet matches filters
                const lowerTitle = result.title.toLowerCase();
                const lowerSnippet = (result.snippet || '').toLowerCase();
                
                if (filters.remote !== 'Any') {
                    if (lowerTitle.includes('remote') || lowerSnippet.includes('remote')) score += 5;
                    if (filters.remote === 'On-site' && !lowerTitle.includes('remote')) score += 3;
                }
                
                return Math.min(score, 100);
            };
            
            // Parse web search results into job format
            const parseWebSearchResults = (searchResults, jobTitle, location, activeFilters) => {
                const jobs = [];
                
                if (searchResults && Array.isArray(searchResults) && searchResults.length > 0) {
                    // Process real web search results
                    searchResults.slice(0, 10).forEach((result, index) => {
                        // Extract title and company from result
                        let title = result.title || '';
                        let company = 'Company';
                        
                        // Try to extract company name from title (e.g., "Software Engineer - TechCorp Inc - San Francisco, CA")
                        if (title.includes(' - ')) {
                            const parts = title.split(' - ');
                            title = parts[0] || title;
                            company = parts[1] || 'Company';
                        }
                        
                        // Extract location from title or use provided location
                        let extractedLocation = location;
                        if (!extractedLocation && result.title) {
                            const locationMatch = result.title.match(/[-,\s]+([A-Z][a-z]+,\s*[A-Z]{2})\s*$/);
                            if (locationMatch) extractedLocation = locationMatch[1];
                        }
                        
                        // Extract salary from snippet if available
                        let salary = generateSalaryRange(activeFilters.salaryRange);
                        if (result.snippet) {
                            const salaryMatch = result.snippet.match(/\$[\d,]+(?:k|\d+)(?:\s*-\s*\$[\d,]+(?:k|\d+))?/);
                            if (salaryMatch) salary = salaryMatch[0];
                        }
                        
                        const job = {
                            id: index + 1,
                            title: title || jobTitle,
                            company: company,
                            location: extractedLocation || 'View listing',
                            salary: salary,
                            type: extractJobType(result.snippet) || 'Full-time',
                            description: result.snippet || result.description || `We are looking for a ${jobTitle} to join our team.`,
                            requirements: extractRequirements(result.snippet || jobTitle),
                            postedDate: new Date().toISOString().split('T')[0],
                            url: result.url || result.link || '#',
                            source: extractSource(result.url || result.link),
                            whyMatch: generateWhyMatch(jobTitle),
                            matchScore: calculateSimpleMatchScore(activeFilters)
                        };
                        jobs.push(job);
                    });
                }
                
                // If no results, generate placeholder jobs
                if (jobs.length === 0) {
                    for (let i = 0; i < 5; i++) {
                        jobs.push({
                            id: i + 1,
                            title: jobTitle,
                            company: `Company ${i + 1}`,
                            location: location || 'Remote',
                            salary: generateSalaryRange(activeFilters.salaryRange),
                            type: 'Full-time',
                            description: `We are looking for a ${jobTitle} to join our growing team.`,
                            requirements: 'Relevant experience and skills required.',
                            postedDate: new Date().toISOString().split('T')[0],
                            url: '#',
                            source: 'Job Board',
                            whyMatch: 'This role matches your experience and skills.',
                            matchScore: calculateSimpleMatchScore(activeFilters)
                        });
                    }
                }
                
                return jobs;
            };
            
            // Helper functions
            const extractJobType = (text) => {
                if (!text) return 'Full-time';
                const lowerText = text.toLowerCase();
                if (lowerText.includes('part-time') || lowerText.includes('part time')) return 'Part-time';
                if (lowerText.includes('contract') || lowerText.includes('contractor')) return 'Contract';
                if (lowerText.includes('intern')) return 'Internship';
                return 'Full-time';
            };
            
            const extractJobTitle = (result) => {
                return result.title?.split('-')[0]?.trim() || result.title;
            };
            
            const extractCompany = (result) => {
                return result.title?.split('-').pop()?.trim() || 'Company';
            };
            
            const extractLocation = (result) => {
                if (result.location) return result.location;
                if (result.url?.includes('indeed.com')) return 'View on Indeed';
                if (result.url?.includes('linkedin.com')) return 'View on LinkedIn';
                return 'Remote';
            };
            
            const extractRequirements = (text) => {
                if (!text) return 'Relevant experience and skills required.';
                
                // Try to extract requirements from text
                const requirements = [];
                const techKeywords = ['experience', 'skills', 'knowledge', 'proficiency', 'ability'];
                
                if (text.toLowerCase().includes('engineer') || text.toLowerCase().includes('developer')) {
                    requirements.push('Programming skills', 'Technical expertise', 'Problem-solving');
                }
                if (text.toLowerCase().includes('manage')) {
                    requirements.push('Leadership skills', 'Team management', 'Strategic thinking');
                }
                if (text.toLowerCase().includes('data') || text.toLowerCase().includes('analyst')) {
                    requirements.push('Analytical skills', 'Data analysis', 'Statistical knowledge');
                }
                
                // Base requirements
                if (!requirements.length) {
                    requirements.push('Relevant experience', 'Strong communication skills', 'Team collaboration');
                }
                
                return requirements.join(', ');
            };
            
            const extractSource = (url) => {
                if (!url) return 'Job Board';
                if (url.includes('linkedin.com')) return 'LinkedIn';
                if (url.includes('indeed.com')) return 'Indeed';
                if (url.includes('glassdoor.com')) return 'Glassdoor';
                if (url.includes('monster.com')) return 'Monster';
                return 'Job Board';
            };
            
            const generateSalaryRange = (filter) => {
                switch (filter) {
                    case '$50k - $80k': return '$50k - $80k';
                    case '$80k - $120k': return '$80k - $120k';
                    case '$120k+': return '$120k - $180k';
                    default: return '$60k - $100k';
                }
            };
            
            const generateWhyMatch = (jobTitle) => {
                const reasons = [
                    `This ${jobTitle} role aligns with your skills and experience.`,
                    `Your background matches the requirements for this ${jobTitle} position.`,
                    `This opportunity offers growth in the ${jobTitle} field.`,
                    `Your expertise makes you a strong candidate for this ${jobTitle} role.`
                ];
                return reasons[Math.floor(Math.random() * reasons.length)];
            };
            
            const calculateSimpleMatchScore = (filters) => {
                let score = 70;
                if (filters.experienceLevel !== 'Any level') score += 10;
                if (filters.remote !== 'Any') score += 5;
                if (filters.salaryRange !== 'Any') score += 5;
                return Math.min(score, 98);
            };
            
            // Format salary from JSearch API
            const formatSalary = (minSalary, maxSalary, currency = 'USD') => {
                if (!minSalary && !maxSalary) return null;
                const formatAmount = (amt) => {
                    if (amt >= 1000) return `$${(amt / 1000).toFixed(0)}k`;
                    return `$${amt}`;
                };
                
                if (minSalary && maxSalary) {
                    return `${formatAmount(minSalary)} - ${formatAmount(maxSalary)}`;
                }
                if (minSalary) return `${formatAmount(minSalary)}+`;
                if (maxSalary) return `Up to ${formatAmount(maxSalary)}`;
                return null;
            };
            
            // Format date from JSearch API
            const formatDate = (dateString) => {
                if (!dateString) return new Date().toISOString().split('T')[0];
                const date = new Date(dateString);
                return date.toISOString().split('T')[0];
            };
            
            // Extract job requirements from description
            const extractJobRequirements = (description, highlights) => {
                if (!description && !highlights) return 'Relevant experience and skills required.';
                
                const reqs = [];
                const text = description || (highlights?.map(h => h).join(' ') || '');
                
                // Extract key requirements
                if (text.toLowerCase().includes('experience') || text.toLowerCase().includes('years')) {
                    reqs.push('Relevant experience');
                }
                if (text.toLowerCase().includes('degree') || text.toLowerCase().includes('education')) {
                    reqs.push('Education/degree');
                }
                if (text.toLowerCase().includes('skill') || text.toLowerCase().includes('proficient')) {
                    reqs.push('Technical skills');
                }
                if (text.toLowerCase().includes('communicat') || text.toLowerCase().includes('team')) {
                    reqs.push('Communication skills');
                }
                
                return reqs.length > 0 ? reqs.join(', ') : 'Experience and skills required';
            };
            
            // Generate fallback jobs if web search fails
            const generateFallbackJobs = (jobTitle, location, filters) => {
                const companies = ['TechCorp', 'StartupXYZ', 'Global Solutions', 'Innovation Labs', 'Data Systems Inc'];
                const jobs = [];
                
                for (let i = 0; i < 5; i++) {
                    jobs.push({
                        id: i + 1,
                        title: jobTitle,
                        company: companies[i] || `Company ${i + 1}`,
                        location: location || 'Remote',
                        salary: generateSalaryRange(filters.salaryRange),
                        type: 'Full-time',
                        description: `We are looking for a ${jobTitle} to join our growing team. This role offers an exciting opportunity to work on challenging projects and advance your career.`,
                        requirements: 'Relevant experience and skills required.',
                        postedDate: new Date().toISOString().split('T')[0],
                        url: `https://example.com/job/${i + 1}`,
                        source: ['LinkedIn', 'Indeed', 'Glassdoor'][i % 3],
                        whyMatch: 'This role matches your experience and skills.',
                        matchScore: calculateSimpleMatchScore(filters)
                    });
                }
                return jobs;
            };
            
            // Calculate AI match score
            const calculateMatchScore = async (jobDescription, jobRequirements) => {
                if (!resumeData) return 75; // Default if no resume
                
                try {
                    const apiKey = localStorage.getItem('openai_api_key');
                    if (!apiKey) return 75;
                    
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [{
                                role: 'user',
                                content: `Compare this resume with this job posting and calculate a match score 0-100.

RESUME: ${JSON.stringify(resumeData)}
JOB DESCRIPTION: ${jobDescription}
REQUIREMENTS: ${jobRequirements}

Return ONLY a number between 0-100 representing the match percentage.`
                            }],
                            temperature: 0.3,
                            max_tokens: 50
                        })
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        const score = parseInt(data.choices[0]?.message?.content || '75');
                        return isNaN(score) ? 75 : score;
                    }
                } catch (error) {
                    console.error('Error calculating match:', error);
                }
                
                return 75;
            };
            
            // Generate or fetch company data
            const fetchCompanyData = async (companyName) => {
                setIsLoadingCompanyData(true);
                try {
                    // Generate realistic company data based on company name
                    // In production, this would fetch from an API like Glassdoor, LinkedIn, or Serper
                    const generateCompanyDetails = (name) => {
                        const industries = ['Technology', 'Finance', 'Healthcare', 'Retail', 'Manufacturing', 'Consulting', 'Education', 'Entertainment'];
                        const sizes = ['1-50 Employees', '51-200 Employees', '201-500 Employees', '501-1000 Employees', '1001-5000 Employees', '5001-10000 Employees', '10000+ Employees'];
                        const locations = ['San Francisco, CA', 'New York, NY', 'Austin, TX', 'Seattle, WA', 'Boston, MA', 'Chicago, IL', 'Los Angeles, CA'];
                        
                        const industry = industries[Math.floor(Math.random() * industries.length)];
                        const size = sizes[Math.floor(Math.random() * sizes.length)];
                        const location = locations[Math.floor(Math.random() * locations.length)];
                        const rating = (Math.random() * 1.5 + 3.5).toFixed(1); // 3.5-5.0
                        
                        return {
                            name: name,
                            rating: parseFloat(rating),
                            review_count: Math.floor(Math.random() * 50000 + 1000),
                            salary_count: Math.floor(Math.random() * 200000 + 10000),
                            job_count: Math.floor(Math.random() * 5000 + 100),
                            headquarters_location: location,
                            company_size: size,
                            industry: industry,
                            website: `https://www.${name.toLowerCase().replace(/\s+/g, '')}.com`,
                            company_type: Math.random() > 0.5 ? 'Company - Public' : 'Company - Private',
                            revenue: Math.random() > 0.5 ? '$10M - $50M' : Math.random() > 0.5 ? '$50M - $200M' : '$200M+',
                            year_founded: Math.floor(Math.random() * 60 + 1960),
                            ceo: 'Chief Executive Officer',
                            ceo_rating: (Math.random() * 0.5 + 0.7).toFixed(2),
                            compensation_and_benefits_rating: (Math.random() * 1 + 3.5).toFixed(1),
                            culture_and_values_rating: (Math.random() * 1 + 3.5).toFixed(1),
                            work_life_balance_rating: (Math.random() * 1 + 3.5).toFixed(1),
                            career_opportunities_rating: (Math.random() * 1 + 3.5).toFixed(1),
                            company_description: `${name} is a leading company in the ${industry} sector, committed to innovation and excellence. We provide outstanding career opportunities and value our employees' growth and development.`
                        };
                    };
                    
                    const generateReviews = () => {
                        const reviews = [];
                        const pros = [
                            'Great work-life balance and flexible hours',
                            'Excellent benefits package and competitive salary',
                            'Supportive management and team environment',
                            'Opportunities for professional growth and development',
                            'Innovative projects and cutting-edge technology',
                            'Collaborative and inclusive company culture'
                        ];
                        const cons = [
                            'Fast-paced environment can be challenging',
                            'Some departments need better communication',
                            'Occasional overtime required during peak periods',
                            'Limited remote work options in some roles'
                        ];
                        const summaries = [
                            'Great company with amazing culture',
                            'Solid place to grow your career',
                            'Challenging but rewarding work',
                            'Good benefits and supportive team',
                            'Room for improvement but overall positive'
                        ];
                        
                        for (let i = 0; i < 3; i++) {
                            reviews.push({
                                summary: summaries[Math.floor(Math.random() * summaries.length)],
                                pros: pros[Math.floor(Math.random() * pros.length)],
                                cons: cons[Math.floor(Math.random() * cons.length)],
                                rating: Math.floor(Math.random() * 3 + 2), // 2-5
                                job_title: 'Various Positions',
                                review_datetime: new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000).toISOString(),
                                is_current_employee: Math.random() > 0.3,
                                years_of_employment: Math.floor(Math.random() * 5 + 1),
                                location: 'Various Locations'
                            });
                        }
                        return reviews;
                    };
                    
                    const generateInterviews = () => {
                        const interviews = [];
                        const difficulties = ['easy', 'average', 'difficult'];
                        const experiences = ['positive', 'neutral', 'negative'];
                        const processes = [
                            'Initial phone screen with HR, followed by technical interview with team lead, and final round with hiring manager.',
                            'Online application, assessment test, phone interview, and in-person panel interview.',
                            'Recruiter call, technical assessment, behavioral interview, and culture fit discussion.',
                            'Initial screening call, take-home assignment, technical interview, and final discussion with leadership team.'
                        ];
                        
                        for (let i = 0; i < 3; i++) {
                            interviews.push({
                                job_title: 'Various Positions',
                                location: 'Various Locations',
                                review_datetime: new Date(Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000).toISOString(),
                                process_description: processes[Math.floor(Math.random() * processes.length)],
                                difficulty: difficulties[Math.floor(Math.random() * difficulties.length)],
                                experience: experiences[Math.floor(Math.random() * experiences.length)]
                            });
                        }
                        return interviews;
                    };
                    
                    // Simulate API call delay
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    setCompanyDetails(generateCompanyDetails(companyName));
                    setCompanyReviews(generateReviews());
                    setCompanyInterviews(generateInterviews());
                } catch (error) {
                    console.error('Error fetching company data:', error);
                } finally {
                    setIsLoadingCompanyData(false);
                }
            };
            
            // Handle opening job details
            const handleOpenJobDetails = (job) => {
                setSelectedJob(job);
                setShowJobModal(true);
                if (job.company) {
                    fetchCompanyData(job.company);
                }
            };
            
            // Handle tailoring resume for a job
            const handleTailorResume = (job) => {
                // Store job data in localStorage for Application Tailor
                localStorage.setItem('tailor_target_job', JSON.stringify({
                    jobDescription: `${job.description}\n\nRequirements: ${job.requirements}`,
                    companyUrl: job.url,
                    timestamp: new Date().toISOString()
                }));
                
                // Navigate to Application Tailor
                window.showContent('application-tailor');
            };

            const isLightMode = !document.documentElement.classList.contains('dark');
            
            const getMatchScoreColor = (score) => {
                if (score >= 90) return 'text-green-600 bg-green-100';
                if (score >= 80) return 'text-blue-600 bg-blue-100';
                if (score >= 70) return 'text-yellow-600 bg-yellow-100';
                return 'text-red-600 bg-red-100';
            };

            return (
                <div className="space-y-6">
                    {/* Tab Navigation */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex gap-2">
                            <button
                                onClick={() => setActiveTab('search')}
                                className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                    activeTab === 'search'
                                        ? 'bg-blue-600 text-white'
                                        : isLightMode ? 'text-slate-700 hover:bg-gray-100' : 'text-gray-400 hover:bg-gray-800'
                                }`}
                            >
                                🔍 Quick Search
                            </button>
                            <button
                                onClick={() => setActiveTab('resumes')}
                                className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                    activeTab === 'resumes'
                                        ? 'bg-blue-600 text-white'
                                        : isLightMode ? 'text-slate-700 hover:bg-gray-100' : 'text-gray-400 hover:bg-gray-800'
                                }`}
                            >
                                📄 Personalized Jobs
                            </button>
                            <button
                                onClick={() => setActiveTab('results')}
                                className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                    activeTab === 'results'
                                        ? 'bg-blue-600 text-white'
                                        : isLightMode ? 'text-slate-700 hover:bg-gray-100' : 'text-gray-400 hover:bg-gray-800'
                                }`}
                            >
                                🎯 Search History{jobResults.length > 0 ? ` (${jobResults.length})` : ''}
                            </button>
                            <button
                                onClick={() => setActiveTab('resume-results')}
                                className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                    activeTab === 'resume-results'
                                        ? 'bg-blue-600 text-white'
                                        : isLightMode ? 'text-slate-700 hover:bg-gray-100' : 'text-gray-400 hover:bg-gray-800'
                                }`}
                            >
                                ⭐ Personalized Jobs History{personalizedJobResults.length > 0 ? ` (${personalizedJobResults.length})` : ''}
                            </button>
                        </div>
                    </div>

                    {/* Quick Search Tab */}
                    {activeTab === 'search' && (
                        <div className="space-y-8">
                            {/* Search Header */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8 relative z-10`}>
                                <h2 className="text-3xl font-bold text-slate-800 mb-2">Find Your Dream Job</h2>
                                <p className="text-slate-600 mb-8">Enter your job title and location to get AI-powered job recommendations</p>
                                
                                {/* Search Form */}
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                    <div className="md:col-span-2 relative job-title-suggestions-container">
                                        <label className="block text-sm font-semibold text-slate-700 mb-2">Job Title</label>
                                        <div className="relative">
                                            <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400">
                                                💼
                                            </span>
                                            <input
                                                type="text"
                                                value={quickSearchJobTitle}
                                                onChange={(e) => handleJobTitleChange(e.target.value)}
                                                onFocus={() => quickSearchJobTitle.trim() && setShowJobTitleSuggestions(true)}
                                                placeholder="e.g., Software Engineer, Product Manager, Data Scientist"
                                                className="w-full pl-10 pr-8 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-300"
                                            />
                                            {quickSearchJobTitle && (
                                                <button
                                                    onClick={() => {
                                                        setQuickSearchJobTitle('');
                                                        setShowJobTitleSuggestions(false);
                                                        setJobTitleSuggestions([]);
                                                    }}
                                                    className="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600"
                                                >
                                                    ✕
                                                </button>
                                            )}
                                        </div>
                                        
                                        {/* Job Title Suggestions Dropdown */}
                                        {showJobTitleSuggestions && jobTitleSuggestions.length > 0 && (
                                            <div className="absolute z-[9999] w-full mt-1 bg-white border border-slate-300 rounded-xl shadow-2xl max-h-60 overflow-y-auto">
                                                {jobTitleSuggestions.map((suggestion, index) => (
                                                    <button
                                                        key={index}
                                                        onClick={() => handleSelectJobTitle(suggestion)}
                                                        className="w-full px-4 py-3 text-left text-slate-800 hover:bg-blue-50 transition-colors border-b border-slate-100 last:border-b-0"
                                                    >
                                                        {suggestion}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    <div className="relative">
                                        <label className="block text-sm font-semibold text-slate-700 mb-2">Location (Optional)</label>
                                        <div className="relative location-suggestions-container">
                                            <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400">
                                                📍
                                            </span>
                                            <input
                                                type="text"
                                                value={quickSearchLocation}
                                                onChange={(e) => handleLocationChange(e.target.value)}
                                                onFocus={() => quickSearchLocation.trim() && setShowLocationSuggestions(true)}
                                                placeholder="City, State"
                                                className="w-full pl-10 pr-8 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-300"
                                            />
                                            {quickSearchLocation && (
                                                <button
                                                    onClick={() => {
                                                        setQuickSearchLocation('');
                                                        setShowLocationSuggestions(false);
                                                        setLocationSuggestions([]);
                                                    }}
                                                    className="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600"
                                                >
                                                    ✕
                                                </button>
                                            )}
                                        </div>
                                        
                                        {/* Location Suggestions Dropdown */}
                                        {showLocationSuggestions && locationSuggestions.length > 0 && (
                                            <div className="absolute z-[9999] w-full mt-1 bg-white border border-slate-300 rounded-xl shadow-2xl max-h-60 overflow-y-auto">
                                                {locationSuggestions.map((suggestion, index) => (
                                                    <button
                                                        key={index}
                                                        onClick={() => handleSelectLocation(suggestion)}
                                                        className="w-full px-4 py-3 text-left text-slate-800 hover:bg-blue-50 transition-colors border-b border-slate-100 last:border-b-0"
                                                    >
                                                        {suggestion}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                                
                                <button
                                    onClick={handleQuickSearch}
                                    disabled={!quickSearchJobTitle.trim() || isSearching}
                                    className={`w-full px-6 py-4 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-3 ${
                                        quickSearchJobTitle.trim() && !isSearching
                                            ? 'bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600'
                                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                    }`}
                                >
                                    {isSearching ? (
                                        <>
                                            <div className="w-5 h-5 animate-spin">⟳</div>
                                            Searching for jobs...
                                        </>
                                    ) : (
                                        <>
                                            <div className="w-5 h-5">🔍</div>
                                            Search Jobs
                                        </>
                                    )}
                                </button>
                                
                                {/* Filter Buttons */}
                                <div className="mt-6 flex flex-wrap gap-3">
                                    {/* Date Posted Filter */}
                                    <div className="relative filter-dropdown-container">
                                        <button
                                            onClick={() => handleToggleFilter('datePosted')}
                                            className={`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${
                                                filters.datePosted !== 'Any time' 
                                                    ? 'bg-blue-50 border-blue-500 text-blue-700'
                                                    : 'bg-white border-gray-300 text-gray-700 hover:border-gray-400'
                                            }`}
                                        >
                                            Date posted <span className="ml-1">▼</span>
                                        </button>
                                        
                                        {showFilterDropdown.datePosted && (
                                            <div className="absolute z-[9999] top-full left-0 mt-1 w-48 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto">
                                                {['Any time', 'Past 24 hours', 'Past week', 'Past month', 'Past 3 months'].map((option) => (
                                                    <button
                                                        key={option}
                                                        onClick={() => handleSelectFilter('datePosted', option)}
                                                        className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${
                                                            filters.datePosted === option ? 'bg-blue-50 text-blue-700 font-medium' : 'text-gray-700'
                                                        }`}
                                                    >
                                                        {option}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    
                                    {/* Experience Level Filter */}
                                    <div className="relative filter-dropdown-container">
                                        <button
                                            onClick={() => handleToggleFilter('experienceLevel')}
                                            className={`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${
                                                filters.experienceLevel !== 'Any level' 
                                                    ? 'bg-blue-50 border-blue-500 text-blue-700'
                                                    : 'bg-white border-gray-300 text-gray-700 hover:border-gray-400'
                                            }`}
                                        >
                                            Experience level <span className="ml-1">▼</span>
                                        </button>
                                        
                                        {showFilterDropdown.experienceLevel && (
                                            <div className="absolute z-[9999] top-full left-0 mt-1 w-48 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto">
                                                {['Any level', 'Intern', 'Entry level', 'Mid-Senior level', 'Associate', 'Executive', 'Director'].map((option) => (
                                                    <button
                                                        key={option}
                                                        onClick={() => handleSelectFilter('experienceLevel', option)}
                                                        className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${
                                                            filters.experienceLevel === option ? 'bg-blue-50 text-blue-700 font-medium' : 'text-gray-700'
                                                        }`}
                                                    >
                                                        {option}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    
                                    {/* Remote Filter */}
                                    <div className="relative filter-dropdown-container">
                                        <button
                                            onClick={() => handleToggleFilter('remote')}
                                            className={`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${
                                                filters.remote !== 'Any' 
                                                    ? 'bg-blue-50 border-blue-500 text-blue-700'
                                                    : 'bg-white border-gray-300 text-gray-700 hover:border-gray-400'
                                            }`}
                                        >
                                            Remote <span className="ml-1">▼</span>
                                        </button>
                                        
                                        {showFilterDropdown.remote && (
                                            <div className="absolute z-[9999] top-full left-0 mt-1 w-48 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto">
                                                {['Any', 'Remote', 'On-site', 'Hybrid'].map((option) => (
                                                    <button
                                                        key={option}
                                                        onClick={() => handleSelectFilter('remote', option)}
                                                        className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${
                                                            filters.remote === option ? 'bg-blue-50 text-blue-700 font-medium' : 'text-gray-700'
                                                        }`}
                                                    >
                                                        {option}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    
                                    {/* Salary Range Filter */}
                                    <div className="relative filter-dropdown-container">
                                        <button
                                            onClick={() => handleToggleFilter('salaryRange')}
                                            className={`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${
                                                filters.salaryRange !== 'Any' 
                                                    ? 'bg-blue-50 border-blue-500 text-blue-700'
                                                    : 'bg-white border-gray-300 text-gray-700 hover:border-gray-400'
                                            }`}
                                        >
                                            Salary Range <span className="ml-1">▼</span>
                                        </button>
                                        
                                        {showFilterDropdown.salaryRange && (
                                            <div className="absolute z-[9999] top-full left-0 mt-1 w-48 bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto">
                                                {['Any', '$50k - $80k', '$80k - $120k', '$120k+', '$150k+'].map((option) => (
                                                    <button
                                                        key={option}
                                                        onClick={() => handleSelectFilter('salaryRange', option)}
                                                        className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${
                                                            filters.salaryRange === option ? 'bg-blue-50 text-blue-700 font-medium' : 'text-gray-700'
                                                        }`}
                                                    >
                                                        {option}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                                
                                {/* Active Filters Display */}
                                {(filters.datePosted !== 'Any time' || filters.experienceLevel !== 'Any level' || filters.remote !== 'Any' || filters.salaryRange !== 'Any') && (
                                    <div className="mt-4 flex flex-wrap gap-2">
                                        <span className="text-sm text-slate-600 font-medium">Active filters:</span>
                                        {filters.datePosted !== 'Any time' && (
                                            <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-2">
                                                📅 {filters.datePosted}
                                                <button onClick={() => handleSelectFilter('datePosted', 'Any time')} className="hover:bg-blue-200 rounded-full">×</button>
                                            </span>
                                        )}
                                        {filters.experienceLevel !== 'Any level' && (
                                            <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-2">
                                                📊 {filters.experienceLevel}
                                                <button onClick={() => handleSelectFilter('experienceLevel', 'Any level')} className="hover:bg-blue-200 rounded-full">×</button>
                                            </span>
                                        )}
                                        {filters.remote !== 'Any' && (
                                            <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-2">
                                                📍 {filters.remote}
                                                <button onClick={() => handleSelectFilter('remote', 'Any')} className="hover:bg-blue-200 rounded-full">×</button>
                                            </span>
                                        )}
                                        {filters.salaryRange !== 'Any' && (
                                            <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-2">
                                                💰 {filters.salaryRange}
                                                <button onClick={() => handleSelectFilter('salaryRange', 'Any')} className="hover:bg-blue-200 rounded-full">×</button>
                                            </span>
                                        )}
                                        <button
                                            onClick={() => {
                                                setFilters({ datePosted: 'Any time', experienceLevel: 'Any level', remote: 'Any', salaryRange: 'Any' });
                                            }}
                                            className="px-3 py-1 text-red-600 hover:bg-red-50 rounded-full text-xs font-medium"
                                        >
                                            Clear all
                                        </button>
                                    </div>
                                )}
                                
                                {resumeData && (
                                    <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-xl">
                                        <div className="flex items-center gap-3">
                                            <div className="w-5 h-5 text-blue-600">ℹ️</div>
                                            <p className="text-sm text-blue-700">
                                                <strong>Resume detected!</strong> We'll match jobs to your skills and experience for better results.
                                            </p>
                                        </div>
                                    </div>
                                )}
                            </div>
                            
                            {/* Job Results Display */}
                            {jobResults.length > 0 && (
                                <div className="mt-6">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-xl font-bold text-slate-800">🎯 Search Results ({jobResults.length})</h3>
                                        <button
                                            onClick={() => {
                                                const csv = jobResults.map(job => 
                                                    `"${job.title}","${job.company}","${job.location}","${job.salary}","${job.type}","${job.url}"`
                                                ).join('\n');
                                                const csvContent = 'data:text/csv;charset=utf-8,' + encodeURIComponent('Title,Company,Location,Salary,Type,URL\n' + csv);
                                                const link = document.createElement('a');
                                                link.href = csvContent;
                                                link.download = `job-search-results-${Date.now()}.csv`;
                                                link.click();
                                            }}
                                            className="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium hover:bg-green-200 transition-colors flex items-center gap-2 text-sm"
                                        >
                                            📥 Export CSV
                                        </button>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {jobResults.map((job, index) => (
                                            <div key={index} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 hover:shadow-lg transition-all`}>
                                                <div className="flex items-start justify-between">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-3">
                                                            <h3 className="text-xl font-bold text-slate-800">{job.title}</h3>
                                                            {job.matchScore && (
                                                                <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getMatchScoreColor(job.matchScore)}`}>
                                                                    {job.matchScore}% match
                                                                </span>
                                                            )}
                                                        </div>
                                                        
                                                        <div className="flex items-center gap-6 text-sm text-slate-600 mb-4">
                                                            <span className="flex items-center gap-1">
                                                                🏢 {job.company}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                📍 {job.location}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                💰 {job.salary}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                📅 {job.postedDate}
                                                            </span>
                                                        </div>
                                                        
                                                        <p className="text-slate-700 mb-4">{job.description}</p>
                                                        
                                                        {job.whyMatch && (
                                                            <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                                                <p className="text-sm text-blue-700">
                                                                    <strong>Why this matches:</strong> {job.whyMatch}
                                                                </p>
                                                            </div>
                                                        )}

                                                       <div className="flex flex-wrap gap-2 mt-2">
                                                            <button
                                                                onClick={(e) => {
                                                                    e.stopPropagation();
                                                                    handleOpenJobDetails(job);
                                                                }}
                                                                className="px-4 py-2 bg-blue-100 text-blue-700 rounded-xl font-semibold hover:bg-blue-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                            >
                                                                👁️ View Details
                                                            </button>
                                                            <button
                                                                onClick={(e) => {
                                                                    e.stopPropagation();
                                                                    handleTailorResume(job);
                                                                }}
                                                                className="px-4 py-2 bg-purple-100 text-purple-700 rounded-xl font-semibold hover:bg-purple-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                            >
                                                                ✨ Tailor Resume
                                                            </button>
                                                            <a
                                                                href={job.url}
                                                                target="_blank"
                                                                rel="noopener noreferrer"
                                                                onClick={(e) => e.stopPropagation()}
                                                                className="px-4 py-2 bg-green-100 text-green-700 rounded-xl font-semibold hover:bg-green-200 transition-all text-center whitespace-nowrap"
                                                            >
                                                                Apply Now →
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            {/* How It Works - Only show when no results */}
                            {jobResults.length === 0 && (
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 relative z-0">
                                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                        <div className="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                                            <div className="w-6 h-6 text-blue-600 text-2xl">🔍</div>
                                        </div>
                                        <h3 className="text-lg font-bold text-slate-800 mb-2">AI Search</h3>
                                        <p className="text-sm text-slate-600">Our AI searches across multiple job boards and generates realistic job listings</p>
                                    </div>
                                    
                                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                        <div className="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                                            <div className="w-6 h-6 text-green-600 text-2xl">✨</div>
                                        </div>
                                        <h3 className="text-lg font-bold text-slate-800 mb-2">Smart Matching</h3>
                                        <p className="text-sm text-slate-600">Jobs are matched against your resume to show relevance and fit</p>
                                    </div>
                                    
                                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                        <div className="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                            <div className="w-6 h-6 text-purple-600 text-2xl">⚡</div>
                                        </div>
                                        <h3 className="text-lg font-bold text-slate-800 mb-2">Quick Actions</h3>
                                        <p className="text-sm text-slate-600">Tailor your resume or generate a cover letter with one click</p>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Search History Tab */}
                    {activeTab === 'results' && (
                        <div className="space-y-6">
                            {jobResults.length > 0 && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <div>
                                            <h2 className="text-2xl font-bold text-slate-800 mb-2">🎯 Search History ({jobResults.length})</h2>
                                            <p className="text-slate-600">Searching for: "{quickSearchJobTitle}"</p>
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={() => {
                                                    const csv = jobResults.map(job => 
                                                        `"${job.title}","${job.company}","${job.location}","${job.salary}","${job.type}","${job.url}"`
                                                    ).join('\n');
                                                    const csvContent = 'data:text/csv;charset=utf-8,' + encodeURIComponent('Title,Company,Location,Salary,Type,URL\n' + csv);
                                                    const link = document.createElement('a');
                                                    link.href = csvContent;
                                                    link.download = `job-search-results-${Date.now()}.csv`;
                                                    link.click();
                                                }}
                                                className="px-4 py-2 bg-green-100 text-green-700 rounded-xl font-medium hover:bg-green-200 transition-colors flex items-center gap-2"
                                            >
                                                📥 Export CSV
                                            </button>
                                            <button
                                                onClick={() => setActiveTab('search')}
                                                className="px-4 py-2 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors"
                                            >
                                                🔄 New Search
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {/* Job Results */}
                            {jobResults.length > 0 ? (
                                <div className="space-y-4">
                                    {jobResults.map((job, index) => (
                                    <div key={index} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                        <div className="flex items-start justify-between">
                                            <div className="flex-1">
                                                <div className="flex items-center gap-3 mb-3">
                                                    <h3 className="text-xl font-bold text-slate-800">{job.title}</h3>
                                                    {job.matchScore && (
                                                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getMatchScoreColor(job.matchScore)}`}>
                                                            {job.matchScore}% match
                                                        </span>
                                                    )}
                                                </div>
                                                
                                                <div className="flex items-center gap-6 text-sm text-slate-600 mb-4">
                                                    <span className="flex items-center gap-1">
                                                        🏢 {job.company}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        📍 {job.location}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        💰 {job.salary}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        📅 {job.postedDate}
                                                    </span>
                                                </div>
                                                
                                                <p className="text-slate-700 mb-4">{job.description}</p>
                                                
                                                {job.whyMatch && (
                                                    <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                                        <p className="text-sm text-blue-800">
                                                            <strong>Why this matches:</strong> {job.whyMatch}
                                                        </p>
                                                    </div>
                                                )}
                                                
                                               <div className="flex flex-wrap gap-2 mt-2">
                                                    <button
                                                        onClick={() => handleOpenJobDetails(job)}
                                                        className="px-4 py-2 bg-blue-100 text-blue-700 rounded-xl font-semibold hover:bg-blue-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                    >
                                                        👁️ View Details
                                                    </button>
                                                    <button
                                                        onClick={() => handleTailorResume(job)}
                                                        className="px-4 py-2 bg-purple-100 text-purple-700 rounded-xl font-semibold hover:bg-purple-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                    >
                                                        ✨ Tailor Resume
                                                    </button>
                                                    <a
                                                        href={job.url}
                                                        target="_blank"
                                                        rel="noopener noreferrer"
                                                        className="px-4 py-2 bg-green-100 text-green-700 rounded-xl font-semibold hover:bg-green-200 transition-all text-center whitespace-nowrap"
                                                    >
                                                        Apply Now →
                                                    </a>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    ))}
                                </div>
                            ) : (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-12 text-center`}>
                                    <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <div className="w-8 h-8 text-slate-400 text-2xl">🎯</div>
                                    </div>
                                    <h3 className="text-lg font-semibold text-slate-800 mb-2">No search history yet</h3>
                                    <p className="text-slate-600 mb-6">Your search results will appear here after you search for jobs</p>
                                    <button 
                                        onClick={() => setActiveTab('search')}
                                        className="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-indigo-600 transition-all duration-300"
                                    >
                                        Start Searching
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Personalized Jobs Tab */}
                    {activeTab === 'resumes' && (
                        <div className="space-y-6">
                            {/* Upload Section - Only show when no resumes uploaded */}
                            {Object.keys(uploadedResumes).length === 0 && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Upload Your Resume</h2>
                                    <p className="text-slate-600 mb-6">Upload your CV/resume and get AI-powered job recommendations. We'll analyze your resume and match you with real job postings tailored to your skills and experience.</p>
                                    
                                    <div className="flex flex-col items-center">
                                        <label className="cursor-pointer">
                                            <input
                                                type="file"
                                                accept=".pdf,.docx,.txt"
                                                onChange={handleResumeUpload}
                                                className="hidden"
                                                id="resume-upload"
                                                disabled={isUploadingResume}
                                            />
                                            <div className={`px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 ${
                                                isUploadingResume
                                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                    : 'bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600'
                                            }`}>
                                                {isUploadingResume ? (
                                                    <>
                                                        <div className="w-5 h-5 animate-spin">⟳</div>
                                                        Uploading...
                                                    </>
                                                ) : (
                                                    <>
                                                        📄 Upload Resume
                                                    </>
                                                )}
                                            </div>
                                        </label>
                                        <span className="text-sm text-slate-600 mt-2">Supports PDF, DOCX, and TXT files</span>
                                    </div>
                                </div>
                            )}

                            {/* Uploaded Resumes */}
                            {Object.keys(uploadedResumes).length > 0 && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Your Resumes</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                        {Object.entries(uploadedResumes).map(([name, data]) => (
                                            <div
                                                key={name}
                                                className={`p-4 rounded-xl border-2 transition-all cursor-pointer ${
                                                    activeResume === name
                                                        ? 'border-blue-500 bg-blue-50'
                                                        : isLightMode ? 'border-slate-200 bg-slate-50' : 'border-gray-700 bg-gray-800'
                                                }`}
                                                onClick={() => handleSelectResume(name)}
                                            >
                                                <div className="flex items-start justify-between mb-2">
                                                    <div className="flex items-start gap-3">
                                                        <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                                            <span className="text-xl">📄</span>
                                                        </div>
                                                        <div className="flex-1">
                                                            <h3 className="font-semibold text-slate-800 truncate">{name}</h3>
                                                            {activeResume === name && (
                                                                <span className="inline-block mt-1 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full">Active</span>
                                                            )}
                                                        </div>
                                                    </div>
                                                    <button
                                                        onClick={(e) => {
                                                            e.stopPropagation();
                                                            handleDeleteResume(name);
                                                        }}
                                                        className="text-red-500 hover:text-red-700 text-lg font-bold px-2"
                                                    >
                                                        ×
                                                    </button>
                                                </div>
                                                {data.skills?.technical && (
                                                    <div className="mt-3 flex flex-wrap gap-1">
                                                        {data.skills.technical.slice(0, 3).map((skill, idx) => (
                                                            <span key={idx} className="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded">
                                                                {skill}
                                                            </span>
                                                        ))}
                                                        {data.skills.technical.length > 3 && (
                                                            <span className="text-xs text-slate-500">+{data.skills.technical.length - 3} more</span>
                                                        )}
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* Filter & Search Section */}
                            {activeResume && uploadedResumes[activeResume] && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Customize Your Job Search</h2>
                                    <p className="text-slate-600 mb-6">Narrow down your job search based on your preferences</p>
                                    
                                    {/* Search Strategy Buttons */}
                                    <div className="mb-6">
                                        <label className="block text-sm font-semibold text-slate-700 mb-3">
                                            Search jobs based on
                                        </label>
                                        <div className="flex flex-wrap gap-3">
                                            {[
                                                { id: 'background', label: 'Your Background' },
                                                { id: 'career_progression', label: 'Next Career Progression' },
                                                { id: 'skill_based', label: 'Skill-Based Match' },
                                                { id: 'passion_based', label: 'Passion or Interest-Based' },
                                                { id: 'industry_switch', label: 'Industry Switch' }
                                            ].map(strategy => (
                                                <button
                                                    key={strategy.id}
                                                onClick={() => {
                                                    setSelectedSearchStrategy(
                                                        selectedSearchStrategy === strategy.id ? null : strategy.id
                                                    );
                                                    setAiReasoning(null); // Clear previous reasoning
                                                }}
                                                    disabled={isGeneratingQuery || isSearchingPersonalized}
                                                    className={`px-4 py-2 rounded-xl font-semibold transition-all duration-300 ${
                                                        selectedSearchStrategy === strategy.id
                                                            ? 'bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg ring-2 ring-blue-300'
                                                            : isLightMode 
                                                                ? 'bg-white/70 border border-slate-300 text-slate-700 hover:border-blue-500 hover:bg-blue-50'
                                                                : 'bg-gray-800 border border-gray-700 text-gray-300 hover:border-blue-500 hover:bg-gray-700'
                                                    } ${isGeneratingQuery || isSearchingPersonalized ? 'opacity-50 cursor-not-allowed' : ''}`}
                                                >
                                                    {strategy.label}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* Filters Grid */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                                        {/* Work Type Filter */}
                                        <div className="relative filter-dropdown-container">
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Work Type</label>
                                            <div className="relative">
                                                <select
                                                    value={resumeFilters.workType}
                                                    onChange={(e) => setResumeFilters(prev => ({...prev, workType: e.target.value}))}
                                                    className="w-full px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none"
                                                >
                                                    <option>Full-time</option>
                                                    <option>Part-time</option>
                                                    <option>Contract</option>
                                                    <option>Internship</option>
                                                    <option>Any</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        {/* Remote/O Hybrid Filter */}
                                        <div className="relative filter-dropdown-container">
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Work Style</label>
                                            <div className="relative">
                                                <select
                                                    value={resumeFilters.remote}
                                                    onChange={(e) => setResumeFilters(prev => ({...prev, remote: e.target.value}))}
                                                    className="w-full px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none"
                                                >
                                                    <option>Any</option>
                                                    <option>Remote</option>
                                                    <option>Hybrid</option>
                                                    <option>On-site</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        {/* Experience Level Filter */}
                                        <div className="relative filter-dropdown-container">
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Experience Level</label>
                                            <div className="relative">
                                                <select
                                                    value={resumeFilters.experienceLevel}
                                                    onChange={(e) => setResumeFilters(prev => ({...prev, experienceLevel: e.target.value}))}
                                                    className="w-full px-4 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none"
                                                >
                                                    <option>Any level</option>
                                                    <option>Entry Level</option>
                                                    <option>Mid Level</option>
                                                    <option>Senior Level</option>
                                                    <option>Executive</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        {/* Location Filter */}
                                        <div className="relative location-suggestions-container">
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Location (Optional)</label>
                                            <div className="relative">
                                                <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400">
                                                    📍
                                                </span>
                                                <input
                                                    type="text"
                                                    value={resumeFilters.location}
                                                    onChange={(e) => handleResumeLocationChange(e.target.value)}
                                                    onFocus={() => resumeFilters.location.trim() && setShowResumeLocationSuggestions(true)}
                                                    placeholder="City, State"
                                                    className="w-full pl-10 pr-8 py-3 bg-white/70 border border-slate-300 rounded-xl text-slate-800 placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-300"
                                                />
                                                {resumeFilters.location && (
                                                    <button
                                                        onClick={() => {
                                                            setResumeFilters(prev => ({...prev, location: ''}));
                                                            setShowResumeLocationSuggestions(false);
                                                            setResumeLocationSuggestions([]);
                                                        }}
                                                        className="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600"
                                                    >
                                                        ✕
                                                    </button>
                                                )}
                                            </div>
                                            
                                            {/* Location Suggestions Dropdown */}
                                            {showResumeLocationSuggestions && resumeLocationSuggestions.length > 0 && (
                                                <div className="absolute z-[9999] w-full mt-1 bg-white border border-slate-300 rounded-xl shadow-2xl max-h-60 overflow-y-auto">
                                                    {resumeLocationSuggestions.map((suggestion, index) => (
                                                        <button
                                                            key={index}
                                                            onClick={() => handleSelectResumeLocation(suggestion)}
                                                            className="w-full px-4 py-3 text-left text-slate-800 hover:bg-blue-50 transition-colors border-b border-slate-100 last:border-b-0"
                                                        >
                                                            {suggestion}
                                                        </button>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                    
                                    {/* Search Button */}
                                    <button
                                        onClick={() => handlePersonalizedSearch(selectedSearchStrategy || null)}
                                        disabled={isSearchingPersonalized || isGeneratingQuery}
                                        className={`w-full px-6 py-4 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-3 ${
                                            !isSearchingPersonalized && !isGeneratingQuery
                                                ? 'bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600'
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }`}
                                    >
                                        {isGeneratingQuery ? (
                                            <>
                                                <div className="w-5 h-5 animate-spin">⟳</div>
                                                Generating search query...
                                            </>
                                        ) : isSearchingPersonalized ? (
                                            <>
                                                <div className="w-5 h-5 animate-spin">⟳</div>
                                                Searching personalized jobs...
                                            </>
                                        ) : selectedSearchStrategy ? (
                                            <>
                                                <span className="text-xl">🔍</span>
                                                Search with {getStrategyLabel(selectedSearchStrategy)}
                                            </>
                                        ) : (
                                            <>
                                                <span className="text-xl">🔍</span>
                                                Search Personalized Jobs History
                                            </>
                                        )}
                                    </button>
                                    
                                    {/* AI Reasoning Section */}
                                    {aiReasoning && personalizedJobResults.length > 0 && selectedSearchStrategy && (
                                        <div className={`mt-6 ${isLightMode ? 'bg-blue-50/80 border-blue-200' : 'bg-blue-900/20 border-blue-800/50'} border rounded-xl p-6`}>
                                            <div className="flex items-start gap-4">
                                                <div className="flex-shrink-0 w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-lg">
                                                    💡
                                                </div>
                                                <div className="flex-1">
                                                    <h4 className="text-lg font-bold text-slate-800 mb-2">
                                                        How We Matched These Jobs
                                                    </h4>
                                                    <p className="text-slate-700 leading-relaxed whitespace-pre-line">
                                                        {aiReasoning}
                                                    </p>
                                                    <div className="mt-3 pt-3 border-t border-blue-200/50">
                                                        <p className="text-sm text-slate-600 italic">
                                                            Strategy: <span className="font-semibold">{getStrategyLabel(selectedSearchStrategy)}</span>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {/* Search Results Display */}
                                    {personalizedJobResults.length > 0 && (
                                        <div className="mt-6">
                                            <div className="flex items-center justify-between mb-4">
                                                    <h3 className="text-xl font-bold text-slate-800">Found {personalizedJobResults.length} Jobs</h3>
                                                <button
                                                    onClick={() => {
                                                        const csv = personalizedJobResults.map(job => 
                                                            `"${job.title}","${job.company}","${job.location}","${job.salary}","${job.type}","${job.url}"`
                                                        ).join('\n');
                                                        const csvContent = 'data:text/csv;charset=utf-8,' + encodeURIComponent('Title,Company,Location,Salary,Type,URL\n' + csv);
                                                        const link = document.createElement('a');
                                                        link.href = csvContent;
                                                        link.download = `personalized-job-results-${Date.now()}.csv`;
                                                        link.click();
                                                    }}
                                                    className="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium hover:bg-green-200 transition-colors flex items-center gap-2 text-sm"
                                                >
                                                    📥 Export CSV
                                                </button>
                                            </div>
                                            
                                            <div className="space-y-4">
                                                {personalizedJobResults.map((job, index) => (
                                                    <div key={index} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 hover:shadow-lg transition-all`}>
                                                        <div className="flex items-start justify-between">
                                                            <div className="flex-1">
                                                                <div className="flex items-center gap-3 mb-3">
                                                                    <h3 className="text-xl font-bold text-slate-800">{job.title}</h3>
                                                                    {job.matchScore && (
                                                                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getMatchScoreColor(job.matchScore)}`}>
                                                                            {job.matchScore}% match
                                                                        </span>
                                                                    )}
                                                                </div>
                                                                
                                                                <div className="flex items-center gap-6 text-sm text-slate-600 mb-4">
                                                                    <span className="flex items-center gap-1">
                                                                        🏢 {job.company}
                                                                    </span>
                                                                    <span className="flex items-center gap-1">
                                                                        📍 {job.location}
                                                                    </span>
                                                                    <span className="flex items-center gap-1">
                                                                        💰 {job.salary}
                                                                    </span>
                                                                    <span className="flex items-center gap-1">
                                                                        📅 {job.postedDate}
                                                                    </span>
                                                                </div>
                                                                
                                                                <p className="text-slate-700 mb-4">{job.description}</p>
                                                                
                                                                {job.whyMatch && (
                                                                    <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                                                        <p className="text-sm text-blue-700">
                                                                            <strong>Why this matches:</strong> {job.whyMatch}
                                                                        </p>
                                                                    </div>
                                                                )}

                                                               <div className="flex flex-wrap gap-2 mt-2">
                                                                    <button
                                                                        onClick={(e) => {
                                                                            e.stopPropagation();
                                                                            handleOpenJobDetails(job);
                                                                        }}
                                                                        className="px-4 py-2 bg-blue-100 text-blue-700 rounded-xl font-semibold hover:bg-blue-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                                    >
                                                                        👁️ View Details
                                                                    </button>
                                                                    <button
                                                                        onClick={(e) => {
                                                                            e.stopPropagation();
                                                                            handleTailorResume(job);
                                                                        }}
                                                                        className="px-4 py-2 bg-purple-100 text-purple-700 rounded-xl font-semibold hover:bg-purple-200 transition-all whitespace-nowrap flex items-center gap-1"
                                                                    >
                                                                        ✨ Tailor Resume
                                                                    </button>
                                                                    <a
                                                                        href={job.url}
                                                                        target="_blank"
                                                                        rel="noopener noreferrer"
                                                                        onClick={(e) => e.stopPropagation()}
                                                                        className="px-4 py-2 bg-green-100 text-green-700 rounded-xl font-semibold hover:bg-green-200 transition-all text-center whitespace-nowrap"
                                                                    >
                                                                        Apply Now →
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Empty State */}
                            {Object.keys(uploadedResumes).length === 0 && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-12 text-center`}>
                                    <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span className="text-2xl">📄</span>
                                    </div>
                                    <h3 className="text-lg font-semibold text-slate-800 mb-2">No resumes uploaded yet</h3>
                                    <p className="text-slate-600 mb-6">Upload your resume to get real job recommendations based on your skills and experience</p>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Personalized Results Tab */}
                    {activeTab === 'resume-results' && (
                        <div className="space-y-6">
                            {personalizedJobResults.length > 0 && (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <div>
                                            <h2 className="text-2xl font-bold text-slate-800 mb-2">Found {personalizedJobResults.length} Personalized Jobs History</h2>
                                            <p className="text-slate-600">Based on your resume and selected filters</p>
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={() => setActiveTab('resumes')}
                                                className="px-4 py-2 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors"
                                            >
                                                🔄 New Search
                                            </button>
                                            <button
                                                onClick={() => {
                                                    const csv = personalizedJobResults.map(job => 
                                                        `"${job.title}","${job.company}","${job.location}","${job.salary}","${job.type}","${job.url}"`
                                                    ).join('\n');
                                                    const csvContent = 'data:text/csv;charset=utf-8,' + encodeURIComponent('Title,Company,Location,Salary,Type,URL\n' + csv);
                                                    const link = document.createElement('a');
                                                    link.href = csvContent;
                                                    link.download = `personalized-job-results-${Date.now()}.csv`;
                                                    link.click();
                                                }}
                                                className="px-4 py-2 bg-green-100 text-green-700 rounded-xl font-medium hover:bg-green-200 transition-colors flex items-center gap-2"
                                            >
                                                📥 Export CSV
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {/* Job Results */}
                            {personalizedJobResults.length > 0 ? (
                                <div className="space-y-4">
                                    {personalizedJobResults.map((job, index) => (
                                    <div key={index} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 hover:shadow-lg transition-all cursor-pointer`}
                                         onClick={() => {
                                             setSelectedJob(job);
                                             setShowJobModal(true);
                                         }}>
                                        <div className="flex items-start justify-between">
                                            <div className="flex-1">
                                                <div className="flex items-center gap-3 mb-3">
                                                    <h3 className="text-xl font-bold text-slate-800">{job.title}</h3>
                                                    {job.matchScore && (
                                                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getMatchScoreColor(job.matchScore)}`}>
                                                            {job.matchScore}% match
                                                        </span>
                                                    )}
                                                </div>
                                                
                                                <div className="flex items-center gap-6 text-sm text-slate-600 mb-4">
                                                    <span className="flex items-center gap-1">
                                                        🏢 {job.company}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        📍 {job.location}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        💰 {job.salary}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        📅 {job.postedDate}
                                                    </span>
                                                </div>
                                                
                                                <p className="text-slate-700 line-clamp-2">{job.description}</p>
                                                
                                                {job.whyMatch && (
                                                    <div className="mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                                        <p className="text-sm text-blue-700">✨ {job.whyMatch}</p>
                                                    </div>
                                                )}
                                            </div>
                                            
                                           <div className="ml-4"></div>
                                        </div>
                                    </div>
                                    ))}
                                </div>
                            ) : (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-12 text-center`}>
                                    <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <div className="w-8 h-8 text-slate-400 text-2xl">⭐</div>
                                    </div>
                                    <h3 className="text-lg font-semibold text-slate-800 mb-2">No personalized job history yet</h3>
                                    <p className="text-slate-600 mb-6">Your personalized job results will appear here after you search</p>
                                    <button 
                                        onClick={() => setActiveTab('resumes')}
                                        className="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-indigo-600 transition-all duration-300"
                                    >
                                        Search Personalized Jobs History
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Job Details Modal */}
                    {showJobModal && selectedJob && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4" style={{paddingTop: '120px', paddingBottom: '40px', backgroundColor: 'rgba(240, 243, 254, 0.8)', backdropFilter: 'blur(8px)'}}>
                            <div className={`${isLightMode ? 'bg-white' : 'bg-slate-900'} w-full max-w-2xl shadow-2xl max-h-[80vh] flex flex-col`} style={{borderRadius: '0.75rem', overflow: 'hidden'}}>
                                <div className="overflow-y-auto flex-1">
                                    <div className="p-5 border-b border-slate-200 flex items-center justify-between">
                                    <h2 className="text-xl font-bold text-slate-800">{selectedJob.title}</h2>
                                    <button
                                        onClick={() => {
                                            setShowJobModal(false);
                                            setCompanyDetails(null);
                                            setCompanyReviews([]);
                                            setCompanyInterviews([]);
                                        }}
                                        className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                                    >
                                        ✕
                                    </button>
                                </div>
                                
                                <div className="p-5 space-y-5">
                                    {/* Key Information Grid */}
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div>
                                            <p className="text-sm text-slate-600 mb-1">Company</p>
                                            <p className="font-semibold text-slate-800">{selectedJob.company}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-slate-600 mb-1">Location</p>
                                            <p className="font-semibold text-slate-800">{selectedJob.location || 'Not specified'}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-slate-600 mb-1">Salary</p>
                                            <p className="font-semibold text-slate-800">{selectedJob.salary || 'Not disclosed'}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-slate-600 mb-1">Posted</p>
                                            <p className="font-semibold text-slate-800">{selectedJob.postedDate || 'Recently'}</p>
                                        </div>
                                    </div>
                                    
                                    {/* Additional Job Details */}
                                    {(selectedJob.type || selectedJob.source) && (
                                        <div className="grid grid-cols-2 gap-4 pt-2 border-t border-slate-200">
                                            {selectedJob.type && (
                                    <div>
                                                    <p className="text-sm text-slate-600 mb-1">Employment Type</p>
                                                    <p className="font-semibold text-slate-800">{selectedJob.type}</p>
                                    </div>
                                            )}
                                            {selectedJob.source && (
                                    <div>
                                                    <p className="text-sm text-slate-600 mb-1">Source</p>
                                                    <p className="font-semibold text-slate-800">{selectedJob.source}</p>
                                    </div>
                                            )}
                                            {selectedJob.matchScore && (
                                                <div>
                                                    <p className="text-sm text-slate-600 mb-1">Match Score</p>
                                                    <p className={`font-semibold ${getMatchScoreColor(selectedJob.matchScore).split(' ')[0]}`}>
                                                        {selectedJob.matchScore}%
                                                    </p>
                                                </div>
                                            )}
                                        </div>
                                    )}
                                    
                                    {/* Job Description */}
                                    <div className="pt-4 border-t border-slate-200">
                                        <h3 className="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2">
                                            📋 Job Description
                                        </h3>
                                        <div className={`${isLightMode ? 'bg-slate-50' : 'bg-slate-800'} rounded-lg p-4`}>
                                            <p className="text-slate-700 whitespace-pre-wrap leading-relaxed">{selectedJob.description || 'No description available.'}</p>
                                        </div>
                                    </div>
                                    
                                    {/* Requirements */}
                                    {selectedJob.requirements && (
                                        <div className="pt-4 border-t border-slate-200">
                                            <h3 className="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2">
                                                ✅ Requirements
                                            </h3>
                                            <div className={`${isLightMode ? 'bg-slate-50' : 'bg-slate-800'} rounded-lg p-4`}>
                                                <p className="text-slate-700 leading-relaxed">{selectedJob.requirements}</p>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {selectedJob.whyMatch && (
                                        <div className="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                            <h3 className="font-bold text-blue-800 mb-2">Why This Matches</h3>
                                            <p className="text-blue-700">{selectedJob.whyMatch}</p>
                                        </div>
                                    )}
                                    
                                    {/* Company Insights */}
                                    <div className="p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg">
                                        <h3 className="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2">
                                            🏢 Company Insights
                                        </h3>
                                        <p className="text-slate-700 text-sm mb-4">
                                            Learn more about <strong>{selectedJob.company}</strong> including company culture, employee reviews, salary information, and interview experiences.
                                        </p>
                                        
                                        {/* Quick Stats */}
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mb-4">
                                            <div className="bg-white rounded-lg p-3 border border-blue-100">
                                                <p className="text-xs text-slate-600 mb-1">Company Rating</p>
                                                <p className="text-lg font-bold text-blue-600">
                                                    {companyDetails ? `${companyDetails.rating.toFixed(1)} ⭐` : 'N/A'}
                                                </p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3 border border-blue-100">
                                                <p className="text-xs text-slate-600 mb-1">Reviews</p>
                                                <p className="text-lg font-bold text-blue-600">
                                                    {companyDetails ? `${(companyDetails.review_count / 1000).toFixed(0)}K+` : 'N/A'}
                                                </p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3 border border-blue-100">
                                                <p className="text-xs text-slate-600 mb-1">Salaries</p>
                                                <p className="text-lg font-bold text-blue-600">
                                                    {companyDetails ? `${(companyDetails.salary_count / 1000).toFixed(0)}K+` : 'N/A'}
                                                </p>
                                            </div>
                                        </div>
                                        
                                        <p className="text-slate-600 text-xs mb-3 italic">
                                            💡 Tip: Use company insights to better understand the work environment and prepare for interviews.
                                        </p>

                                        <details className="mb-3">
                                            <summary className="cursor-pointer text-slate-800 font-semibold hover:text-blue-600 transition-colors">
                                                📊 Company Details
                                            </summary>
                                            {isLoadingCompanyData ? (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <div className="inline-block animate-spin text-blue-600 text-xl">⟳</div>
                                                    <p className="mt-2 text-slate-600 text-sm">Loading company information...</p>
                                                </div>
                                            ) : companyDetails ? (
                                                <div className="mt-3 bg-white rounded-lg border border-slate-200 p-4 space-y-4">
                                                    {/* Company Overview */}
                                                    <div className="grid grid-cols-2 gap-4 pb-4 border-b border-slate-200">
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Industry</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.industry}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Company Size</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.company_size}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Headquarters</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.headquarters_location}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Founded</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.year_founded}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Company Type</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.company_type}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-xs text-slate-600 mb-1">Revenue</p>
                                                            <p className="font-semibold text-slate-800">{companyDetails.revenue}</p>
                                                        </div>
                                                    </div>
                                                    
                                                    {/* Company Description */}
                                                    <div>
                                                        <p className="text-xs text-slate-600 mb-2">About</p>
                                                        <p className="text-sm text-slate-700 leading-relaxed">{companyDetails.company_description}</p>
                                                    </div>
                                    
                                                    {/* Ratings Breakdown */}
                                                    <div className="pt-3 border-t border-slate-200">
                                                        <p className="text-xs text-slate-600 mb-3">Company Ratings</p>
                                                        <div className="space-y-2">
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-sm text-slate-700">Compensation & Benefits</span>
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-24 h-2 bg-slate-200 rounded-full overflow-hidden">
                                                                        <div className="h-full bg-blue-500" style={{width: `${(companyDetails.compensation_and_benefits_rating / 5) * 100}%`}}></div>
                                                                    </div>
                                                                    <span className="text-sm font-semibold text-slate-800">{companyDetails.compensation_and_benefits_rating}/5.0</span>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-sm text-slate-700">Culture & Values</span>
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-24 h-2 bg-slate-200 rounded-full overflow-hidden">
                                                                        <div className="h-full bg-blue-500" style={{width: `${(companyDetails.culture_and_values_rating / 5) * 100}%`}}></div>
                                                                    </div>
                                                                    <span className="text-sm font-semibold text-slate-800">{companyDetails.culture_and_values_rating}/5.0</span>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-sm text-slate-700">Work-Life Balance</span>
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-24 h-2 bg-slate-200 rounded-full overflow-hidden">
                                                                        <div className="h-full bg-blue-500" style={{width: `${(companyDetails.work_life_balance_rating / 5) * 100}%`}}></div>
                                                                    </div>
                                                                    <span className="text-sm font-semibold text-slate-800">{companyDetails.work_life_balance_rating}/5.0</span>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-sm text-slate-700">Career Opportunities</span>
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-24 h-2 bg-slate-200 rounded-full overflow-hidden">
                                                                        <div className="h-full bg-blue-500" style={{width: `${(companyDetails.career_opportunities_rating / 5) * 100}%`}}></div>
                                                                    </div>
                                                                    <span className="text-sm font-semibold text-slate-800">{companyDetails.career_opportunities_rating}/5.0</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                    
                                                    {/* Links */}
                                                    {companyDetails.website && (
                                                        <div className="pt-3 border-t border-slate-200">
                                                            <a href={companyDetails.website} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                                                Visit Company Website →
                                                            </a>
                                                        </div>
                                                    )}
                                                </div>
                                            ) : (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <p className="text-slate-600 text-sm">Company details not available</p>
                                                </div>
                                            )}
                                        </details>

                                        <details className="mb-3">
                                            <summary className="cursor-pointer text-slate-800 font-semibold hover:text-blue-600 transition-colors">
                                                💬 Company Reviews
                                                {companyDetails && (
                                                    <span className="ml-2 text-sm text-slate-600 font-normal">
                                                        ({companyDetails.review_count.toLocaleString()} reviews)
                                                    </span>
                                                )}
                                            </summary>
                                            {isLoadingCompanyData ? (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <div className="inline-block animate-spin text-blue-600 text-xl">⟳</div>
                                                    <p className="mt-2 text-slate-600 text-sm">Loading reviews...</p>
                                                </div>
                                            ) : companyReviews.length > 0 ? (
                                                <div className="mt-3 space-y-3">
                                                    {companyReviews.map((review, index) => (
                                                        <div key={index} className="bg-white rounded-lg border border-slate-200 p-4">
                                                            <div className="flex items-start justify-between mb-3">
                                                                <div>
                                                                    <div className="flex items-center gap-2 mb-1">
                                                                        <div className="flex items-center">
                                                                            {[...Array(5)].map((_, i) => (
                                                                                <span key={i} className={i < review.rating ? 'text-yellow-400' : 'text-slate-300'}>
                                                                                    ⭐
                                                                                </span>
                                                                            ))}
                                                                        </div>
                                                                        <span className="text-sm font-semibold text-slate-800">{review.rating}/5</span>
                                                                    </div>
                                                                    <p className="text-sm font-semibold text-slate-800">{review.summary}</p>
                                                                </div>
                                                                <span className="text-xs text-slate-500">
                                                                    {new Date(review.review_datetime).toLocaleDateString()}
                                                                </span>
                                                            </div>
                                                            
                                                            <div className="grid md:grid-cols-2 gap-3 mb-3">
                                                                <div className="bg-green-50 border border-green-200 rounded-lg p-3">
                                                                    <p className="text-xs font-semibold text-green-800 mb-1">👍 Pros</p>
                                                                    <p className="text-sm text-green-700">{review.pros}</p>
                                                                </div>
                                                                <div className="bg-red-50 border border-red-200 rounded-lg p-3">
                                                                    <p className="text-xs font-semibold text-red-800 mb-1">👎 Cons</p>
                                                                    <p className="text-sm text-red-700">{review.cons}</p>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="flex items-center gap-4 text-xs text-slate-600 pt-2 border-t border-slate-200">
                                                                <span>{review.job_title}</span>
                                                                {review.is_current_employee && (
                                                                    <span className="px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full">
                                                                        Current Employee
                                                                    </span>
                                                                )}
                                                                <span>{review.years_of_employment} {review.years_of_employment === 1 ? 'year' : 'years'}</span>
                                                                <span>{review.location}</span>
                                                            </div>
                                                        </div>
                                                    ))}
                                                    {companyDetails && (
                                                        <div className="text-center pt-2">
                                                            <p className="text-xs text-slate-500">
                                                                Showing 3 of {companyDetails.review_count.toLocaleString()} reviews
                                                            </p>
                                                        </div>
                                                    )}
                                                </div>
                                            ) : (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <p className="text-slate-600 text-sm">No reviews available</p>
                                                </div>
                                            )}
                                        </details>

                                        <details>
                                            <summary className="cursor-pointer text-slate-800 font-semibold hover:text-blue-600 transition-colors">
                                                🎤 Interview Experiences
                                            </summary>
                                            {isLoadingCompanyData ? (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <div className="inline-block animate-spin text-blue-600 text-xl">⟳</div>
                                                    <p className="mt-2 text-slate-600 text-sm">Loading interview experiences...</p>
                                                </div>
                                            ) : companyInterviews.length > 0 ? (
                                                <div className="mt-3 space-y-3">
                                                    {companyInterviews.map((interview, index) => (
                                                        <div key={index} className="bg-white rounded-lg border border-slate-200 p-4">
                                                            <div className="flex items-start justify-between mb-3">
                                                                <div>
                                                                    <p className="font-semibold text-slate-800 mb-1">{interview.job_title}</p>
                                                                    <p className="text-sm text-slate-600">{interview.location}</p>
                                                                </div>
                                                                <span className="text-xs text-slate-500">
                                                                    {new Date(interview.review_datetime).toLocaleDateString()}
                                                                </span>
                                                            </div>
                                                            
                                                            <div className="mb-3">
                                                                <p className="text-xs text-slate-600 mb-2">Interview Process</p>
                                                                <p className="text-sm text-slate-700 leading-relaxed">{interview.process_description}</p>
                                                            </div>
                                                            
                                                            <div className="flex items-center gap-4 pt-2 border-t border-slate-200">
                                                                <div className="flex items-center gap-2">
                                                                    <span className="text-xs text-slate-600">Difficulty:</span>
                                                                    <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${
                                                                        interview.difficulty === 'easy' ? 'bg-green-100 text-green-700' :
                                                                        interview.difficulty === 'average' ? 'bg-yellow-100 text-yellow-700' :
                                                                        'bg-red-100 text-red-700'
                                                                    }`}>
                                                                        {interview.difficulty.charAt(0).toUpperCase() + interview.difficulty.slice(1)}
                                                                    </span>
                                                                </div>
                                                                <div className="flex items-center gap-2">
                                                                    <span className="text-xs text-slate-600">Experience:</span>
                                                                    <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${
                                                                        interview.experience === 'positive' ? 'bg-green-100 text-green-700' :
                                                                        interview.experience === 'neutral' ? 'bg-gray-100 text-gray-700' :
                                                                        'bg-red-100 text-red-700'
                                                                    }`}>
                                                                        {interview.experience.charAt(0).toUpperCase() + interview.experience.slice(1)}
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            ) : (
                                                <div className="mt-3 p-4 bg-white rounded-lg border border-slate-200 text-center">
                                                    <p className="text-slate-600 text-sm">No interview experiences available</p>
                                                </div>
                                            )}
                                        </details>
                                    </div>
                                    
                                    <div className="flex gap-3 pt-4 border-t">
                                        <button
                                            onClick={() => handleTailorResume(selectedJob)}
                                            className="flex-1 px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:from-indigo-600 hover:to-purple-600 transition-all"
                                        >
                                            ✨ Tailor Resume
                                        </button>
                                        <a
                                            href={selectedJob.url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="flex-1 px-4 py-3 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-all text-center"
                                        >
                                            Apply Now →
                                        </a>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Job Finder when job-finder-content is shown
        window.renderJobFinder = function() {
            console.log('renderJobFinder called');
            const container = document.getElementById('job-finder-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Job Finder...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<JobFinder />);
                    console.log('Job Finder rendered successfully');
                } catch (error) {
                    console.error('Error rendering Job Finder:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Job Finder</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('job-finder-container not found');
            }
        };

        // Job Tracker React Component
        const JobTracker = () => {
            const [selectedCard, setSelectedCard] = useState(null);
            const [showCardModal, setShowCardModal] = useState(false);
            const [activeModalTab, setActiveModalTab] = useState('details');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            // Mock job cards data
            const [jobCards, setJobCards] = useState([
                {
                    id: 1,
                    title: 'Senior Full Stack Engineer',
                    company: 'TechCorp Inc.',
                    location: 'San Francisco, CA',
                    salary: '$120k - $160k',
                    matchScore: 94,
                    postedDate: '2024-01-15',
                    source: 'LinkedIn',
                    status: 'new-leads',
                    notes: '',
                    applicationDate: '',
                    interviewDate: '',
                    contacts: '',
                    url: '#'
                },
                {
                    id: 2,
                    title: 'Product Manager',
                    company: 'StartupXYZ',
                    location: 'Remote',
                    salary: '$100k - $140k',
                    matchScore: 87,
                    postedDate: '2024-01-12',
                    source: 'Indeed',
                    status: 'reviewing',
                    notes: 'Great company culture',
                    applicationDate: '',
                    interviewDate: '',
                    contacts: '',
                    url: '#'
                },
                {
                    id: 3,
                    title: 'Software Engineer',
                    company: 'BigTech Corp',
                    location: 'New York, NY',
                    salary: '$110k - $150k',
                    matchScore: 82,
                    postedDate: '2024-01-10',
                    source: 'Glassdoor',
                    status: 'applied',
                    notes: 'Applied through company website',
                    applicationDate: '2024-01-18',
                    interviewDate: '',
                    contacts: 'hr@bigtech.com',
                    url: '#'
                },
                {
                    id: 4,
                    title: 'Frontend Developer',
                    company: 'DesignStudio',
                    location: 'Austin, TX',
                    salary: '$90k - $120k',
                    matchScore: 89,
                    postedDate: '2024-01-08',
                    source: 'LinkedIn',
                    status: 'interviewing',
                    notes: 'Phone interview scheduled',
                    applicationDate: '2024-01-15',
                    interviewDate: '2024-01-25',
                    contacts: 'john@designstudio.com',
                    url: '#'
                },
                {
                    id: 5,
                    title: 'DevOps Engineer',
                    company: 'CloudTech',
                    location: 'Seattle, WA',
                    salary: '$130k - $170k',
                    matchScore: 91,
                    postedDate: '2024-01-05',
                    source: 'Company Website',
                    status: 'offer',
                    notes: 'Received offer, negotiating salary',
                    applicationDate: '2024-01-12',
                    interviewDate: '2024-01-20',
                    contacts: 'sarah@cloudtech.com',
                    url: '#'
                }
            ]);

            const columns = [
                { id: 'new-leads', title: 'New Leads (from AI)', color: 'bg-blue-500', count: 0 },
                { id: 'reviewing', title: 'To Apply / Reviewing', color: 'bg-yellow-500', count: 0 },
                { id: 'applied', title: 'Applied', color: 'bg-purple-500', count: 0 },
                { id: 'interviewing', title: 'Interviewing', color: 'bg-orange-500', count: 0 },
                { id: 'offer', title: 'Offer', color: 'bg-green-500', count: 0 },
                { id: 'rejected', title: 'Rejected', color: 'bg-red-500', count: 0 },
                { id: 'archived', title: 'Archived / Not a Fit', color: 'bg-gray-500', count: 0 }
            ];

            // Calculate column counts
            const getColumnCount = (status) => {
                return jobCards.filter(card => card.status === status).length;
            };

            const getMatchScoreColor = (score) => {
                if (score >= 90) return 'text-green-400 bg-green-500/20';
                if (score >= 80) return 'text-blue-400 bg-blue-500/20';
                if (score >= 70) return 'text-yellow-400 bg-yellow-500/20';
                return 'text-red-400 bg-red-500/20';
            };

            const handleDragStart = (e, cardId) => {
                e.dataTransfer.setData('text/plain', cardId);
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            const handleDrop = (e, newStatus) => {
                e.preventDefault();
                const cardId = parseInt(e.dataTransfer.getData('text/plain'));
                
                setJobCards(prevCards => 
                    prevCards.map(card => 
                        card.id === cardId ? { ...card, status: newStatus } : card
                    )
                );

                // Generate interview prep kit if moving to interviewing
                if (newStatus === 'interviewing') {
                    console.log('Generating interview prep kit for job:', cardId);
                }
            };

            const handleCardClick = (card) => {
                setSelectedCard(card);
                setShowCardModal(true);
                setActiveModalTab('details');
            };

            const handleCloseModal = () => {
                setShowCardModal(false);
                setSelectedCard(null);
            };

            const handleSaveNotes = () => {
                if (selectedCard) {
                    setJobCards(prevCards =>
                        prevCards.map(card =>
                            card.id === selectedCard.id ? { ...card, notes: selectedCard.notes } : card
                        )
                    );
                }
            };

            return (
                <div className="space-y-8">
                    {/* Header */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg">
                                    <div className="w-6 h-6 text-white text-xl">📁</div>
                                </div>
                                <div>
                                    <h1 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Job Tracker</h1>
                                    <p className={`${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>Kanban board for managing your application pipeline</p>
                                </div>
                            </div>
                            <button className="bg-gradient-to-r from-indigo-500 to-violet-600 text-white px-6 py-3 rounded-2xl font-semibold flex items-center gap-2 hover:from-indigo-600 hover:to-violet-700 transition-all duration-300 hover:transform hover:scale-105">
                                <div className="w-5 h-5">➕</div>
                                Add Job Manually
                            </button>
                        </div>
                    </div>

                    {/* Summary Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center">
                                    <div className="w-6 h-6 text-white text-xl">🎯</div>
                                </div>
                                <div>
                                    <div className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{getColumnCount('new-leads')}</div>
                                    <div className={`text-sm ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>New Leads</div>
                                </div>
                            </div>
                        </div>

                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 bg-green-500 rounded-2xl flex items-center justify-center">
                                    <div className="w-6 h-6 text-white text-xl">✅</div>
                                </div>
                                <div>
                                    <div className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{getColumnCount('applied')}</div>
                                    <div className={`text-sm ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>Applications Sent</div>
                                </div>
                            </div>
                        </div>

                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 bg-orange-500 rounded-2xl flex items-center justify-center">
                                    <div className="w-6 h-6 text-white text-xl">📅</div>
                                </div>
                                <div>
                                    <div className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{getColumnCount('interviewing')}</div>
                                    <div className={`text-sm ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>Interviews Scheduled</div>
                                </div>
                            </div>
                        </div>

                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 bg-yellow-500 rounded-2xl flex items-center justify-center">
                                    <div className="w-6 h-6 text-white text-xl">⭐</div>
                                </div>
                                <div>
                                    <div className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>87%</div>
                                    <div className={`text-sm ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>Avg. Match Score</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Kanban Board */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-6`}>
                        <div className="flex gap-6 overflow-x-auto pb-4">
                            {columns.map((column) => (
                                <div key={column.id} className="flex-shrink-0 w-80">
                                    <div className={`${isLightMode ? 'bg-white/70' : 'bg-gray-800/70'} rounded-2xl p-4 min-h-96`}>
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className={`w-3 h-3 rounded-full ${column.color}`}></div>
                                            <h3 className={`font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{column.title}</h3>
                                            <span className={`text-sm ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>({getColumnCount(column.id)})</span>
                                        </div>
                                        
                                        <div
                                            className="space-y-3 min-h-80"
                                            onDragOver={handleDragOver}
                                            onDrop={(e) => handleDrop(e, column.id)}
                                        >
                                            {jobCards
                                                .filter(card => card.status === column.id)
                                                .map((card) => (
                                                    <div
                                                        key={card.id}
                                                        draggable
                                                        onDragStart={(e) => handleDragStart(e, card.id)}
                                                        onClick={() => handleCardClick(card)}
                                                        className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-slate-800 border-slate-700'} border rounded-2xl p-4 cursor-pointer hover:scale-105 transition-all duration-300 hover:shadow-lg`}
                                                    >
                                                        <div className="flex items-start justify-between mb-3">
                                                            <div className="flex-1">
                                                                <h4 className={`font-semibold text-sm mb-1 ${isLightMode ? 'text-slate-800' : 'text-white'}`}>{card.title}</h4>
                                                                <p className={`text-xs ${isLightMode ? 'text-slate-600' : 'text-slate-300'}`}>{card.company}</p>
                                                            </div>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${getMatchScoreColor(card.matchScore)}`}>
                                                                {card.matchScore}%
                                                            </span>
                                                        </div>
                                                        
                                                        <div className={`space-y-2 text-xs ${isLightMode ? 'text-slate-500' : 'text-slate-400'}`}>
                                                            <div className="flex items-center gap-2">
                                                                <div className="w-3 h-3">📍</div>
                                                                <span>{card.location}</span>
                                                            </div>
                                                            <div className="flex items-center gap-2">
                                                                <div className="w-3 h-3">💰</div>
                                                                <span>{card.salary}</span>
                                                            </div>
                                                            <div className="flex items-center gap-2">
                                                                <div className="w-3 h-3">📅</div>
                                                                <span>Posted: {card.postedDate}</span>
                                                            </div>
                                                            {card.applicationDate && (
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-3 h-3">✅</div>
                                                                    <span>Applied: {card.applicationDate}</span>
                                                                </div>
                                                            )}
                                                            {card.interviewDate && (
                                                                <div className="flex items-center gap-2">
                                                                    <div className="w-3 h-3">📅</div>
                                                                    <span>Interview: {card.interviewDate}</span>
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                ))}
                                            
                                            {getColumnCount(column.id) === 0 && (
                                                <div className="text-center py-8 text-slate-500 text-sm">
                                                    No jobs in this stage
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Job Card Modal */}
                    {showCardModal && selectedCard && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className={`${isLightMode ? 'bg-white/95 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-2xl rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden`}>
                                <div className={`flex items-center justify-between p-6 border-b ${isLightMode ? 'border-slate-200' : 'border-gray-700'}`}>
                                    <h2 className={`text-xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{selectedCard.title}</h2>
                                    <button
                                        onClick={handleCloseModal}
                                        className={`${isLightMode ? 'text-slate-600 hover:text-slate-800' : 'text-gray-400 hover:text-gray-200'}`}
                                    >
                                        <div className="w-6 h-6">✕</div>
                                    </button>
                                </div>

                                {/* Modal Tabs */}
                                <div className={`flex border-b ${isLightMode ? 'border-slate-200' : 'border-gray-700'}`}>
                                    {[
                                        { id: 'details', label: 'Job Details', icon: '👁️' },
                                        { id: 'ai-assistant', label: 'AI Assistant', icon: '🤖' },
                                        { id: 'notes', label: 'My Notes & Activity', icon: '📝' }
                                    ].map((tab) => (
                                        <button
                                            key={tab.id}
                                            onClick={() => setActiveModalTab(tab.id)}
                                            className={`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${
                                                activeModalTab === tab.id
                                                    ? 'text-indigo-600 border-b-2 border-indigo-600'
                                                    : (isLightMode ? 'text-slate-600 hover:text-slate-800' : 'text-gray-400 hover:text-gray-200')
                                            }`}
                                        >
                                            <div className="w-4 h-4">{tab.icon}</div>
                                            {tab.label}
                                        </button>
                                    ))}
                                </div>

                                {/* Modal Content */}
                                <div className="p-6 max-h-96 overflow-y-auto">
                                    {activeModalTab === 'details' && (
                                        <div className="space-y-6">
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div>
                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Job Information</h3>
                                                    <div className="space-y-3">
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>🏢</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{selectedCard.company}</span>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>📍</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{selectedCard.location}</span>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>💰</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>{selectedCard.salary}</span>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>📅</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Posted: {selectedCard.postedDate}</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Application Status</h3>
                                                    <div className="space-y-3">
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>⭐</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Match Score: {selectedCard.matchScore}%</span>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>🔗</div>
                                                            <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Source: {selectedCard.source}</span>
                                                        </div>
                                                        {selectedCard.applicationDate && (
                                                            <div className="flex items-center gap-3">
                                                                <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>✅</div>
                                                                <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Applied: {selectedCard.applicationDate}</span>
                                                            </div>
                                                        )}
                                                        {selectedCard.interviewDate && (
                                                            <div className="flex items-center gap-3">
                                                                <div className={`w-5 h-5 ${isLightMode ? 'text-slate-600' : 'text-gray-400'}`}>📅</div>
                                                                <span className={`${isLightMode ? 'text-slate-800' : 'text-gray-50'}`}>Interview: {selectedCard.interviewDate}</span>
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Job Description</h3>
                                                <div className={`${isLightMode ? 'bg-slate-50' : 'bg-gray-800'} rounded-xl p-4`}>
                                                    <p className={`text-sm leading-relaxed ${isLightMode ? 'text-slate-700' : 'text-gray-300'}`}>
                                                        We are looking for a {selectedCard.title} to join our growing team. 
                                                        This role involves working on cutting-edge projects and collaborating 
                                                        with talented engineers to build scalable solutions.
                                                    </p>
                                                </div>
                                                <button className="mt-4 bg-gradient-to-r from-indigo-500 to-violet-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-indigo-600 hover:to-violet-700 transition-all duration-300">
                                                    Apply Now
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {activeModalTab === 'ai-assistant' && (
                                        <div className="space-y-6">
                                            <div>
                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Generated Cover Letter</h3>
                                                <div className={`${isLightMode ? 'bg-slate-50' : 'bg-gray-800'} rounded-xl p-4 mb-4`}>
                                                    <p className={`text-sm leading-relaxed ${isLightMode ? 'text-slate-700' : 'text-gray-300'}`}>
                                                        Dear Hiring Manager,<br/><br/>
                                                        I am writing to express my strong interest in the {selectedCard.title} position at {selectedCard.company}...
                                                    </p>
                                                </div>
                                                <div className="flex gap-3">
                                                    <button className="bg-blue-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                                                        Copy
                                                    </button>
                                                    <button className="bg-slate-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-slate-600 transition-colors">
                                                        Edit
                                                    </button>
                                                </div>
                                            </div>

                                            <div>
                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Tailored CV Highlights</h3>
                                                <div className="space-y-2">
                                                    <div className="flex items-center gap-2">
                                                        <div className="w-4 h-4 text-green-600">✅</div>
                                                        <span className={`${isLightMode ? 'text-slate-700' : 'text-gray-300'}`}>React and TypeScript experience</span>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <div className="w-4 h-4 text-green-600">✅</div>
                                                        <span className={`${isLightMode ? 'text-slate-700' : 'text-gray-300'}`}>Full-stack development background</span>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <div className="w-4 h-4 text-green-600">✅</div>
                                                        <span className={`${isLightMode ? 'text-slate-700' : 'text-gray-300'}`}>Team leadership experience</span>
                                                    </div>
                                                </div>
                                                <button className="mt-4 bg-gradient-to-r from-indigo-500 to-violet-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-indigo-600 hover:to-violet-700 transition-all duration-300">
                                                    Generate Tailored Resume
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {activeModalTab === 'notes' && (
                                        <div className="space-y-6">
                                            <div>
                                                <label className={`block text-sm font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-3`}>Contacts</label>
                                                <input
                                                    type="text"
                                                    value={selectedCard.contacts}
                                                    onChange={(e) => setSelectedCard({...selectedCard, contacts: e.target.value})}
                                                    placeholder="hr@company.com, recruiter@company.com"
                                                    className={`w-full px-4 py-3 ${isLightMode ? 'bg-white/70 border-slate-300 text-slate-800 placeholder-slate-500' : 'bg-gray-800/70 border-gray-600 text-gray-50 placeholder-gray-400'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all duration-300`}
                                                />
                                            </div>

                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label className={`block text-sm font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-3`}>Application Deadline</label>
                                                    <input
                                                        type="date"
                                                        className={`w-full px-4 py-3 ${isLightMode ? 'bg-white/70 border-slate-300 text-slate-800' : 'bg-gray-800/70 border-gray-600 text-gray-50'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all duration-300`}
                                                    />
                                                </div>
                                                <div>
                                                    <label className={`block text-sm font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-3`}>Follow-up Date</label>
                                                    <input
                                                        type="date"
                                                        className={`w-full px-4 py-3 ${isLightMode ? 'bg-white/70 border-slate-300 text-slate-800' : 'bg-gray-800/70 border-gray-600 text-gray-50'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all duration-300`}
                                                    />
                                                </div>
                                            </div>

                                            <div>
                                                <label className={`block text-sm font-semibold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-3`}>Notes</label>
                                                <textarea
                                                    value={selectedCard.notes}
                                                    onChange={(e) => setSelectedCard({...selectedCard, notes: e.target.value})}
                                                    placeholder="Add your notes about this job application..."
                                                    rows={4}
                                                    className={`w-full px-4 py-3 ${isLightMode ? 'bg-white/70 border-slate-300 text-slate-800 placeholder-slate-500' : 'bg-gray-800/70 border-gray-600 text-gray-50 placeholder-gray-400'} border rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none resize-none transition-all duration-300`}
                                                />
                                            </div>

                                            <div className="flex gap-3">
                                                <button
                                                    onClick={handleSaveNotes}
                                                    className="bg-gradient-to-r from-indigo-500 to-violet-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-indigo-600 hover:to-violet-700 transition-all duration-300"
                                                >
                                                    Save Notes
                                                </button>
                                                <button className="bg-slate-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-slate-600 transition-colors">
                                                    Set Reminder
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Job Tracker when job-tracker-content is shown
        window.renderJobTracker = function() {
            console.log('renderJobTracker called');
            const container = document.getElementById('job-tracker-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Job Tracker...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<JobTracker />);
                    console.log('Job Tracker rendered successfully');
                } catch (error) {
                    console.error('Error rendering Job Tracker:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Job Tracker</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('job-tracker-container not found');
            }
        };

        // Interview Prep Kit React Component
        const InterviewPrepKit = () => {
            const [activeTab, setActiveTab] = useState('overview');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const features = [
                {
                    icon: '🧠',
                    title: 'AI Mock Interviews',
                    description: 'Practice with AI-powered interviewers that adapt to your responses and provide real-time feedback.'
                },
                {
                    icon: '💬',
                    title: 'Question Bank',
                    description: 'Access thousands of interview questions organized by role, company, and difficulty level.'
                },
                {
                    icon: '📄',
                    title: 'Answer Templates',
                    description: 'Get structured templates and examples for common interview questions and scenarios.'
                },
                {
                    icon: '🎯',
                    title: 'Performance Analytics',
                    description: 'Track your progress with detailed analytics on your interview performance and improvement areas.'
                }
            ];

            const quickStartSteps = [
                {
                    number: 1,
                    title: 'Set Your Goals',
                    description: 'Define your target role and company preferences to personalize your preparation.'
                },
                {
                    number: 2,
                    title: 'Practice Sessions',
                    description: 'Start with AI mock interviews tailored to your specific role and industry.'
                },
                {
                    number: 3,
                    title: 'Track Progress',
                    description: 'Monitor your improvement and refine your approach based on detailed analytics.'
                }
            ];

            const tabs = [
                { id: 'overview', label: 'Overview', icon: '📊' },
                { id: 'practice', label: 'Practice', icon: '🎯' },
                { id: 'questions', label: 'Questions', icon: '❓' },
                { id: 'analytics', label: 'Analytics', icon: '📈' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-slate-900'} border rounded-lg p-1`}>
                        <div className="flex space-x-1">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${
                                        activeTab === tab.id
                                            ? 'bg-blue-600 text-white'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-slate-400 hover:text-white hover:bg-slate-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border shadow-lg rounded-2xl p-8`}>
                        {activeTab === 'overview' && (
                            <div className="space-y-8">
                                {/* Features Grid */}
                                <div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-6`}>Key Features</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {features.map((feature, index) => (
                                            <div key={index} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-slate-900 border-slate-800'} border rounded-xl p-6 hover:border-blue-500/50 transition-all duration-300`}>
                                                <div className="flex items-center gap-3 mb-4">
                                                    <div className="w-10 h-10 bg-blue-600/20 rounded-lg flex items-center justify-center">
                                                        <div className="w-5 h-5 text-blue-400 text-xl">{feature.icon}</div>
                                                    </div>
                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-white'}`}>{feature.title}</h3>
                                                </div>
                                                <p className={`${isLightMode ? 'text-slate-600' : 'text-slate-400'} text-sm leading-relaxed`}>{feature.description}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Quick Start Guide */}
                                <div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-6`}>Quick Start Guide</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        {quickStartSteps.map((step, index) => (
                                            <div key={index} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-slate-900 border-slate-800'} border rounded-xl p-6`}>
                                                <div className="flex items-start gap-4">
                                                    <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                                                        <span className="text-white font-bold text-sm">{step.number}</span>
                                                    </div>
                                                    <div>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-slate-800' : 'text-white'} mb-2`}>{step.title}</h3>
                                                        <p className={`${isLightMode ? 'text-slate-600' : 'text-slate-400'} text-sm leading-relaxed`}>{step.description}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'practice' && (
                            <div className="text-center py-12">
                                <div className="w-16 h-16 text-blue-400 mx-auto mb-6 text-6xl">🧠</div>
                                <h2 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Start Your Practice Session</h2>
                                <p className={`${isLightMode ? 'text-slate-600' : 'text-gray-400'} mb-8 max-w-md mx-auto`}>
                                    Practice with our AI interviewer that adapts to your responses and provides real-time feedback to help you improve.
                                </p>
                                <button className="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold flex items-center gap-2 mx-auto hover:bg-blue-700 transition-all duration-300 hover:transform hover:scale-105">
                                    <div className="w-5 h-5">▶️</div>
                                    Start Mock Interview
                                </button>
                            </div>
                        )}

                        {activeTab === 'questions' && (
                            <div className="text-center py-12">
                                <div className="w-16 h-16 text-blue-400 mx-auto mb-6 text-6xl">💬</div>
                                <h2 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Browse Interview Questions</h2>
                                <p className={`${isLightMode ? 'text-slate-600' : 'text-gray-400'} mb-8 max-w-md mx-auto`}>
                                    Access our comprehensive database of interview questions organized by role, company, and difficulty level.
                                </p>
                                <button className="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold flex items-center gap-2 mx-auto hover:bg-blue-700 transition-all duration-300 hover:transform hover:scale-105">
                                    <div className="w-5 h-5">🔍</div>
                                    Browse Questions
                                </button>
                            </div>
                        )}

                        {activeTab === 'analytics' && (
                            <div className="text-center py-12">
                                <div className="w-16 h-16 text-blue-400 mx-auto mb-6 text-6xl">🎯</div>
                                <h2 className={`text-2xl font-bold ${isLightMode ? 'text-slate-800' : 'text-gray-50'} mb-4`}>Track Your Progress</h2>
                                <p className={`${isLightMode ? 'text-slate-600' : 'text-gray-400'} mb-8 max-w-md mx-auto`}>
                                    Monitor your interview performance with detailed analytics and insights to identify areas for improvement.
                                </p>
                                <button className="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold flex items-center gap-2 mx-auto hover:bg-blue-700 transition-all duration-300 hover:transform hover:scale-105">
                                    <div className="w-5 h-5">📊</div>
                                    View Analytics
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render Interview Prep Kit when interview-prep-content is shown
        window.renderInterviewPrepKit = function() {
            console.log('renderInterviewPrepKit called');
            const container = document.getElementById('interview-prep-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Interview Prep Kit...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<InterviewPrepKit />);
                    console.log('Interview Prep Kit rendered successfully');
                } catch (error) {
                    console.error('Error rendering Interview Prep Kit:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Interview Prep Kit</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('interview-prep-container not found');
            }
        };

        // Work History Manager React Component
        const WorkHistoryManager = () => {
            const [activeTab, setActiveTab] = useState('all');
            const [searchQuery, setSearchQuery] = useState('');
            const [sortBy, setSortBy] = useState('date');
            const [filterStatus, setFilterStatus] = useState('all');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const mockDocuments = [
                {
                    id: 1,
                    title: 'Senior Software Engineer Resume',
                    type: 'resume',
                    content: 'Professional resume for senior software engineer position...',
                    createdAt: '2024-01-15',
                    updatedAt: '2024-01-20',
                    jobTitle: 'Senior Software Engineer',
                    company: 'Tech Corp',
                    status: 'completed',
                    atsScore: 95
                },
                {
                    id: 2,
                    title: 'Marketing Manager Cover Letter',
                    type: 'cover-letter',
                    content: 'Cover letter for marketing manager position...',
                    createdAt: '2024-01-18',
                    updatedAt: '2024-01-18',
                    jobTitle: 'Marketing Manager',
                    company: 'Creative Agency',
                    status: 'completed',
                    atsScore: 88
                },
                {
                    id: 3,
                    title: 'Tailored Resume - Google',
                    type: 'tailored-resume',
                    content: 'Tailored resume for Google software engineer position...',
                    createdAt: '2024-01-22',
                    updatedAt: '2024-01-22',
                    jobTitle: 'Software Engineer',
                    company: 'Google',
                    status: 'completed',
                    atsScore: 92
                },
                {
                    id: 4,
                    title: 'Application Tailor - Microsoft',
                    type: 'application-tailor',
                    content: 'Application tailored for Microsoft product manager role...',
                    createdAt: '2024-01-25',
                    updatedAt: '2024-01-25',
                    jobTitle: 'Product Manager',
                    company: 'Microsoft',
                    status: 'draft',
                    atsScore: 76
                },
                {
                    id: 5,
                    title: 'Data Scientist Resume',
                    type: 'resume',
                    content: 'Resume for data scientist position...',
                    createdAt: '2024-01-28',
                    updatedAt: '2024-01-28',
                    jobTitle: 'Data Scientist',
                    company: 'AI Startup',
                    status: 'completed',
                    atsScore: 89
                },
                {
                    id: 6,
                    title: 'Cover Letter - Amazon',
                    type: 'cover-letter',
                    content: 'Cover letter for Amazon solutions architect role...',
                    createdAt: '2024-01-30',
                    updatedAt: '2024-01-30',
                    jobTitle: 'Solutions Architect',
                    company: 'Amazon',
                    status: 'draft',
                    atsScore: 82
                }
            ];

            const getTypeIcon = (type) => {
                switch (type) {
                    case 'resume':
                        return '⭐';
                    case 'tailored-resume':
                        return '🎯';
                    case 'application-tailor':
                        return '🎯';
                    case 'cover-letter':
                        return '📄';
                    default:
                        return '📄';
                }
            };

            const getTypeLabel = (type) => {
                switch (type) {
                    case 'resume':
                        return 'Resume';
                    case 'tailored-resume':
                        return 'Tailored Resume';
                    case 'application-tailor':
                        return 'Application Tailor';
                    case 'cover-letter':
                        return 'Cover Letter';
                    default:
                        return 'Document';
                }
            };

            const getScoreColor = (score) => {
                if (score >= 90) return 'text-green-400';
                if (score >= 70) return 'text-yellow-400';
                return 'text-red-400';
            };

            const getStatusColor = (status) => {
                return status === 'completed' ? 'bg-green-500/20 text-green-400' : 'bg-yellow-500/20 text-yellow-400';
            };

            const getTypeColor = (type) => {
                switch (type) {
                    case 'resume':
                        return 'text-yellow-400';
                    case 'tailored-resume':
                        return 'text-orange-400';
                    case 'application-tailor':
                        return 'text-orange-400';
                    case 'cover-letter':
                        return 'text-blue-400';
                    default:
                        return 'text-gray-400';
                }
            };

            const filteredDocuments = mockDocuments.filter(doc => {
                const matchesTab = activeTab === 'all' || 
                    (activeTab === 'resumes' && doc.type === 'resume') ||
                    (activeTab === 'tailored' && (doc.type === 'tailored-resume' || doc.type === 'application-tailor')) ||
                    (activeTab === 'cover-letters' && doc.type === 'cover-letter');
                
                const matchesSearch = searchQuery === '' || 
                    doc.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    doc.jobTitle.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    doc.company.toLowerCase().includes(searchQuery.toLowerCase());
                
                const matchesStatus = filterStatus === 'all' || doc.status === filterStatus;
                
                return matchesTab && matchesSearch && matchesStatus;
            });

            const sortedDocuments = [...filteredDocuments].sort((a, b) => {
                switch (sortBy) {
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'type':
                        return a.type.localeCompare(b.type);
                    case 'date':
                    default:
                        return new Date(b.updatedAt) - new Date(a.updatedAt);
                }
            });

            const handleView = (doc) => {
                alert(`Viewing: ${doc.title}`);
            };

            const handleEdit = (doc) => {
                alert(`Editing: ${doc.title}`);
            };

            const handleDownload = (doc) => {
                const blob = new Blob([doc.content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${doc.title}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const handleDelete = (doc) => {
                if (confirm(`Are you sure you want to delete "${doc.title}"?`)) {
                    alert(`Deleted: ${doc.title}`);
                }
            };

            const getStats = () => {
                const resumes = mockDocuments.filter(doc => doc.type === 'resume').length;
                const tailored = mockDocuments.filter(doc => doc.type === 'tailored-resume' || doc.type === 'application-tailor').length;
                const coverLetters = mockDocuments.filter(doc => doc.type === 'cover-letter').length;
                const drafts = mockDocuments.filter(doc => doc.status === 'draft').length;
                
                return { resumes, tailored, coverLetters, drafts };
            };

            const stats = getStats();

            return (
                <div className="space-y-8">

                    {/* Summary Statistics */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                            <div className="flex items-center gap-3 mb-4">
                                <div className="w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                    <div className="w-5 h-5 text-yellow-400 text-xl">⭐</div>
                                </div>
                                <div>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Master Resumes</h3>
                                    <p className="text-3xl font-bold text-yellow-400">{stats.resumes}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                            <div className="flex items-center gap-3 mb-4">
                                <div className="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">
                                    <div className="w-5 h-5 text-orange-400 text-xl">🎯</div>
                                </div>
                                <div>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Tailored Resumes</h3>
                                    <p className="text-3xl font-bold text-orange-400">{stats.tailored}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                            <div className="flex items-center gap-3 mb-4">
                                <div className="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                    <div className="w-5 h-5 text-blue-400 text-xl">📄</div>
                                </div>
                                <div>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Cover Letters</h3>
                                    <p className="text-3xl font-bold text-blue-400">{stats.coverLetters}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                            <div className="flex items-center gap-3 mb-4">
                                <div className="w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                    <div className="w-5 h-5 text-yellow-400 text-xl">⏰</div>
                                </div>
                                <div>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Draft Documents</h3>
                                    <p className="text-3xl font-bold text-yellow-400">{stats.drafts}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Filters and Search */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                        {/* Tab Navigation */}
                        <div className="flex flex-wrap gap-2 mb-6">
                            {[
                                { id: 'all', label: 'All Items' },
                                { id: 'resumes', label: 'Resumes' },
                                { id: 'tailored', label: 'Tailored Resumes' },
                                { id: 'cover-letters', label: 'Cover Letters' }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${
                                        activeTab === tab.id
                                            ? 'bg-indigo-600 text-white'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    {tab.label}
                                </button>
                            ))}
                        </div>

                        {/* Search and Filters */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div className="relative">
                                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <div className={`w-5 h-5 ${isLightMode ? 'text-gray-400' : 'text-gray-400'}`}>🔍</div>
                                </div>
                                <input
                                    type="text"
                                    placeholder="Search documents..."
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    className={`w-full pl-10 pr-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                />
                            </div>
                            
                            <select
                                value={sortBy}
                                onChange={(e) => setSortBy(e.target.value)}
                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                            >
                                <option value="date">Sort by Date</option>
                                <option value="title">Sort by Title</option>
                                <option value="type">Sort by Type</option>
                            </select>
                            
                            <select
                                value={filterStatus}
                                onChange={(e) => setFilterStatus(e.target.value)}
                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                            >
                                <option value="all">All Status</option>
                                <option value="completed">Completed</option>
                                <option value="draft">Drafts</option>
                            </select>
                        </div>
                    </div>

                    {/* Documents Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {sortedDocuments.length > 0 ? (
                            sortedDocuments.map(doc => (
                                <div key={doc.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 hover:border-indigo-500/50 transition-all duration-300 hover:scale-105`}>
                                    <div className="flex items-start justify-between mb-4">
                                        <div className="flex items-center gap-3">
                                            <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${getTypeColor(doc.type)}`}>
                                                <div className="text-xl">{getTypeIcon(doc.type)}</div>
                                            </div>
                                            <div>
                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} line-clamp-2`}>{doc.title}</h3>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{getTypeLabel(doc.type)}</p>
                                            </div>
                                        </div>
                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(doc.status)}`}>
                                            {doc.status}
                                        </span>
                                    </div>
                                    
                                    <div className="space-y-3 mb-4">
                                        <div className="flex items-center gap-2">
                                            <div className={`w-4 h-4 ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>👤</div>
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{doc.jobTitle}</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className={`w-4 h-4 ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>🏢</div>
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{doc.company}</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className={`w-4 h-4 ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>📊</div>
                                            <span className={`text-sm font-medium ${getScoreColor(doc.atsScore)}`}>
                                                ATS Score: {doc.atsScore}%
                                            </span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className={`w-4 h-4 ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>📅</div>
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                Updated: {new Date(doc.updatedAt).toLocaleDateString()}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => handleView(doc)}
                                            className="flex-1 bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center gap-1"
                                        >
                                            <div className="w-4 h-4">👁️</div>
                                            View
                                        </button>
                                        <button
                                            onClick={() => handleEdit(doc)}
                                            className="flex-1 bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors duration-200 flex items-center justify-center gap-1"
                                        >
                                            <div className="w-4 h-4">✏️</div>
                                            Edit
                                        </button>
                                        <button
                                            onClick={() => handleDownload(doc)}
                                            className="flex-1 bg-purple-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center gap-1"
                                        >
                                            <div className="w-4 h-4">⬇️</div>
                                            Download
                                        </button>
                                        <button
                                            onClick={() => handleDelete(doc)}
                                            className="bg-red-400 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-red-500 transition-colors duration-200 flex items-center justify-center"
                                        >
                                            <div className="w-4 h-4">🗑️</div>
                                        </button>
                                    </div>
                                </div>
                            ))
                        ) : (
                            <div className="col-span-full text-center py-20">
                                <div className={`w-16 h-16 ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mx-auto mb-4 text-6xl`}>📁</div>
                                <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>No documents found</h3>
                                <p className={isLightMode ? 'text-gray-500' : 'text-gray-400'}>Try adjusting your search or filters to find what you're looking for.</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render Work History Manager when work-history-content is shown
        window.renderWorkHistoryManager = function() {
            console.log('renderWorkHistoryManager called');
            const container = document.getElementById('work-history-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Work History Manager...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<WorkHistoryManager />);
                    console.log('Work History Manager rendered successfully');
                } catch (error) {
                    console.error('Error rendering Work History Manager:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Work History Manager</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('work-history-container not found');
            }
        };

        // AI-Powered Personal Brand Audit React Component
        const AIBrandAudit = () => {
            const [step, setStep] = useState('input');
            const [resumeFile, setResumeFile] = useState(null);
            const [linkedinUrl, setLinkedinUrl] = useState('');
            const [githubUrl, setGithubUrl] = useState('');
            const [portfolioUrl, setPortfolioUrl] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [processingStep, setProcessingStep] = useState(0);
            const [processingProgress, setProcessingProgress] = useState(0);
            const [brandScore, setBrandScore] = useState(null);
            const [recommendations, setRecommendations] = useState([]);
            const [uploadError, setUploadError] = useState('');
            const [selectedRecommendation, setSelectedRecommendation] = useState(null);

            const processingSteps = [
                { text: 'Analyzing your resume content...', duration: 2000 },
                { text: 'Extracting LinkedIn profile data...', duration: 2500 },
                { text: 'Comparing against industry standards...', duration: 2000 },
                { text: 'Generating personalized recommendations...', duration: 3000 },
                { text: 'Finalizing your brand score...', duration: 1500 }
            ];

            const mockBrandScore = {
                overall: 78,
                linkedin: 82,
                resume: 74,
                portfolio: 85,
                github: 71
            };

            const mockRecommendations = [
                {
                    id: 1,
                    priority: 'high',
                    category: 'LinkedIn',
                    title: 'Optimize your LinkedIn headline',
                    description: 'Your current headline is generic. Add specific skills and achievements to stand out.',
                    impact: 'High impact',
                    difficulty: 'easy',
                    example: 'Instead of "Software Engineer", try "Senior Full-Stack Developer | React & Node.js | 5+ Years Experience"'
                },
                {
                    id: 2,
                    priority: 'medium',
                    category: 'Resume',
                    title: 'Add quantifiable achievements',
                    description: 'Include specific metrics and numbers to demonstrate your impact.',
                    impact: 'Medium impact',
                    difficulty: 'medium',
                    example: 'Instead of "Improved system performance", try "Improved system performance by 40% through optimization"'
                },
                {
                    id: 3,
                    priority: 'high',
                    category: 'Portfolio',
                    title: 'Add project case studies',
                    description: 'Include detailed case studies showing your problem-solving process.',
                    impact: 'High impact',
                    difficulty: 'hard',
                    example: 'Create detailed project pages with challenges, solutions, and results'
                },
                {
                    id: 4,
                    priority: 'low',
                    category: 'GitHub',
                    title: 'Improve repository documentation',
                    description: 'Add comprehensive README files to your repositories.',
                    impact: 'Low impact',
                    difficulty: 'easy',
                    example: 'Include setup instructions, features, and screenshots'
                }
            ];

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    if (file.size > 10 * 1024 * 1024) {
                        setUploadError('File size must be less than 10MB');
                        return;
                    }
                    if (!['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/msword'].includes(file.type)) {
                        setUploadError('Only PDF, DOCX, and DOC files are allowed');
                        return;
                    }
                    setResumeFile(file);
                    setUploadError('');
                }
            };

            const handleStartAudit = () => {
                if (!resumeFile && !linkedinUrl) {
                    alert('Please upload a resume or provide a LinkedIn URL');
                    return;
                }
                
                setStep('processing');
                setIsProcessing(true);
                setProcessingStep(0);
                setProcessingProgress(0);
                
                let currentStep = 0;
                let currentProgress = 0;
                
                const processStep = () => {
                    if (currentStep < processingSteps.length) {
                        setProcessingStep(currentStep);
                        const step = processingSteps[currentStep];
                        
                        const progressInterval = setInterval(() => {
                            currentProgress += 100 / (step.duration / 100);
                            setProcessingProgress(Math.min(currentProgress, 100));
                            
                            if (currentProgress >= 100) {
                                clearInterval(progressInterval);
                                currentStep++;
                                currentProgress = 0;
                                setTimeout(processStep, 500);
                            }
                        }, 100);
                    } else {
                        setIsProcessing(false);
                        setStep('results');
                        setBrandScore(mockBrandScore);
                        setRecommendations(mockRecommendations);
                    }
                };
                
                processStep();
            };

            const getScoreColor = (score) => {
                if (score >= 80) return 'text-green-400';
                if (score >= 60) return 'text-yellow-400';
                return 'text-red-400';
            };

            const getPriorityColor = (priority) => {
                switch (priority) {
                    case 'high':
                        return 'text-red-400 bg-red-500/20';
                    case 'medium':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'low':
                        return 'text-green-400 bg-green-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getDifficultyIcon = (difficulty) => {
                switch (difficulty) {
                    case 'easy':
                        return '✅';
                    case 'medium':
                        return '⚠️';
                    case 'hard':
                        return '🎯';
                    default:
                        return '❓';
                }
            };

            const handleRecommendationClick = (recommendation) => {
                setSelectedRecommendation(recommendation);
            };

            const closeModal = () => {
                setSelectedRecommendation(null);
            };

            return (
                <div className="space-y-8">
                    {/* Header */}
                    <div className="bg-white/50 backdrop-blur-xl border border-white/30 shadow-lg rounded-2xl p-6">
                        <div className="flex items-center gap-4">
                            <div className="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                <div className="w-6 h-6 text-white text-xl">📈</div>
                            </div>
                            <div>
                                <h1 className="text-3xl font-bold text-gray-50">AI-Powered Personal Brand Audit</h1>
                                <p className="text-gray-300">Comprehensive analysis of your digital brand presence</p>
                            </div>
                        </div>
                    </div>

                    {step === 'input' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Resume Upload */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📤</div>
                                        </div>
                                        <h2 className="text-xl font-semibold text-gray-50">Upload Your Resume</h2>
                                    </div>
                                    
                                    <div className="border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-indigo-500 transition-colors duration-300">
                                        <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <div className="w-8 h-8 text-white text-2xl">📄</div>
                                        </div>
                                        <h3 className="text-lg font-medium text-gray-50 mb-2">Drop your resume here</h3>
                                        <p className="text-gray-400 mb-4">PDF, DOCX, or DOC files only (max 10MB)</p>
                                        <input
                                            type="file"
                                            accept=".pdf,.docx,.doc"
                                            onChange={handleFileUpload}
                                            className="hidden"
                                            id="resume-upload"
                                        />
                                        <label
                                            htmlFor="resume-upload"
                                            className="inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 cursor-pointer"
                                        >
                                            <div className="w-4 h-4">📁</div>
                                            {resumeFile ? 'Change File' : 'Choose File'}
                                        </label>
                                        {resumeFile && (
                                            <div className="mt-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg">
                                                <div className="flex items-center gap-2 text-green-400">
                                                    <div className="w-4 h-4">✅</div>
                                                    <span className="text-sm font-medium">{resumeFile.name}</span>
                                                </div>
                                            </div>
                                        )}
                                        {uploadError && (
                                            <div className="mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg">
                                                <div className="flex items-center gap-2 text-red-400">
                                                    <div className="w-4 h-4">⚠️</div>
                                                    <span className="text-sm font-medium">{uploadError}</span>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                {/* LinkedIn Profile */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">🔗</div>
                                        </div>
                                        <h2 className="text-xl font-semibold text-gray-50">LinkedIn Profile</h2>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">LinkedIn URL</label>
                                            <input
                                                type="url"
                                                value={linkedinUrl}
                                                onChange={(e) => setLinkedinUrl(e.target.value)}
                                                placeholder="https://linkedin.com/in/yourname"
                                                className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                        </div>
                                        <p className="text-sm text-gray-400">We'll analyze your profile, headline, summary, and experience</p>
                                    </div>
                                </div>

                                {/* Optional Integrations */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">🌐</div>
                                        </div>
                                        <h2 className="text-xl font-semibold text-gray-50">Optional Integrations</h2>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">GitHub Profile</label>
                                            <input
                                                type="url"
                                                value={githubUrl}
                                                onChange={(e) => setGithubUrl(e.target.value)}
                                                placeholder="https://github.com/yourname"
                                                className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Portfolio/Website</label>
                                            <input
                                                type="url"
                                                value={portfolioUrl}
                                                onChange={(e) => setPortfolioUrl(e.target.value)}
                                                placeholder="https://yourportfolio.com"
                                                className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* Start Audit Button */}
                                <div className="text-center">
                                    <button
                                        onClick={handleStartAudit}
                                        disabled={!resumeFile && !linkedinUrl}
                                        className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold flex items-center gap-2 mx-auto hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 hover:transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                                    >
                                        <div className="w-5 h-5">✨</div>
                                        Start Brand Audit
                                    </button>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* What We Analyze */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold text-gray-50 mb-4">What We Analyze</h3>
                                    <div className="space-y-4">
                                        <div className="flex items-start gap-3">
                                            <div className="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                                                <div className="w-4 h-4 text-blue-400 text-lg">👤</div>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50">LinkedIn Profile</h4>
                                                <p className="text-sm text-gray-400">Headline, summary, experience, and connections</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                                                <div className="w-4 h-4 text-green-400 text-lg">📄</div>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50">Resume Content</h4>
                                                <p className="text-sm text-gray-400">Skills, experience, and formatting</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                                                <div className="w-4 h-4 text-purple-400 text-lg">💻</div>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50">GitHub Activity</h4>
                                                <p className="text-sm text-gray-400">Repositories, contributions, and code quality</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start gap-3">
                                            <div className="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                                                <div className="w-4 h-4 text-orange-400 text-lg">🌐</div>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50">Portfolio Site</h4>
                                                <p className="text-sm text-gray-400">Design, content, and user experience</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Sample Insights */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold text-gray-50 mb-4">Sample Insights</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-sm text-gray-300">Optimize your LinkedIn headline with specific skills</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-sm text-gray-300">Add quantifiable achievements to your resume</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className="text-sm text-gray-300">Improve your GitHub profile with better documentation</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Privacy & Security */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold text-gray-50 mb-4">Privacy & Security</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-start gap-2">
                                            <div className="w-4 h-4 text-green-400 text-lg">✅</div>
                                            <p className="text-sm text-gray-300">Your data is encrypted and secure</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-4 h-4 text-green-400 text-lg">✅</div>
                                            <p className="text-sm text-gray-300">GDPR compliant processing</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-4 h-4 text-green-400 text-lg">✅</div>
                                            <p className="text-sm text-gray-300">Data is not shared with third parties</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {step === 'processing' && (
                        <div className="text-center py-20">
                            <div className="w-24 h-24 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-8 animate-pulse">
                                <div className="w-12 h-12 text-white text-4xl">✨</div>
                            </div>
                            <h2 className="text-3xl font-bold text-gray-50 mb-4">Analyzing Your Brand</h2>
                            <div className="w-full max-w-md mx-auto bg-gray-800 rounded-full h-2 mb-6">
                                <div 
                                    className="bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-300"
                                    style={{ width: `${processingProgress}%` }}
                                ></div>
                            </div>
                            <p className="text-xl text-gray-300 mb-8">{processingSteps[processingStep]?.text}</p>
                            <div className="text-sm text-gray-400">{Math.round(processingProgress)}% Complete</div>
                        </div>
                    )}

                    {step === 'results' && brandScore && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Results */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Brand Score */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-8">
                                    <h2 className="text-2xl font-bold text-gray-50 mb-8">Your Brand Score</h2>
                                    <div className="text-center mb-8">
                                        <div className={`text-6xl font-bold ${getScoreColor(brandScore.overall)} mb-2`}>
                                            {brandScore.overall}
                                        </div>
                                        <p className="text-xl text-gray-300">Overall Brand Score</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandScore.linkedin)}`}>
                                                {brandScore.linkedin}
                                            </div>
                                            <p className="text-sm text-gray-400">LinkedIn</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandScore.resume)}`}>
                                                {brandScore.resume}
                                            </div>
                                            <p className="text-sm text-gray-400">Resume</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandScore.portfolio)}`}>
                                                {brandScore.portfolio}
                                            </div>
                                            <p className="text-sm text-gray-400">Portfolio</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandScore.github)}`}>
                                                {brandScore.github}
                                            </div>
                                            <p className="text-sm text-gray-400">GitHub</p>
                                        </div>
                                    </div>
                                </div>

                                {/* AI Recommendations */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-8">
                                    <h2 className="text-2xl font-bold text-gray-50 mb-8">AI Recommendations</h2>
                                    <div className="space-y-4">
                                        {recommendations.map((rec) => (
                                            <div
                                                key={rec.id}
                                                onClick={() => handleRecommendationClick(rec)}
                                                className="bg-gray-800 border border-gray-700 rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300 cursor-pointer hover:scale-105"
                                            >
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex items-center gap-3">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(rec.priority)}`}>
                                                            {rec.priority.toUpperCase()}
                                                        </span>
                                                        <span className="text-sm text-gray-400">{rec.category}</span>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-sm text-gray-400">{rec.impact}</span>
                                                        <div className="w-4 h-4">{getDifficultyIcon(rec.difficulty)}</div>
                                                    </div>
                                                </div>
                                                <h3 className="text-lg font-semibold text-gray-50 mb-2">{rec.title}</h3>
                                                <p className="text-gray-300 mb-4">{rec.description}</p>
                                                <div className="flex items-center gap-2 text-sm text-indigo-400">
                                                    <span>View Details</span>
                                                    <div className="w-4 h-4">→</div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Actions */}
                                <div className="flex gap-4">
                                    <button className="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors duration-200">
                                        <div className="w-4 h-4">⬇️</div>
                                        Download Report
                                    </button>
                                    <button 
                                        onClick={() => setStep('input')}
                                        className="flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover:bg-gray-700 transition-colors duration-200"
                                    >
                                        <div className="w-4 h-4">🔄</div>
                                        Run New Audit
                                    </button>
                                </div>
                            </div>

                            {/* Sidebar Results */}
                            <div className="space-y-6">
                                {/* Quick Wins */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold text-gray-50 mb-4">Quick Wins</h3>
                                    <div className="space-y-3">
                                        {recommendations.filter(r => r.priority === 'high' && r.difficulty === 'easy').map((rec) => (
                                            <div key={rec.id} className="bg-green-500/20 border border-green-500/50 rounded-lg p-4">
                                                <h4 className="font-medium text-green-400 mb-1">{rec.title}</h4>
                                                <p className="text-sm text-gray-300">{rec.impact}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Brand Archetype */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                                            <div className="w-4 h-4 text-white text-lg">⚡</div>
                                        </div>
                                        <h3 className="text-lg font-semibold text-gray-50">Brand Archetype</h3>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-purple-400 mb-2">The Innovator</div>
                                        <p className="text-sm text-gray-300">You're positioned as a forward-thinking professional who embraces new technologies and approaches.</p>
                                    </div>
                                </div>

                                {/* Industry Benchmark */}
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold text-gray-50 mb-4">Industry Benchmark</h3>
                                    <div className="space-y-4">
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm text-gray-300">Your Score</span>
                                            <span className="text-sm font-medium text-indigo-400">{brandScore.overall}</span>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm text-gray-300">Industry Average</span>
                                            <span className="text-sm font-medium text-gray-400">72</span>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm text-gray-300">Top 10%</span>
                                            <span className="text-sm font-medium text-green-400">88</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Recommendation Detail Modal */}
                    {selectedRecommendation && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex items-start justify-between mb-6">
                                    <div className="flex items-center gap-3">
                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${getPriorityColor(selectedRecommendation.priority)}`}>
                                            {selectedRecommendation.priority.toUpperCase()}
                                        </span>
                                        <span className="text-sm text-gray-400">{selectedRecommendation.category}</span>
                                    </div>
                                    <button
                                        onClick={closeModal}
                                        className="text-gray-400 hover:text-white transition-colors duration-200"
                                    >
                                        <div className="w-6 h-6">✕</div>
                                    </button>
                                </div>
                                
                                <h2 className="text-2xl font-bold text-gray-50 mb-4">{selectedRecommendation.title}</h2>
                                <p className="text-gray-300 mb-6">{selectedRecommendation.description}</p>
                                
                                <div className="bg-gray-800 border border-gray-700 rounded-lg p-4 mb-6">
                                    <h3 className="font-medium text-gray-50 mb-2">Example:</h3>
                                    <p className="text-sm text-gray-300">{selectedRecommendation.example}</p>
                                </div>
                                
                                <div className="flex gap-4">
                                    <button className="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200">
                                        Mark as Implemented
                                    </button>
                                    <button className="flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors duration-200">
                                        Save for Later
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render AI-Powered Personal Brand Audit when ai-brand-audit-content is shown
        window.renderAIBrandAudit = function() {
            console.log('renderAIBrandAudit called');
            const container = document.getElementById('ai-brand-audit-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering AI-Powered Personal Brand Audit...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<AIBrandAudit />);
                    console.log('AI-Powered Personal Brand Audit rendered successfully');
                } catch (error) {
                    console.error('Error rendering AI-Powered Personal Brand Audit:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading AI-Powered Personal Brand Audit</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('ai-brand-audit-container not found');
            }
        };

        // Content Engine for Thought Leadership React Component
        const ContentEngine = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [activeGenerator, setActiveGenerator] = useState(null);
            const [selectedTopic, setSelectedTopic] = useState(null);
            const [generatedContent, setGeneratedContent] = useState(null);
            const [isGenerating, setIsGenerating] = useState(false);
            const [contentType, setContentType] = useState('post');
            const [tone, setTone] = useState('professional');
            const [selectedPlatforms, setSelectedPlatforms] = useState([]);
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const trendingTopics = [
                {
                    id: 1,
                    title: 'AI Ethics in Software Development',
                    relevanceScore: 92,
                    engagementPotential: 85,
                    competitionLevel: 'Medium',
                    timeframe: 'This Week',
                    category: 'Technology',
                    keywords: ['AI', 'Ethics', 'Development', 'Responsibility']
                },
                {
                    id: 2,
                    title: 'Remote Work Culture Evolution',
                    relevanceScore: 88,
                    engagementPotential: 78,
                    competitionLevel: 'High',
                    timeframe: 'This Month',
                    category: 'Workplace',
                    keywords: ['Remote Work', 'Culture', 'Productivity', 'Team Building']
                },
                {
                    id: 3,
                    title: 'Sustainable Tech Practices',
                    relevanceScore: 85,
                    engagementPotential: 72,
                    competitionLevel: 'Low',
                    timeframe: 'Next Week',
                    category: 'Sustainability',
                    keywords: ['Green Tech', 'Sustainability', 'Environment', 'Innovation']
                }
            ];

            const contentSuggestions = [
                {
                    id: 1,
                    topic: 'The Future of AI in Healthcare',
                    angle: 'Personal experience with AI diagnostics',
                    contentType: 'LinkedIn Post',
                    estimatedEngagement: 450,
                    difficulty: 'Medium',
                    timeToCreate: '15 min',
                    platforms: ['LinkedIn', 'Twitter']
                },
                {
                    id: 2,
                    topic: 'Building Inclusive Tech Teams',
                    angle: 'Data-driven approach to diversity',
                    contentType: 'Article',
                    estimatedEngagement: 320,
                    difficulty: 'Easy',
                    timeToCreate: '25 min',
                    platforms: ['LinkedIn', 'Medium']
                },
                {
                    id: 3,
                    topic: 'Cybersecurity Best Practices',
                    angle: 'Lessons from recent breaches',
                    contentType: 'Thread',
                    estimatedEngagement: 280,
                    difficulty: 'Hard',
                    timeToCreate: '20 min',
                    platforms: ['Twitter', 'LinkedIn']
                }
            ];

            const expertiseAreas = [
                {
                    id: 1,
                    name: 'Software Architecture',
                    level: 'Expert',
                    authorityScore: 85,
                    contentCount: 24,
                    lastUpdated: '2 days ago'
                },
                {
                    id: 2,
                    name: 'AI & Machine Learning',
                    level: 'Advanced',
                    authorityScore: 72,
                    contentCount: 18,
                    lastUpdated: '1 week ago'
                },
                {
                    id: 3,
                    name: 'DevOps & Infrastructure',
                    level: 'Intermediate',
                    authorityScore: 58,
                    contentCount: 12,
                    lastUpdated: '2 weeks ago'
                }
            ];

            const getRelevanceColor = (score) => {
                if (score >= 90) return 'text-green-400 bg-green-500/20';
                if (score >= 80) return 'text-blue-400 bg-blue-500/20';
                if (score >= 70) return 'text-yellow-400 bg-yellow-500/20';
                return 'text-red-400 bg-red-500/20';
            };

            const getCompetitionColor = (level) => {
                switch (level) {
                    case 'Low':
                        return 'text-green-400 bg-green-500/20';
                    case 'Medium':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'High':
                        return 'text-red-400 bg-red-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getDifficultyColor = (difficulty) => {
                switch (difficulty) {
                    case 'Easy':
                        return 'text-green-400';
                    case 'Medium':
                        return 'text-yellow-400';
                    case 'Hard':
                        return 'text-red-400';
                    default:
                        return 'text-gray-400';
                }
            };

            const getAuthorityColor = (score) => {
                if (score >= 80) return 'text-green-400';
                if (score >= 60) return 'text-yellow-400';
                return 'text-red-400';
            };

            const handleGenerateContent = (suggestion) => {
                setIsGenerating(true);
                setSelectedTopic(suggestion);
                
                // Simulate content generation
                setTimeout(() => {
                    setGeneratedContent({
                        title: suggestion.topic,
                        content: `Here's a thought-provoking perspective on ${suggestion.topic.toLowerCase()}. ${suggestion.angle}...`,
                        platforms: suggestion.platforms
                    });
                    setIsGenerating(false);
                }, 2000);
            };

            const handleGeneratorSelect = (generator) => {
                setActiveGenerator(generator);
            };

            const tabs = [
                { id: 'dashboard', label: 'Dashboard', icon: '📊' },
                { id: 'generator', label: 'Content Generator', icon: '✨' },
                { id: 'calendar', label: 'Calendar & Post Queue', icon: '📅' },
                { id: 'analytics', label: 'Analytics', icon: '📈' },
                { id: 'expertise', label: 'Expertise', icon: '🎯' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-400 hover:text-gray-50 hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'dashboard' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Today's Content Suggestions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">💡</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Today's Content Suggestions</h2>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {contentSuggestions.map((suggestion) => (
                                            <div key={suggestion.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-purple-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{suggestion.topic}</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{suggestion.angle}</p>
                                                        <div className="flex items-center gap-4 text-sm">
                                                            <span className={isLightMode ? 'text-gray-500' : 'text-gray-400'}>{suggestion.contentType}</span>
                                                            <span className={isLightMode ? 'text-gray-500' : 'text-gray-400'}>•</span>
                                                            <span className={isLightMode ? 'text-gray-500' : 'text-gray-400'}>{suggestion.timeToCreate}</span>
                                                            <span className={isLightMode ? 'text-gray-500' : 'text-gray-400'}>•</span>
                                                            <span className={`font-medium ${getDifficultyColor(suggestion.difficulty)}`}>
                                                                {suggestion.difficulty}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className={`text-2xl font-bold ${isLightMode ? 'text-purple-600' : 'text-purple-400'} mb-1`}>{suggestion.estimatedEngagement}</div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Est. Engagement</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="flex items-center justify-between">
                                                    <div className="flex items-center gap-2">
                                                        {suggestion.platforms.map((platform, index) => (
                                                            <span key={index} className={`px-2 py-1 ${isLightMode ? 'bg-purple-100 text-purple-700' : 'bg-purple-500/20 text-purple-400'} text-xs rounded-full`}>
                                                                {platform}
                                                            </span>
                                                        ))}
                                                    </div>
                                                    <button
                                                        onClick={() => handleGenerateContent(suggestion)}
                                                        disabled={isGenerating}
                                                        className="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                                    >
                                                        {isGenerating ? (
                                                            <div className="flex items-center gap-2">
                                                                <div className="w-4 h-4 animate-spin">🔄</div>
                                                                Generating...
                                                            </div>
                                                        ) : (
                                                            'Generate'
                                                        )}
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Authority Score Overview */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">⭐</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Authority Score Overview</h2>
                                    </div>
                                    
                                    <div className="grid grid-cols-3 gap-6">
                                        <div className="text-center">
                                            <div className={`text-4xl font-bold ${isLightMode ? 'text-green-600' : 'text-green-400'} mb-2`}>78</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-1`}>Overall Authority</div>
                                            <div className={`text-xs ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>+5 this month</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-4xl font-bold ${isLightMode ? 'text-blue-600' : 'text-blue-400'} mb-2`}>24</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-1`}>Posts This Month</div>
                                            <div className={`text-xs ${isLightMode ? 'text-blue-600' : 'text-blue-400'}`}>+3 from last month</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-4xl font-bold ${isLightMode ? 'text-purple-600' : 'text-purple-400'} mb-2`}>3.2K</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-1`}>Total Engagement</div>
                                            <div className={`text-xs ${isLightMode ? 'text-purple-600' : 'text-purple-400'}`}>+12% growth</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Trending Topics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center">
                                            <div className="w-4 h-4 text-white text-lg">📈</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Trending Topics</h3>
                                    </div>
                                    
                                    <div className="space-y-3">
                                        {trendingTopics.map((topic) => (
                                            <div key={topic.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{topic.title}</h4>
                                                <div className="flex items-center justify-between mb-2">
                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRelevanceColor(topic.relevanceScore)}`}>
                                                        {topic.relevanceScore}% Relevant
                                                    </span>
                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCompetitionColor(topic.competitionLevel)}`}>
                                                        {topic.competitionLevel} Competition
                                                    </span>
                                                </div>
                                                <div className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                    {topic.timeframe} • {topic.category}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Quick Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Content Generated</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12 this week</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Published</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8 this week</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Avg. Engagement</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>340</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Authority Growth</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>+5%</span>
                                        </div>
                                    </div>
                                </div>

                                {/* AI Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>AI Insights</h3>
                                    <div className="space-y-4">
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-4">
                                            <h4 className={`font-medium ${isLightMode ? 'text-blue-600' : 'text-blue-400'} mb-1`}>Trending Opportunity</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>AI Ethics content is gaining 40% more engagement this week</p>
                                        </div>
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-4">
                                            <h4 className={`font-medium ${isLightMode ? 'text-green-600' : 'text-green-400'} mb-1`}>Authority Building</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Your Software Architecture content is performing 25% above average</p>
                                        </div>
                                        <div className="bg-purple-500/20 border border-purple-500/50 rounded-lg p-4">
                                            <h4 className={`font-medium ${isLightMode ? 'text-purple-600' : 'text-purple-400'} mb-1`}>Content Strategy</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Consider more visual content to increase engagement by 30%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'generator' && (
                        <div className="space-y-8">
                            {!activeGenerator ? (
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-8`}>Choose Your Content Generator</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {[
                                            {
                                                id: 'post-generator',
                                                title: 'Post Generator',
                                                description: 'Create engaging social media posts',
                                                icon: '📝',
                                                gradient: 'from-blue-500 to-indigo-600'
                                            },
                                            {
                                                id: 'comment-helper',
                                                title: 'Comment Helper',
                                                description: 'Generate thoughtful responses',
                                                icon: '💬',
                                                gradient: 'from-blue-500 to-cyan-500'
                                            },
                                            {
                                                id: 'carousel-maker',
                                                title: 'Carousel Maker',
                                                description: 'Create visual content series',
                                                icon: '🎠',
                                                gradient: 'from-purple-500 to-pink-500'
                                            },
                                            {
                                                id: 'repurpose-content',
                                                title: 'Repurpose Content',
                                                description: 'Transform existing content',
                                                icon: '🔄',
                                                gradient: 'from-green-500 to-emerald-500'
                                            }
                                        ].map((generator) => (
                                            <div
                                                key={generator.id}
                                                onClick={() => handleGeneratorSelect(generator.id)}
                                                className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-2xl p-6 hover:border-purple-500/50 transition-all duration-300 cursor-pointer hover:scale-105`}
                                            >
                                                <div className={`w-16 h-16 bg-gradient-to-r ${generator.gradient} rounded-2xl flex items-center justify-center mx-auto mb-4`}>
                                                    <div className="w-8 h-8 text-white text-2xl">{generator.icon}</div>
                                                </div>
                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2 text-center`}>{generator.title}</h3>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} text-center`}>{generator.description}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ) : (
                                <div className="bg-[#111827] border border-gray-700/50 rounded-2xl p-8">
                                    <div className="flex items-center gap-4 mb-6">
                                        <button
                                            onClick={() => setActiveGenerator(null)}
                                            className="text-gray-400 hover:text-white transition-colors duration-200"
                                        >
                                            <div className="w-6 h-6">←</div>
                                        </button>
                                        <h2 className="text-2xl font-bold text-gray-50">Content Generator</h2>
                                    </div>
                                    
                                    <div className="text-center py-20">
                                        <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                            <div className="w-8 h-8 text-white text-3xl">✨</div>
                                        </div>
                                        <h3 className="text-xl font-semibold text-gray-50 mb-4">Generator Integration</h3>
                                        <p className="text-gray-400 mb-8">This would integrate with the selected content generator</p>
                                        <button
                                            onClick={() => setActiveGenerator(null)}
                                            className="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300"
                                        >
                                            Back to Generators
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {activeTab === 'expertise' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Expertise Areas */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">👤</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Your Expertise Areas</h2>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {expertiseAreas.map((area) => (
                                            <div key={area.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>{area.name}</h3>
                                                        <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{area.level} Level</p>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className={`text-2xl font-bold ${getAuthorityColor(area.authorityScore)}`}>
                                                            {area.authorityScore}
                                                        </div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Authority Score</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="mb-4">
                                                    <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                        <span>Authority Progress</span>
                                                        <span>{area.authorityScore}/100</span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                        <div 
                                                            className={`h-2 rounded-full ${
                                                                area.authorityScore >= 80 ? 'bg-green-500' : 
                                                                area.authorityScore >= 60 ? 'bg-yellow-500' : 'bg-red-500'
                                                            }`}
                                                            style={{ width: `${area.authorityScore}%` }}
                                                        ></div>
                                                    </div>
                                                </div>
                                                
                                                <div className={`flex items-center justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                    <span>{area.contentCount} pieces of content</span>
                                                    <span>Updated {area.lastUpdated}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <button className="w-full mt-6 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                        <div className="flex items-center justify-center gap-2">
                                            <div className="w-4 h-4">➕</div>
                                            Add New Expertise Area
                                        </div>
                                    </button>
                                </div>

                                {/* Growth Opportunities */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Growth Opportunities</h2>
                                    
                                    <div className="space-y-4">
                                        <div className="bg-purple-500/20 border border-purple-500/50 rounded-lg p-6">
                                            <h3 className="font-semibold text-purple-400 mb-2">Emerging Topic</h3>
                                            <p className={`${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>AI Ethics in Development</p>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>This topic is gaining traction and aligns with your expertise</p>
                                        </div>
                                        
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-6">
                                            <h3 className="font-semibold text-blue-400 mb-2">Skill Gap</h3>
                                            <p className={`${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>DevOps & Infrastructure</p>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Consider creating content to build authority in this area</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Content Strategy */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Content Strategy</h2>
                                    
                                    <div className="space-y-3">
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`${isLightMode ? 'text-gray-700' : 'text-gray-300'}`}>Focus on Software Architecture content to maintain your expert status</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`${isLightMode ? 'text-gray-700' : 'text-gray-300'}`}>Create more AI & ML content to reach advanced level</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`${isLightMode ? 'text-gray-700' : 'text-gray-300'}`}>Develop DevOps content to fill knowledge gaps</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Quick Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                            Update Expertise Level
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Add New Skill
                                        </button>
                                        <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                            View Content History
                                        </button>
                                    </div>
                                </div>

                                {/* Authority Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Authority Insights</h3>
                                    <div className="space-y-4">
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-green-400 mb-2">78</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Overall Authority</div>
                                        </div>
                                        <div className="space-y-2">
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Content Consistency</span>
                                                <span className="text-green-400">85%</span>
                                            </div>
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Trend Alignment</span>
                                                <span className="text-blue-400">72%</span>
                                            </div>
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Engagement Quality</span>
                                                <span className="text-purple-400">68%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'calendar' && (
                        <div className="space-y-8">
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <div className="w-5 h-5 text-white text-xl">📅</div>
                                    </div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Calendar & Post Queue</h2>
                                </div>
                                
                                <div className="text-center py-20">
                                    <div className="w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-8 h-8 text-white text-3xl">📅</div>
                                    </div>
                                    <h3 className="text-xl font-semibold text-gray-50 mb-4">Calendar Integration</h3>
                                    <p className="text-gray-400 mb-8">This would show your content calendar and scheduled posts</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'analytics' && (
                        <div className="space-y-8">
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                                        <div className="w-5 h-5 text-white text-xl">📊</div>
                                    </div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Thought Leadership Analytics</h2>
                                </div>
                                
                                <div className="text-center py-20">
                                    <div className="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-8 h-8 text-white text-3xl">📈</div>
                                    </div>
                                    <h3 className="text-xl font-semibold text-gray-50 mb-4">Analytics Dashboard</h3>
                                    <p className="text-gray-400 mb-8">This would show detailed analytics and performance metrics</p>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Content Engine when content-engine-content is shown
        window.renderContentEngine = function() {
            console.log('renderContentEngine called');
            const container = document.getElementById('content-engine-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Content Engine for Thought Leadership...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<ContentEngine />);
                    console.log('Content Engine for Thought Leadership rendered successfully');
                } catch (error) {
                    console.error('Error rendering Content Engine for Thought Leadership:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Content Engine for Thought Leadership</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('content-engine-container not found');
            }
        };

        // AI-Generated Career Portfolio/Microsite React Component
        const AIPortfolio = () => {
            const [step, setStep] = useState('onboarding');
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [portfolioBlocks, setPortfolioBlocks] = useState([]);
            const [activeBlock, setActiveBlock] = useState(null);
            const [previewDevice, setPreviewDevice] = useState('desktop');
            const [isGenerating, setIsGenerating] = useState(false);
            const [uploadedFile, setUploadedFile] = useState(null);
            const [importStatus, setImportStatus] = useState('');
            const [portfolioUrl, setPortfolioUrl] = useState('');
            const [customDomain, setCustomDomain] = useState('');
            const [seoSettings, setSeoSettings] = useState({
                title: '',
                description: '',
                keywords: ''
            });
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');
            const [projects, setProjects] = useState([]);
            const [showAddProject, setShowAddProject] = useState(false);
            const [newProject, setNewProject] = useState({
                title: '',
                description: '',
                technologies: [],
                imageUrl: '',
                liveUrl: '',
                githubUrl: '',
                featured: false
            });

            const templates = [
                {
                    id: 1,
                    name: 'Executive Professional',
                    category: 'Corporate',
                    preview: 'Professional blue theme with clean layout',
                    description: 'Perfect for executives and senior professionals',
                    blocks: ['Header', 'About', 'Experience', 'Skills', 'Contact'],
                    gradient: 'from-blue-500 to-indigo-600'
                },
                {
                    id: 2,
                    name: 'Developer Portfolio',
                    category: 'Tech',
                    preview: 'Dark theme with code focus',
                    description: 'Ideal for software developers and engineers',
                    blocks: ['Header', 'About', 'Projects', 'Skills', 'Experience', 'Contact'],
                    gradient: 'from-gray-600 to-gray-800'
                },
                {
                    id: 3,
                    name: 'Creative Showcase',
                    category: 'Creative',
                    preview: 'Purple-pink theme for visual professionals',
                    description: 'Great for designers and creative professionals',
                    blocks: ['Header', 'About', 'Portfolio', 'Skills', 'Testimonials', 'Contact'],
                    gradient: 'from-purple-500 to-pink-500'
                },
                {
                    id: 4,
                    name: 'Clean Minimal',
                    category: 'Minimalist',
                    preview: 'Clean gray theme',
                    description: 'Simple and clean for any professional',
                    blocks: ['Header', 'About', 'Experience', 'Contact'],
                    gradient: 'from-gray-400 to-gray-600'
                }
            ];

            const blockLibrary = [
                {
                    id: 'header',
                    type: 'Header',
                    icon: '👤',
                    description: 'Name, title, and hero image'
                },
                {
                    id: 'about',
                    type: 'About',
                    icon: '📄',
                    description: 'Professional summary and bio'
                },
                {
                    id: 'projects',
                    type: 'Projects',
                    icon: '💼',
                    description: 'Portfolio showcase'
                },
                {
                    id: 'skills',
                    type: 'Skills',
                    icon: '🎯',
                    description: 'Technical and soft skills'
                },
                {
                    id: 'experience',
                    type: 'Experience',
                    icon: '⏰',
                    description: 'Work history and achievements'
                },
                {
                    id: 'testimonials',
                    type: 'Testimonials',
                    icon: '💬',
                    description: 'Client recommendations'
                },
                {
                    id: 'contact',
                    type: 'Contact',
                    icon: '📧',
                    description: 'Contact information'
                }
            ];

            const mockProjects = [
                {
                    id: 1,
                    title: 'E-Commerce Platform',
                    description: 'Full-stack e-commerce solution with React and Node.js',
                    technologies: ['React', 'Node.js', 'MongoDB', 'Stripe'],
                    imageUrl: '/api/placeholder/400/300',
                    liveUrl: 'https://example.com',
                    githubUrl: 'https://github.com/example',
                    featured: true
                },
                {
                    id: 2,
                    title: 'Task Management App',
                    description: 'Collaborative task management with real-time updates',
                    technologies: ['Vue.js', 'Firebase', 'Tailwind CSS'],
                    imageUrl: '/api/placeholder/400/300',
                    liveUrl: 'https://example.com',
                    githubUrl: 'https://github.com/example',
                    featured: false
                }
            ];

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size must be less than 5MB');
                        return;
                    }
                    if (!['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/msword'].includes(file.type)) {
                        alert('Only PDF, DOCX, and DOC files are allowed');
                        return;
                    }
                    setUploadedFile(file);
                    setImportStatus('uploading');
                    
                    // Simulate processing
                    setTimeout(() => {
                        setImportStatus('processing');
                        setTimeout(() => {
                            setImportStatus('success');
                        }, 2000);
                    }, 1000);
                }
            };

            const handleTemplateSelect = (template) => {
                setSelectedTemplate(template);
            };

            const handleGeneratePortfolio = () => {
                setIsGenerating(true);
                
                // Simulate AI generation
                setTimeout(() => {
                    setPortfolioBlocks(blockLibrary);
                    setPortfolioUrl('https://portfolio.example.com');
                    setIsGenerating(false);
                    setStep('editor');
                }, 3000);
            };

            const handleAddBlock = (block) => {
                const newBlock = {
                    id: Date.now(),
                    type: block.type,
                    title: block.type,
                    content: `Sample ${block.type} content`,
                    position: portfolioBlocks.length,
                    visible: true
                };
                setPortfolioBlocks([...portfolioBlocks, newBlock]);
            };

            const handlePreviewDevice = (device) => {
                setPreviewDevice(device);
            };

            const handlePublish = () => {
                setStep('publish');
            };

            const getDeviceSize = () => {
                switch (previewDevice) {
                    case 'mobile':
                        return 'w-80';
                    case 'tablet':
                        return 'w-96';
                    case 'desktop':
                        return 'w-full max-w-4xl';
                    default:
                        return 'w-full max-w-4xl';
                }
            };

            return (
                <div className="space-y-8">

                    {/* Progress Indicator */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                        <div className="flex items-center justify-between mb-4">
                            <h2 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Portfolio Creation Progress</h2>
                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                {step === 'onboarding' && 'Step 1 of 6'}
                                {step === 'import' && 'Step 2 of 6'}
                                {step === 'template' && 'Step 3 of 6'}
                                {step === 'editor' && 'Step 4 of 6'}
                                {step === 'preview' && 'Step 5 of 6'}
                                {step === 'publish' && 'Step 6 of 6'}
                            </span>
                        </div>
                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                            <div 
                                className="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500"
                                style={{ 
                                    width: step === 'onboarding' ? '16.67%' :
                                           step === 'import' ? '33.33%' :
                                           step === 'template' ? '50%' :
                                           step === 'editor' ? '66.67%' :
                                           step === 'preview' ? '83.33%' : '100%'
                                }}
                            ></div>
                        </div>
                    </div>

                    {/* Step Content */}
                    {step === 'onboarding' && (
                        <div className="text-center py-20">
                            <div className="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-8">
                                <div className="w-10 h-10 text-white text-4xl">🌐</div>
                            </div>
                            <h2 className={`text-4xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Build Your Professional Portfolio in Minutes</h2>
                            <p className={`text-xl ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-12 max-w-3xl mx-auto`}>
                                Our AI analyzes your resume and professional data to create a stunning, personalized portfolio website that showcases your expertise and achievements.
                            </p>
                            
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-8 h-8 text-white text-2xl">📤</div>
                                    </div>
                                    <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Import Your Data</h3>
                                    <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Upload your resume or connect your LinkedIn profile to get started</p>
                                </div>
                                
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-8 h-8 text-white text-2xl">🎨</div>
                                    </div>
                                    <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Choose Your Style</h3>
                                    <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Select from professional templates designed for your industry</p>
                                </div>
                                
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-8 h-8 text-white text-2xl">✨</div>
                                    </div>
                                    <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>AI Generates</h3>
                                    <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>Get a complete portfolio ready to publish in minutes</p>
                                </div>
                            </div>
                            
                            <button
                                onClick={() => setStep('import')}
                                className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 hover:transform hover:scale-105"
                            >
                                Start Building My Portfolio
                            </button>
                        </div>
                    )}

                    {step === 'import' && (
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* Resume Upload */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <div className="w-5 h-5 text-white text-xl">📤</div>
                                    </div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Upload Your Resume</h2>
                                </div>
                                
                                <div className={`border-2 border-dashed ${isLightMode ? 'border-gray-300' : 'border-gray-600'} rounded-lg p-8 text-center hover:border-blue-500 transition-colors duration-300`}>
                                    <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <div className="w-8 h-8 text-white text-2xl">📄</div>
                                    </div>
                                    <h3 className={`text-lg font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Drop your resume here</h3>
                                    <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-4`}>PDF, DOCX, or DOC files only (max 5MB)</p>
                                    <input
                                        type="file"
                                        accept=".pdf,.docx,.doc"
                                        onChange={handleFileUpload}
                                        className="hidden"
                                        id="resume-upload"
                                    />
                                    <label
                                        htmlFor="resume-upload"
                                        className="inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 cursor-pointer"
                                    >
                                        <div className="w-4 h-4">📁</div>
                                        Choose File
                                    </label>
                                    
                                    {uploadedFile && (
                                        <div className="mt-4">
                                            {importStatus === 'uploading' && (
                                                <div className={`p-3 ${isLightMode ? 'bg-yellow-100 border-yellow-300' : 'bg-yellow-500/20 border-yellow-500/50'} border rounded-lg`}>
                                                    <div className={`flex items-center gap-2 ${isLightMode ? 'text-yellow-700' : 'text-yellow-400'}`}>
                                                        <div className="w-4 h-4 animate-spin">🔄</div>
                                                        <span className="text-sm font-medium">Uploading...</span>
                                                    </div>
                                                </div>
                                            )}
                                            {importStatus === 'processing' && (
                                                <div className={`p-3 ${isLightMode ? 'bg-blue-100 border-blue-300' : 'bg-blue-500/20 border-blue-500/50'} border rounded-lg`}>
                                                    <div className={`flex items-center gap-2 ${isLightMode ? 'text-blue-700' : 'text-blue-400'}`}>
                                                        <div className="w-4 h-4 animate-spin">🔄</div>
                                                        <span className="text-sm font-medium">Processing resume...</span>
                                                    </div>
                                                </div>
                                            )}
                                            {importStatus === 'success' && (
                                                <div className={`p-3 ${isLightMode ? 'bg-green-100 border-green-300' : 'bg-green-500/20 border-green-500/50'} border rounded-lg`}>
                                                    <div className={`flex items-center gap-2 ${isLightMode ? 'text-green-700' : 'text-green-400'}`}>
                                                        <div className="w-4 h-4">✅</div>
                                                        <span className="text-sm font-medium">{uploadedFile.name} processed successfully</span>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Social Integration */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <div className="w-5 h-5 text-white text-xl">🔗</div>
                                    </div>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Social Integration</h2>
                                </div>
                                
                                <div className="space-y-4">
                                    <button className="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center gap-2">
                                        <div className="w-4 h-4">💼</div>
                                        Connect LinkedIn
                                    </button>
                                    
                                    <button className="w-full bg-gray-600 text-white py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200 flex items-center justify-center gap-2">
                                        <div className="w-4 h-4">💻</div>
                                        Connect GitHub
                                    </button>
                                    
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Portfolio URL</label>
                                        <input
                                            type="url"
                                            placeholder="https://yourportfolio.com"
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}
                                        />
                                    </div>
                                </div>
                            </div>
                            
                            <div className="lg:col-span-2 text-center">
                                <button
                                    onClick={() => setStep('template')}
                                    disabled={!uploadedFile && importStatus !== 'success'}
                                    className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    Continue to Templates
                                </button>
                            </div>
                        </div>
                    )}

                    {step === 'template' && (
                        <div className="space-y-8">
                            <div className="text-center">
                                <h2 className={`text-3xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Choose Your Template</h2>
                                <p className={`text-xl ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Select a professional template that matches your industry and style</p>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {templates.map((template) => (
                                    <div
                                        key={template.id}
                                        onClick={() => handleTemplateSelect(template)}
                                        className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 cursor-pointer transition-all duration-300 hover:scale-105 ${
                                            selectedTemplate?.id === template.id 
                                                ? 'border-blue-500 ring-2 ring-blue-500/50' 
                                                : 'hover:border-blue-500/50'
                                        }`}
                                    >
                                        <div className={`w-full h-32 bg-gradient-to-r ${template.gradient} rounded-lg mb-4 flex items-center justify-center`}>
                                            <div className="text-white text-2xl">🌐</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{template.name}</h3>
                                        <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'} mb-3`}>{template.description}</p>
                                        <div className="flex flex-wrap gap-1">
                                            {template.blocks.map((block, index) => (
                                                <span key={index} className={`px-2 py-1 ${isLightMode ? 'bg-gray-200 text-gray-700' : 'bg-gray-700 text-gray-300'} text-xs rounded`}>
                                                    {block}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            {selectedTemplate && (
                                <div className="text-center">
                                    <button
                                        onClick={handleGeneratePortfolio}
                                        disabled={isGenerating}
                                        className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {isGenerating ? (
                                            <div className="flex items-center gap-2">
                                                <div className="w-4 h-4 animate-spin">🔄</div>
                                                Generating Portfolio...
                                            </div>
                                        ) : (
                                            <div className="flex items-center gap-2">
                                                <div className="w-4 h-4">✨</div>
                                                Generate My Portfolio
                                            </div>
                                        )}
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    {step === 'editor' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Left Sidebar - Block Library */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <div className="w-4 h-4 text-white text-lg">🧩</div>
                                    </div>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Block Library</h3>
                                </div>
                                
                                <div className="space-y-3">
                                    {blockLibrary.map((block) => (
                                        <div
                                            key={block.id}
                                            onClick={() => handleAddBlock(block)}
                                            className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4 cursor-pointer hover:border-blue-500/50 transition-all duration-300`}
                                        >
                                            <div className="flex items-center gap-3">
                                                <div className="text-2xl">{block.icon}</div>
                                                <div>
                                                    <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{block.type}</h4>
                                                    <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>{block.description}</p>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                
                                <div className={`mt-6 p-4 ${isLightMode ? 'bg-purple-100 border-purple-300' : 'bg-purple-500/20 border-purple-500/50'} border rounded-lg`}>
                                    <h4 className={`font-medium ${isLightMode ? 'text-purple-700' : 'text-purple-400'} mb-2`}>AI Assistant</h4>
                                    <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>Enhance your content with AI suggestions</p>
                                    <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                        Get AI Suggestions
                                    </button>
                                </div>
                            </div>

                            {/* Center - Portfolio Preview */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Portfolio Preview</h3>
                                    <div className="flex items-center gap-2">
                                        <button
                                            onClick={() => handlePreviewDevice('mobile')}
                                            className={`p-2 rounded-lg transition-colors duration-200 ${
                                                previewDevice === 'mobile' ? 'bg-blue-600 text-white' : isLightMode ? 'bg-gray-200 text-gray-600 hover:bg-gray-300' : 'bg-gray-700 text-gray-400 hover:bg-gray-600'
                                            }`}
                                        >
                                            <div className="w-4 h-4">📱</div>
                                        </button>
                                        <button
                                            onClick={() => handlePreviewDevice('tablet')}
                                            className={`p-2 rounded-lg transition-colors duration-200 ${
                                                previewDevice === 'tablet' ? 'bg-blue-600 text-white' : isLightMode ? 'bg-gray-200 text-gray-600 hover:bg-gray-300' : 'bg-gray-700 text-gray-400 hover:bg-gray-600'
                                            }`}
                                        >
                                            <div className="w-4 h-4">📱</div>
                                        </button>
                                        <button
                                            onClick={() => handlePreviewDevice('desktop')}
                                            className={`p-2 rounded-lg transition-colors duration-200 ${
                                                previewDevice === 'desktop' ? 'bg-blue-600 text-white' : isLightMode ? 'bg-gray-200 text-gray-600 hover:bg-gray-300' : 'bg-gray-700 text-gray-400 hover:bg-gray-600'
                                            }`}
                                        >
                                            <div className="w-4 h-4">💻</div>
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="bg-white rounded-lg p-6 overflow-auto" style={{ maxHeight: '600px' }}>
                                    <div className={`mx-auto ${getDeviceSize()}`}>
                                        <div className="text-center mb-8">
                                            <div className="w-24 h-24 bg-gray-300 rounded-full mx-auto mb-4"></div>
                                            <h1 className="text-3xl font-bold text-gray-900 mb-2">John Doe</h1>
                                            <p className="text-xl text-gray-600">Senior Software Engineer</p>
                                        </div>
                                        
                                        <div className="space-y-8">
                                            <section>
                                                <h2 className="text-2xl font-bold text-gray-900 mb-4">About</h2>
                                                <p className="text-gray-700">Experienced software engineer with 5+ years of experience in full-stack development...</p>
                                            </section>
                                            
                                            <section>
                                                <h2 className="text-2xl font-bold text-gray-900 mb-4">Skills</h2>
                                                <div className="flex flex-wrap gap-2">
                                                    {['React', 'Node.js', 'Python', 'AWS', 'Docker'].map((skill) => (
                                                        <span key={skill} className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                                            {skill}
                                                        </span>
                                                    ))}
                                                </div>
                                            </section>
                                            
                                            <section>
                                                <h2 className="text-2xl font-bold text-gray-900 mb-4">Projects</h2>
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    {mockProjects.map((project) => (
                                                        <div key={project.id} className="border border-gray-200 rounded-lg p-4">
                                                            <h3 className="font-semibold text-gray-900 mb-2">{project.title}</h3>
                                                            <p className="text-gray-600 text-sm mb-2">{project.description}</p>
                                                            <div className="flex flex-wrap gap-1">
                                                                {project.technologies.map((tech) => (
                                                                    <span key={tech} className="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                                                        {tech}
                                                                    </span>
                                                                ))}
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Right Sidebar - Customization */}
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Customization</h3>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Portfolio URL</label>
                                        <input
                                            type="text"
                                            value={portfolioUrl}
                                            onChange={(e) => setPortfolioUrl(e.target.value)}
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Theme</label>
                                        <select className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}>
                                            <option>Professional Blue</option>
                                            <option>Dark Theme</option>
                                            <option>Minimal Gray</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Custom Domain (Premium)</label>
                                        <input
                                            type="text"
                                            value={customDomain}
                                            onChange={(e) => setCustomDomain(e.target.value)}
                                            placeholder="yourname.com"
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>SEO Title</label>
                                        <input
                                            type="text"
                                            value={seoSettings.title}
                                            onChange={(e) => setSeoSettings({...seoSettings, title: e.target.value})}
                                            placeholder="John Doe - Software Engineer"
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>SEO Description</label>
                                        <textarea
                                            value={seoSettings.description}
                                            onChange={(e) => setSeoSettings({...seoSettings, description: e.target.value})}
                                            placeholder="Professional portfolio of John Doe, Senior Software Engineer..."
                                            rows={3}
                                            className={`w-full px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`}
                                        />
                                    </div>
                                    
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep('preview')}
                                            className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200"
                                        >
                                            Preview
                                        </button>
                                        <button
                                            onClick={handlePublish}
                                            className="flex-1 bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200"
                                        >
                                            Publish
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {step === 'preview' && (
                        <div className="space-y-8">
                            <div className="flex items-center justify-between">
                                <h2 className="text-3xl font-bold text-gray-50">Portfolio Preview</h2>
                                <div className="flex gap-4">
                                    <button
                                        onClick={() => setStep('editor')}
                                        className="bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200"
                                    >
                                        Edit Portfolio
                                    </button>
                                    <button
                                        onClick={handlePublish}
                                        className="bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200"
                                    >
                                        Publish Portfolio
                                    </button>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-2xl p-8">
                                <div className="max-w-4xl mx-auto">
                                    <div className="text-center mb-12">
                                        <div className="w-32 h-32 bg-gray-300 rounded-full mx-auto mb-6"></div>
                                        <h1 className="text-4xl font-bold text-gray-900 mb-4">John Doe</h1>
                                        <p className="text-2xl text-gray-600 mb-6">Senior Software Engineer</p>
                                        <div className="flex justify-center gap-4">
                                            <button className="bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                                Download Resume
                                            </button>
                                            <button className="bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200">
                                                Contact Me
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className="space-y-12">
                                        <section>
                                            <h2 className="text-3xl font-bold text-gray-900 mb-6">About Me</h2>
                                            <p className="text-lg text-gray-700 leading-relaxed">
                                                Experienced software engineer with 5+ years of experience in full-stack development. 
                                                Passionate about creating scalable web applications and leading development teams. 
                                                Expertise in React, Node.js, Python, and cloud technologies.
                                            </p>
                                        </section>
                                        
                                        <section>
                                            <h2 className="text-3xl font-bold text-gray-900 mb-6">Skills</h2>
                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                                {['React', 'Node.js', 'Python', 'AWS', 'Docker', 'MongoDB', 'TypeScript', 'GraphQL'].map((skill) => (
                                                    <div key={skill} className="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                                                        <span className="font-medium text-blue-900">{skill}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                        
                                        <section>
                                            <h2 className="text-3xl font-bold text-gray-900 mb-6">Featured Projects</h2>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                                {mockProjects.map((project) => (
                                                    <div key={project.id} className="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow duration-300">
                                                        <h3 className="text-xl font-semibold text-gray-900 mb-3">{project.title}</h3>
                                                        <p className="text-gray-600 mb-4">{project.description}</p>
                                                        <div className="flex flex-wrap gap-2 mb-4">
                                                            {project.technologies.map((tech) => (
                                                                <span key={tech} className="px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full">
                                                                    {tech}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className="flex gap-4">
                                                            <button className="text-blue-600 hover:text-blue-700 font-medium">
                                                                View Live
                                                            </button>
                                                            <button className="text-gray-600 hover:text-gray-700 font-medium">
                                                                GitHub
                                                            </button>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                        
                                        <section>
                                            <h2 className="text-3xl font-bold text-gray-900 mb-6">Contact</h2>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div>
                                                    <h3 className="font-semibold text-gray-900 mb-2">Email</h3>
                                                    <p className="text-gray-600">john.doe@example.com</p>
                                                </div>
                                                <div>
                                                    <h3 className="font-semibold text-gray-900 mb-2">Phone</h3>
                                                    <p className="text-gray-600">+1 (555) 123-4567</p>
                                                </div>
                                                <div>
                                                    <h3 className="font-semibold text-gray-900 mb-2">Location</h3>
                                                    <p className="text-gray-600">San Francisco, CA</p>
                                                </div>
                                                <div>
                                                    <h3 className="font-semibold text-gray-900 mb-2">Social</h3>
                                                    <div className="flex gap-4">
                                                        <button className="text-blue-600 hover:text-blue-700">LinkedIn</button>
                                                        <button className="text-gray-600 hover:text-gray-700">GitHub</button>
                                                        <button className="text-blue-400 hover:text-blue-500">Twitter</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {step === 'publish' && (
                        <div className="text-center py-20">
                            <div className="w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-8">
                                <div className="w-10 h-10 text-white text-4xl">✅</div>
                            </div>
                            <h2 className={`text-4xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Portfolio Published Successfully!</h2>
                            <p className={`text-xl ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-8`}>Your professional portfolio is now live and ready to share</p>
                            
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8 max-w-2xl mx-auto mb-8`}>
                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Your Portfolio URL</h3>
                                <div className="flex items-center gap-4">
                                    <input
                                        type="text"
                                        value={portfolioUrl}
                                        readOnly
                                        className={`flex-1 px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg`}
                                    />
                                    <button className="bg-blue-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                        Copy
                                    </button>
                                    <button className={`${isLightMode ? 'bg-gray-500 hover:bg-gray-600' : 'bg-gray-600 hover:bg-gray-700'} text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200`}>
                                        <div className="w-4 h-4">🔗</div>
                                    </button>
                                </div>
                            </div>
                            
                            <div className="flex gap-4 justify-center">
                                <button
                                    onClick={() => setStep('editor')}
                                    className="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200"
                                >
                                    Continue Editing
                                </button>
                                <button className="bg-green-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200">
                                    Share Portfolio
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render AI-Generated Career Portfolio when career-portfolio-content is shown
        window.renderAIPortfolio = function() {
            console.log('renderAIPortfolio called');
            const container = document.getElementById('career-portfolio-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering AI-Generated Career Portfolio/Microsite...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<AIPortfolio />);
                    console.log('AI-Generated Career Portfolio/Microsite rendered successfully');
                } catch (error) {
                    console.error('Error rendering AI-Generated Career Portfolio/Microsite:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading AI-Generated Career Portfolio/Microsite</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('career-portfolio-container not found');
            }
        };

        // Career Event Scout React Component
        const CareerEventScout = () => {
            const [activeTab, setActiveTab] = useState('events');
            const [searchQuery, setSearchQuery] = useState('');
            const [filterType, setFilterType] = useState('all');
            const [filterLocation, setFilterLocation] = useState('all');
            const [filterDate, setFilterDate] = useState('all');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const careerEvents = [
                {
                    id: 1,
                    title: 'React Conf 2024',
                    type: 'Conference',
                    date: '2024-03-15',
                    location: 'San Francisco, CA',
                    isVirtual: false,
                    description: 'The premier React conference featuring the latest in React development',
                    attendees: 2500,
                    speakers: ['Dan Abramov', 'Sophie Alpert', 'Andrew Clark'],
                    relevanceScore: 95,
                    industry: 'Technology',
                    skills: ['React', 'JavaScript', 'Frontend'],
                    url: 'https://reactconf.com',
                    price: '$299',
                    isBookmarked: false
                },
                {
                    id: 2,
                    title: 'AI in Healthcare Workshop',
                    type: 'Workshop',
                    date: '2024-03-20',
                    location: 'Virtual',
                    isVirtual: true,
                    description: 'Hands-on workshop on implementing AI solutions in healthcare',
                    attendees: 150,
                    speakers: ['Dr. Sarah Chen', 'Prof. Michael Rodriguez'],
                    relevanceScore: 88,
                    industry: 'Healthcare',
                    skills: ['AI', 'Machine Learning', 'Healthcare'],
                    url: 'https://ai-healthcare-workshop.com',
                    price: 'Free',
                    isBookmarked: true
                },
                {
                    id: 3,
                    title: 'Tech Networking Mixer',
                    type: 'Networking',
                    date: '2024-03-25',
                    location: 'New York, NY',
                    isVirtual: false,
                    description: 'Connect with fellow tech professionals and industry leaders',
                    attendees: 300,
                    speakers: ['John Smith', 'Jane Doe'],
                    relevanceScore: 82,
                    industry: 'Technology',
                    skills: ['Networking', 'Career Development'],
                    url: 'https://tech-mixer.com',
                    price: '$50',
                    isBookmarked: false
                }
            ];

            const roleModels = [
                {
                    id: 1,
                    name: 'Sarah Johnson',
                    title: 'Senior Software Engineer',
                    company: 'Google',
                    industry: 'Technology',
                    followersCount: 12500,
                    engagementRate: 8.5,
                    contentThemes: ['React', 'Career Growth', 'Diversity'],
                    recentPosts: ['Just shipped a new feature at Google!', 'Tips for junior developers'],
                    linkedinUrl: 'https://linkedin.com/in/sarahjohnson',
                    twitterUrl: 'https://twitter.com/sarahjohnson',
                    isFollowing: true,
                    influenceScore: 92,
                    avatar: '/api/placeholder/60/60'
                },
                {
                    id: 2,
                    name: 'Michael Chen',
                    title: 'VP of Engineering',
                    company: 'Stripe',
                    industry: 'Fintech',
                    followersCount: 8500,
                    engagementRate: 7.2,
                    contentThemes: ['Leadership', 'Engineering', 'Startups'],
                    recentPosts: ['Building great engineering teams', 'Scaling payment infrastructure'],
                    linkedinUrl: 'https://linkedin.com/in/michaelchen',
                    twitterUrl: 'https://twitter.com/michaelchen',
                    isFollowing: false,
                    influenceScore: 88,
                    avatar: '/api/placeholder/60/60'
                }
            ];

            const networkingOpportunities = [
                {
                    id: 1,
                    type: 'Event Attendee',
                    name: 'Alex Rodriguez',
                    title: 'Product Manager',
                    company: 'Microsoft',
                    mutualConnections: 3,
                    relevanceScore: 85,
                    contactInfo: 'alex.rodriguez@microsoft.com',
                    suggestedApproach: 'Mention your shared interest in React and ask about their experience at Microsoft',
                    eventContext: 'React Conf 2024'
                },
                {
                    id: 2,
                    type: 'Speaker',
                    name: 'Dr. Lisa Wang',
                    title: 'AI Research Director',
                    company: 'OpenAI',
                    mutualConnections: 1,
                    relevanceScore: 92,
                    contactInfo: 'lisa.wang@openai.com',
                    suggestedApproach: 'Reference their recent research paper and ask about future AI trends',
                    eventContext: 'AI in Healthcare Workshop'
                }
            ];

            const getRelevanceColor = (score) => {
                if (score >= 90) return 'text-green-400 bg-green-500/20';
                if (score >= 80) return 'text-blue-400 bg-blue-500/20';
                if (score >= 70) return 'text-yellow-400 bg-yellow-500/20';
                return 'text-red-400 bg-red-500/20';
            };

            const getEventTypeIcon = (type) => {
                switch (type) {
                    case 'Conference':
                        return '👥';
                    case 'Workshop':
                        return '🎯';
                    case 'Networking':
                        return '🤝';
                    case 'Webinar':
                        return '🌐';
                    case 'Meetup':
                        return '👥';
                    default:
                        return '📅';
                }
            };

            const getEventTypeColor = (type) => {
                switch (type) {
                    case 'Conference':
                        return 'text-purple-400 bg-purple-500/20';
                    case 'Workshop':
                        return 'text-blue-400 bg-blue-500/20';
                    case 'Networking':
                        return 'text-green-400 bg-green-500/20';
                    case 'Webinar':
                        return 'text-orange-400 bg-orange-500/20';
                    case 'Meetup':
                        return 'text-pink-400 bg-pink-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const handleBookmarkToggle = (eventId) => {
                // Toggle bookmark functionality would be implemented here
                console.log('Toggle bookmark for event:', eventId);
            };

            const handleFollowToggle = (roleModelId) => {
                // Toggle follow functionality would be implemented here
                console.log('Toggle follow for role model:', roleModelId);
            };

            const tabs = [
                { id: 'events', label: 'Career Events', icon: '📅' },
                { id: 'role-models', label: 'Role Models', icon: '👥' },
                { id: 'networking', label: 'Networking', icon: '🤝' },
                { id: 'insights', label: 'AI Insights', icon: '💡' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'events' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Search and Filters */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex flex-col md:flex-row gap-4">
                                        <div className="flex-1">
                                            <div className="relative">
                                                <div className={`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none`}>
                                                    <div className={`w-4 h-4 ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>🔍</div>
                                                </div>
                                                <input
                                                    type="text"
                                                    value={searchQuery}
                                                    onChange={(e) => setSearchQuery(e.target.value)}
                                                    placeholder="Search events..."
                                                    className={`w-full pl-10 pr-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                                />
                                            </div>
                                        </div>
                                        <div className="flex gap-3">
                                            <select
                                                value={filterType}
                                                onChange={(e) => setFilterType(e.target.value)}
                                                className={`px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Types</option>
                                                <option value="conference">Conferences</option>
                                                <option value="workshop">Workshops</option>
                                                <option value="networking">Networking</option>
                                                <option value="webinar">Webinars</option>
                                                <option value="meetup">Meetups</option>
                                            </select>
                                            <select
                                                value={filterLocation}
                                                onChange={(e) => setFilterLocation(e.target.value)}
                                                className={`px-4 py-3 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Locations</option>
                                                <option value="virtual">Virtual Only</option>
                                                <option value="in-person">In-Person Only</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Events List */}
                                <div className="space-y-4">
                                    {careerEvents.map((event) => (
                                        <div key={event.id} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="flex items-start gap-4">
                                                    <div className="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                                        <div className="w-6 h-6 text-white text-xl">{getEventTypeIcon(event.type)}</div>
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{event.title}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getEventTypeColor(event.type)}`}>
                                                                {event.type}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRelevanceColor(event.relevanceScore)}`}>
                                                                {event.relevanceScore}% Match
                                                            </span>
                                                        </div>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <div className="flex items-center gap-1">
                                                                <div className="w-4 h-4">📅</div>
                                                                {event.date}
                                                            </div>
                                                            <div className="flex items-center gap-1">
                                                                <div className="w-4 h-4">📍</div>
                                                                {event.location}
                                                            </div>
                                                            <div className="flex items-center gap-1">
                                                                <div className="w-4 h-4">👥</div>
                                                                {event.attendees} attendees
                                                            </div>
                                                            <div className="flex items-center gap-1">
                                                                <div className="w-4 h-4">💰</div>
                                                                {event.price}
                                                            </div>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>{event.description}</p>
                                                        <div className="flex flex-wrap gap-2 mb-4">
                                                            {event.skills.map((skill) => (
                                                                <span key={skill} className="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full">
                                                                    {skill}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <strong>Speakers:</strong> {event.speakers.join(', ')}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <button
                                                        onClick={() => handleBookmarkToggle(event.id)}
                                                        className={`p-2 rounded-lg transition-colors duration-200 ${
                                                            event.isBookmarked 
                                                                ? 'bg-yellow-500 text-white' 
                                                                : isLightMode 
                                                                    ? 'bg-gray-200 text-gray-600 hover:bg-gray-300'
                                                                    : 'bg-gray-700 text-gray-400 hover:bg-gray-600'
                                                        }`}
                                                    >
                                                        <div className="w-4 h-4">🔖</div>
                                                    </button>
                                                    <button className="p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
                                                        <div className="w-4 h-4">🔗</div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Event Filters */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Event Filters</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Event Type</label>
                                            <select className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>All Types</option>
                                                <option>Conferences</option>
                                                <option>Workshops</option>
                                                <option>Networking</option>
                                                <option>Webinars</option>
                                                <option>Meetups</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Location</label>
                                            <select className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>All Locations</option>
                                                <option>Virtual Only</option>
                                                <option>In-Person Only</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Date Range</label>
                                            <select className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>All Dates</option>
                                                <option>This Month</option>
                                                <option>Next Month</option>
                                                <option>Next Quarter</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Bookmarked Events */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Bookmarked Events</h3>
                                    <div className="space-y-3">
                                        {careerEvents.filter(event => event.isBookmarked).map((event) => (
                                            <div key={event.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>{event.title}</h4>
                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                    {event.date} • {event.location}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'role-models' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className="space-y-4">
                                    {roleModels.map((model) => (
                                        <div key={model.id} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                            <div className="flex items-start gap-4">
                                                <div className="w-16 h-16 bg-gray-300 rounded-full flex-shrink-0"></div>
                                                <div className="flex-1">
                                                    <div className="flex items-start justify-between mb-3">
                                                        <div>
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{model.name}</h3>
                                                            <p className={isLightMode ? 'text-gray-600' : 'text-gray-400'}>{model.title} at {model.company}</p>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mt-1`}>
                                                                <span>{model.followersCount.toLocaleString()} followers</span>
                                                                <span>{model.engagementRate}% engagement</span>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRelevanceColor(model.influenceScore)}`}>
                                                                    {model.influenceScore} Influence
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <button
                                                            onClick={() => handleFollowToggle(model.id)}
                                                            className={`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${
                                                                model.isFollowing 
                                                                    ? 'bg-gray-600 text-white' 
                                                                    : 'bg-indigo-600 text-white hover:bg-indigo-700'
                                                            }`}
                                                        >
                                                            {model.isFollowing ? 'Following' : 'Follow'}
                                                        </button>
                                                    </div>
                                                    <div className="mb-4">
                                                        <div className="flex flex-wrap gap-2">
                                                            {model.contentThemes.map((theme) => (
                                                                <span key={theme} className="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full">
                                                                    {theme}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    <div className="mb-4">
                                                        <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Recent Posts</h4>
                                                        <div className="space-y-1">
                                                            {model.recentPosts.map((post, index) => (
                                                                <p key={index} className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>• {post}</p>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-3">
                                                        <button className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                                            <div className="w-4 h-4">💼</div>
                                                            LinkedIn
                                                        </button>
                                                        <button className="flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                                            <div className="w-4 h-4">🐦</div>
                                                            Twitter
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Following */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Following</h3>
                                    <div className="space-y-3">
                                        {roleModels.filter(model => model.isFollowing).map((model) => (
                                            <div key={model.id} className="flex items-center gap-3">
                                                <div className="w-10 h-10 bg-gray-300 rounded-full flex-shrink-0"></div>
                                                <div>
                                                    <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{model.name}</h4>
                                                    <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{model.title}</p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* AI Recommendations */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>AI Recommendations</h3>
                                    <div className="space-y-4">
                                        <div className={`${isLightMode ? 'bg-blue-100 border-blue-300' : 'bg-blue-500/20 border-blue-500/50'} border rounded-lg p-4`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-blue-700' : 'text-blue-400'} mb-1`}>Trending Topic</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>React Server Components are gaining traction in the community</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-green-100 border-green-300' : 'bg-green-500/20 border-green-500/50'} border rounded-lg p-4`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-green-700' : 'text-green-400'} mb-1`}>Networking Tip</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Engage with content from industry leaders to build meaningful connections</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'networking' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className="space-y-4">
                                    {networkingOpportunities.map((opportunity) => (
                                        <div key={opportunity.id} className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="flex items-start gap-4">
                                                    <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center">
                                                        <div className="w-6 h-6 text-white text-xl">🤝</div>
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{opportunity.name}</h3>
                                                            <span className={`px-2 py-1 ${isLightMode ? 'bg-gray-200 text-gray-700' : 'bg-gray-700 text-gray-300'} text-xs rounded-full`}>
                                                                {opportunity.type}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRelevanceColor(opportunity.relevanceScore)}`}>
                                                                {opportunity.relevanceScore}% Match
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-400'} mb-3`}>{opportunity.title} at {opportunity.company}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-4`}>
                                                            <span>{opportunity.mutualConnections} mutual connections</span>
                                                            <span>•</span>
                                                            <span>Context: {opportunity.eventContext}</span>
                                                        </div>
                                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4 mb-4`}>
                                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>AI Suggested Approach</h4>
                                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{opportunity.suggestedApproach}</p>
                                                        </div>
                                                        <div className="flex gap-3">
                                                            <button className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                                                <div className="w-4 h-4">💼</div>
                                                                Connect
                                                            </button>
                                                            <button className="flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                                                <div className="w-4 h-4">📧</div>
                                                                Email
                                                            </button>
                                                            <button className="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200">
                                                                <div className="w-4 h-4">💾</div>
                                                                Save Contact
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Networking Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Networking Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Opportunities Found</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12 this month</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Connections Made</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8 this month</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Events Attended</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>3 this quarter</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Networking Tips */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Networking Tips</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Research attendees before events to identify key connections</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Follow up within 24 hours of meeting someone new</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Share valuable content to stay top-of-mind with your network</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'insights' && (
                        <div className="space-y-8">
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📅</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Event Recommendation</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Based on your interests, we recommend attending React Conf 2024 for networking opportunities.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-blue-600' : 'text-blue-400'}`}>High relevance for your career goals</div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">🤝</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Networking Strategy</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Focus on connecting with senior engineers at your target companies.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>Strategic networking approach</div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📝</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Content Opportunity</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Share your experience at tech events to build your professional brand.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-purple-600' : 'text-purple-400'}`}>Content creation opportunity</div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📈</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Career Growth</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Attending leadership workshops can accelerate your career progression.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-orange-600' : 'text-orange-400'}`}>Growth opportunity identified</div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-pink-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📊</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Industry Trends</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>AI and machine learning events are trending in your industry.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-pink-600' : 'text-pink-400'}`}>Industry trend analysis</div>
                                </div>

                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 bg-cyan-500 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">🎯</div>
                                        </div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Skill Development</h3>
                                    </div>
                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Consider attending workshops on cloud architecture to expand your skills.</p>
                                    <div className={`text-sm ${isLightMode ? 'text-cyan-600' : 'text-cyan-400'}`}>Skill development path</div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Career Event Scout when career-event-scout-content is shown
        window.renderCareerEventScout = function() {
            console.log('renderCareerEventScout called');
            const container = document.getElementById('career-event-scout-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Career Event Scout...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<CareerEventScout />);
                    console.log('Career Event Scout rendered successfully');
                } catch (error) {
                    console.error('Error rendering Career Event Scout:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Career Event Scout</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('career-event-scout-container not found');
            }
        };

        // AI Brand Intelligence React Component
        const AIBrandIntelligence = () => {
            const [activeTab, setActiveTab] = useState('overview');
            const [isScanning, setIsScanning] = useState(false);
            const [lastScanDate, setLastScanDate] = useState('2024-03-15');
            const [selectedInsight, setSelectedInsight] = useState(null);
            const [filterPriority, setFilterPriority] = useState('all');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const brandHealthScore = {
                overall: 78,
                visibility: 82,
                engagement: 74,
                reputation: 85,
                authority: 71,
                trend: 'up'
            };

            const mentorInsights = [
                {
                    id: 1,
                    type: 'weekly',
                    title: 'Search Visibility Boost Opportunity',
                    content: 'Your LinkedIn profile appears on page 2 for "software engineer" searches. Optimizing your headline and adding more relevant keywords could move you to page 1.',
                    priority: 'high',
                    actionItems: [
                        { id: 1, title: 'Update LinkedIn headline with target keywords', description: 'Add "Senior Software Engineer | React & Node.js" to headline', category: 'SEO', difficulty: 'easy', estimatedTime: '5 min', completed: false },
                        { id: 2, title: 'Add 3 more relevant skills to LinkedIn', description: 'Include trending technologies in your skills section', category: 'SEO', difficulty: 'easy', estimatedTime: '10 min', completed: false }
                    ],
                    estimatedImpact: 'High',
                    createdAt: '2024-03-15',
                    isRead: false
                },
                {
                    id: 2,
                    type: 'monthly',
                    title: 'LinkedIn Engagement Trending Up',
                    content: 'Your recent posts about React development are getting 40% more engagement than your average. Consider creating more technical content.',
                    priority: 'medium',
                    actionItems: [
                        { id: 3, title: 'Create weekly technical posts', description: 'Share insights about React best practices and development tips', category: 'Content', difficulty: 'medium', estimatedTime: '30 min', completed: false }
                    ],
                    estimatedImpact: 'Medium',
                    createdAt: '2024-03-10',
                    isRead: true
                },
                {
                    id: 3,
                    type: 'achievement',
                    title: 'Consistency Achievement Unlocked',
                    content: 'You\'ve posted consistently for 2 weeks! This is building your professional brand authority.',
                    priority: 'low',
                    actionItems: [
                        { id: 4, title: 'Maintain posting schedule', description: 'Continue posting 2-3 times per week', category: 'Content', difficulty: 'easy', estimatedTime: '15 min', completed: true }
                    ],
                    estimatedImpact: 'Low',
                    createdAt: '2024-03-12',
                    isRead: true
                }
            ];

            const reputationAlerts = [
                {
                    id: 1,
                    type: 'opportunity',
                    title: 'New Job Opportunity Mention',
                    description: 'A recruiter mentioned you in a post about React developers. This could lead to new opportunities.',
                    severity: 'info',
                    isRead: false,
                    actionRequired: false,
                    createdAt: '2024-03-14'
                },
                {
                    id: 2,
                    type: 'visibility',
                    title: 'Search Ranking Drop',
                    description: 'Your GitHub profile dropped from page 1 to page 2 for "full-stack developer" searches.',
                    severity: 'warning',
                    isRead: true,
                    actionRequired: true,
                    createdAt: '2024-03-13'
                }
            ];

            const brandMentions = [
                {
                    id: 1,
                    platform: 'LinkedIn',
                    title: 'Senior Software Engineer at TechCorp',
                    url: 'https://linkedin.com/in/johndoe',
                    snippet: 'Experienced React developer with 5+ years building scalable web applications...',
                    sentiment: 'positive',
                    ranking: 1,
                    date: '2024-03-15',
                    isOwned: true
                },
                {
                    id: 2,
                    platform: 'GitHub',
                    title: 'React Portfolio Project',
                    url: 'https://github.com/johndoe/portfolio',
                    snippet: 'Modern portfolio built with React, TypeScript, and Tailwind CSS...',
                    sentiment: 'neutral',
                    ranking: 3,
                    date: '2024-03-10',
                    isOwned: true
                },
                {
                    id: 3,
                    platform: 'Portfolio',
                    title: 'John Doe - Full Stack Developer',
                    url: 'https://johndoe.dev',
                    snippet: 'Passionate about creating user-friendly applications with modern technologies...',
                    sentiment: 'positive',
                    ranking: 2,
                    date: '2024-03-08',
                    isOwned: true
                }
            ];

            const getScoreColor = (score) => {
                if (score >= 80) return 'text-green-400';
                if (score >= 60) return 'text-yellow-400';
                return 'text-red-400';
            };

            const getScoreBgColor = (score) => {
                if (score >= 80) return 'bg-green-500/20';
                if (score >= 60) return 'bg-yellow-500/20';
                return 'bg-red-500/20';
            };

            const getPriorityColor = (priority) => {
                switch (priority) {
                    case 'high':
                        return 'text-red-400 bg-red-500/20';
                    case 'medium':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'low':
                        return 'text-green-400 bg-green-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getSeverityColor = (severity) => {
                switch (severity) {
                    case 'critical':
                        return 'text-red-400 bg-red-500/20';
                    case 'warning':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'info':
                        return 'text-blue-400 bg-blue-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getSentimentColor = (sentiment) => {
                switch (sentiment) {
                    case 'positive':
                        return 'text-green-400 bg-green-500/20';
                    case 'negative':
                        return 'text-red-400 bg-red-500/20';
                    case 'neutral':
                        return 'text-gray-400 bg-gray-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getPlatformColor = (platform) => {
                switch (platform) {
                    case 'LinkedIn':
                        return 'text-blue-400 bg-blue-500/20';
                    case 'GitHub':
                        return 'text-gray-400 bg-gray-500/20';
                    case 'Portfolio':
                        return 'text-purple-400 bg-purple-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const handleBrandScan = () => {
                setIsScanning(true);
                // Simulate brand scan
                setTimeout(() => {
                    setIsScanning(false);
                    setLastScanDate(new Date().toISOString().split('T')[0]);
                }, 3000);
            };

            const handleInsightClick = (insight) => {
                setSelectedInsight(insight);
            };

            const handleActionToggle = (insightId, actionId) => {
                // Toggle action completion
                console.log('Toggle action:', insightId, actionId);
            };

            const tabs = [
                { id: 'overview', label: 'Brand Overview', icon: '📊' },
                { id: 'insights', label: 'AI Insights & Actions', icon: '💡' },
                { id: 'reputation', label: 'Reputation Monitor', icon: '🛡️' },
                { id: 'analytics', label: 'Analytics & Trends', icon: '📈' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex items-center justify-between">
                            <div className="flex space-x-1 overflow-x-auto">
                                {tabs.map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                            activeTab === tab.id
                                                ? 'bg-indigo-600 text-white shadow-lg'
                                                : isLightMode 
                                                    ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                    : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                        }`}
                                    >
                                        <div className="w-4 h-4">{tab.icon}</div>
                                        {tab.label}
                                    </button>
                                ))}
                            </div>
                            <button
                                onClick={handleBrandScan}
                                disabled={isScanning}
                                className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all duration-300 disabled:opacity-50 ml-4"
                            >
                                {isScanning ? (
                                    <>
                                        <div className="w-4 h-4 animate-spin">🔄</div>
                                        Scanning...
                                    </>
                                ) : (
                                    <>
                                        <div className="w-4 h-4">✨</div>
                                        Run Brand Scan
                                    </>
                                )}
                            </button>
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'overview' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Brand Health Dashboard */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📊</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Brand Health Dashboard</h2>
                                    </div>
                                    
                                    <div className="text-center mb-8">
                                        <div className={`text-6xl font-bold ${getScoreColor(brandHealthScore.overall)} mb-2`}>
                                            {brandHealthScore.overall}
                                        </div>
                                        <p className={`text-xl ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>Overall Brand Score</p>
                                        <div className={`flex items-center justify-center gap-2 ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>
                                            <div className="w-4 h-4">📈</div>
                                            <span>+5% from last month</span>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandHealthScore.visibility)}`}>
                                                {brandHealthScore.visibility}
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Visibility</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandHealthScore.engagement)}`}>
                                                {brandHealthScore.engagement}
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Engagement</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandHealthScore.reputation)}`}>
                                                {brandHealthScore.reputation}
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Reputation</p>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${getScoreColor(brandHealthScore.authority)}`}>
                                                {brandHealthScore.authority}
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Authority</p>
                                        </div>
                                    </div>
                                    
                                    <div className={`mt-6 p-4 ${isLightMode ? 'bg-indigo-100 border-indigo-300' : 'bg-gradient-to-r from-indigo-500/20 to-purple-600/20 border-indigo-500/30'} border rounded-lg`}>
                                        <h3 className={`font-semibold ${isLightMode ? 'text-indigo-700' : 'text-indigo-400'} mb-2`}>AI Recommendation</h3>
                                        <p className={isLightMode ? 'text-gray-600' : 'text-gray-300'}>Focus on improving your engagement score by posting more consistently on LinkedIn and sharing valuable technical content.</p>
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Quick Actions</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <button className="bg-blue-600 text-white p-6 rounded-xl hover:bg-blue-700 transition-colors duration-200">
                                            <div className="flex items-center gap-3 mb-2">
                                                <div className="w-8 h-8">💡</div>
                                                <h3 className="font-semibold">View AI Insights</h3>
                                            </div>
                                            <p className="text-blue-100 text-sm">Get personalized recommendations</p>
                                        </button>
                                        <button className="bg-yellow-600 text-white p-6 rounded-xl hover:bg-yellow-700 transition-colors duration-200">
                                            <div className="flex items-center gap-3 mb-2">
                                                <div className="w-8 h-8">🛡️</div>
                                                <h3 className="font-semibold">Check Reputation</h3>
                                            </div>
                                            <p className="text-yellow-100 text-sm">Monitor your online presence</p>
                                        </button>
                                        <button className="bg-purple-600 text-white p-6 rounded-xl hover:bg-purple-700 transition-colors duration-200">
                                            <div className="flex items-center gap-3 mb-2">
                                                <div className="w-8 h-8">📈</div>
                                                <h3 className="font-semibold">View Analytics</h3>
                                            </div>
                                            <p className="text-purple-100 text-sm">Track your brand growth</p>
                                        </button>
                                    </div>
                                </div>

                                {/* Recent Activity & Alerts */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Recent Activity & Alerts</h2>
                                    <div className="space-y-4">
                                        {reputationAlerts.map((alert) => (
                                            <div key={alert.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <div className="flex items-start justify-between">
                                                    <div className="flex items-start gap-3">
                                                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${getSeverityColor(alert.severity)}`}>
                                                            <div className="w-4 h-4">🔔</div>
                                                        </div>
                                                        <div>
                                                            <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{alert.title}</h3>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} text-sm`}>{alert.description}</p>
                                                            <div className="flex items-center gap-2 mt-2">
                                                                <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{alert.createdAt}</span>
                                                                {alert.actionRequired && (
                                                                    <span className="px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded-full">
                                                                        Action Required
                                                                    </span>
                                                                )}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {!alert.isRead && (
                                                        <div className="w-2 h-2 bg-blue-500 rounded-full"></div>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Top Priority Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Top Priority Actions</h3>
                                    <div className="space-y-3">
                                        {mentorInsights.filter(insight => insight.priority === 'high').map((insight) => (
                                            <div key={insight.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>{insight.title}</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>{insight.content.substring(0, 80)}...</p>
                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(insight.priority)}`}>
                                                    {insight.priority.toUpperCase()}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Online Presence */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Online Presence</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Mentions</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Positive Sentiment</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>85%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Avg. Ranking</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>2.1</span>
                                        </div>
                                    </div>
                                </div>

                                {/* This Week's Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>This Week's Progress</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Actions Completed</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>3/5</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Score Change</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-green-600' : 'text-green-400'}`}>+5 points</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>New Mentions</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>2</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'insights' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>AI-Generated Insights</h2>
                                        <select
                                            value={filterPriority}
                                            onChange={(e) => setFilterPriority(e.target.value)}
                                            className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                        >
                                            <option value="all">All Priorities</option>
                                            <option value="high">High Priority</option>
                                            <option value="medium">Medium Priority</option>
                                            <option value="low">Low Priority</option>
                                        </select>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {mentorInsights
                                            .filter(insight => filterPriority === 'all' || insight.priority === filterPriority)
                                            .map((insight) => (
                                            <div key={insight.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex items-start gap-3">
                                                        <div className="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                                            <div className="w-5 h-5 text-white text-xl">💡</div>
                                                        </div>
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-3 mb-2">
                                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{insight.title}</h3>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(insight.priority)}`}>
                                                                    {insight.priority.toUpperCase()}
                                                                </span>
                                                                <span className={`px-2 py-1 ${isLightMode ? 'bg-blue-100 text-blue-600' : 'bg-blue-500/20 text-blue-400'} text-xs rounded-full`}>
                                                                    {insight.estimatedImpact} Impact
                                                                </span>
                                                            </div>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>{insight.content}</p>
                                                        </div>
                                                    </div>
                                                    {!insight.isRead && (
                                                        <div className="w-2 h-2 bg-blue-500 rounded-full"></div>
                                                    )}
                                                </div>
                                                
                                                <div className="space-y-3">
                                                    <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Action Items</h4>
                                                    {insight.actionItems.map((action) => (
                                                        <div key={action.id} className={`flex items-start gap-3 ${isLightMode ? 'bg-white/20 backdrop-blur-xl border-white/10' : 'bg-gray-700'} border rounded-lg p-3`}>
                                                            <input
                                                                type="checkbox"
                                                                checked={action.completed}
                                                                onChange={() => handleActionToggle(insight.id, action.id)}
                                                                className={`mt-1 w-4 h-4 text-indigo-600 ${isLightMode ? 'bg-white border-gray-300' : 'bg-gray-800 border-gray-600'} rounded focus:ring-indigo-500`}
                                                            />
                                                            <div className="flex-1">
                                                                <h5 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{action.title}</h5>
                                                                <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{action.description}</p>
                                                                <div className="flex items-center gap-2 mt-2">
                                                                    <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{action.category}</span>
                                                                    <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>•</span>
                                                                    <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{action.difficulty}</span>
                                                                    <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>•</span>
                                                                    <span className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{action.estimatedTime}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Action Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Action Progress</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                <span>Overall Progress</span>
                                                <span>60%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-indigo-500 h-2 rounded-full" style={{ width: '60%' }}></div>
                                            </div>
                                        </div>
                                        <div className="space-y-2">
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completed</span>
                                                <span className="text-green-400">3</span>
                                            </div>
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>In Progress</span>
                                                <span className="text-yellow-400">2</span>
                                            </div>
                                            <div className="flex justify-between text-sm">
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Pending</span>
                                                <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>1</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Wins */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Wins</h3>
                                    <div className="space-y-3">
                                        {mentorInsights
                                            .filter(insight => insight.priority === 'high' && insight.actionItems.some(action => action.difficulty === 'easy'))
                                            .map((insight) => (
                                            <div key={insight.id} className="bg-green-500/20 border border-green-500/50 rounded-lg p-3">
                                                <h4 className="font-medium text-green-400 mb-1">{insight.title}</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Easy actions available</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'reputation' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Brand Mentions & Search Results</h2>
                                    
                                    <div className="space-y-4">
                                        {brandMentions.map((mention) => (
                                            <div key={mention.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex items-start gap-4">
                                                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${getPlatformColor(mention.platform)}`}>
                                                            <div className="w-5 h-5 text-xl">
                                                                {mention.platform === 'LinkedIn' ? '💼' : 
                                                                 mention.platform === 'GitHub' ? '🐙' : '🌐'}
                                                            </div>
                                                        </div>
                                                        <div className="flex-1">
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>{mention.title}</h3>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{mention.snippet}</p>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                                <span>Ranking: #{mention.ranking}</span>
                                                                <span>•</span>
                                                                <span>{mention.date}</span>
                                                                <span>•</span>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getSentimentColor(mention.sentiment)}`}>
                                                                    {mention.sentiment}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button className="p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
                                                        <div className="w-4 h-4">🔗</div>
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Reputation Health */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Reputation Health</h3>
                                    <div className="text-center mb-4">
                                        <div className={`text-4xl font-bold ${isLightMode ? 'text-green-600' : 'text-green-400'} mb-2`}>85</div>
                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Overall Score</div>
                                    </div>
                                    <div className="space-y-3">
                                        <div className="flex justify-between text-sm">
                                            <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Positive Mentions</span>
                                            <span className={`${isLightMode ? 'text-green-600' : 'text-green-400'}`}>85%</span>
                                        </div>
                                        <div className="flex justify-between text-sm">
                                            <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Search Visibility</span>
                                            <span className={`${isLightMode ? 'text-blue-600' : 'text-blue-400'}`}>Good</span>
                                        </div>
                                        <div className="flex justify-between text-sm">
                                            <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Authority Score</span>
                                            <span className={`${isLightMode ? 'text-purple-600' : 'text-purple-400'}`}>71</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Monitoring Settings */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Monitoring Settings</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-center justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>LinkedIn</span>
                                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div className="flex items-center justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>GitHub</span>
                                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div className="flex items-center justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Portfolio</span>
                                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'analytics' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📈</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Brand Performance Analytics</h2>
                                    </div>
                                    
                                    <div className="text-center py-20">
                                        <div className="w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                            <div className="w-8 h-8 text-white text-3xl">📊</div>
                                        </div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Interactive Analytics Coming Soon</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-8`}>Advanced charts and trend analysis will be available in the next update</p>
                                        <button className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-300">
                                            Get Notified
                                        </button>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Key Metrics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Key Metrics</h3>
                                    <div className="space-y-4">
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${isLightMode ? 'text-green-600' : 'text-green-400'} mb-1`}>+12%</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Brand Growth</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${isLightMode ? 'text-blue-600' : 'text-blue-400'} mb-1`}>+8</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>New Mentions</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-2xl font-bold ${isLightMode ? 'text-purple-600' : 'text-purple-400'} mb-1`}>+15%</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Engagement</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Export Options */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Export Options</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                            Brand Report
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Reputation Analysis
                                        </button>
                                        <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                            Action Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render AI Brand Intelligence when brand-intelligence-content is shown
        window.renderAIBrandIntelligence = function() {
            console.log('renderAIBrandIntelligence called');
            const container = document.getElementById('brand-intelligence-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering AI Brand Intelligence...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<AIBrandIntelligence />);
                    console.log('AI Brand Intelligence rendered successfully');
                } catch (error) {
                    console.error('Error rendering AI Brand Intelligence:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading AI Brand Intelligence</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('brand-intelligence-container not found');
            }
        };

        // Upskilling Dashboard React Component
        const UpskillingDashboard = () => {
            const [activeTab, setActiveTab] = useState('overview');
            
            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const skills = [
                {
                    id: 1,
                    name: 'React',
                    currentLevel: 85,
                    targetLevel: 90,
                    marketDemand: 'high',
                    trendDirection: 'up',
                    lastUpdated: '2024-03-15'
                },
                {
                    id: 2,
                    name: 'TypeScript',
                    currentLevel: 75,
                    targetLevel: 85,
                    marketDemand: 'high',
                    trendDirection: 'up',
                    lastUpdated: '2024-03-14'
                },
                {
                    id: 3,
                    name: 'Node.js',
                    currentLevel: 70,
                    targetLevel: 80,
                    marketDemand: 'medium',
                    trendDirection: 'stable',
                    lastUpdated: '2024-03-12'
                },
                {
                    id: 4,
                    name: 'Python',
                    currentLevel: 60,
                    targetLevel: 75,
                    marketDemand: 'high',
                    trendDirection: 'up',
                    lastUpdated: '2024-03-10'
                }
            ];

            const learningPaths = [
                {
                    id: 1,
                    title: 'Full Stack Development',
                    description: 'Master modern web development with React, Node.js, and databases',
                    progress: 65,
                    estimatedTime: '6 months',
                    difficulty: 'intermediate',
                    skills: ['React', 'Node.js', 'MongoDB', 'TypeScript'],
                    nextMilestone: 'Build a complete e-commerce application'
                },
                {
                    id: 2,
                    title: 'AI/ML Engineering',
                    description: 'Learn machine learning fundamentals and AI development',
                    progress: 25,
                    estimatedTime: '8 months',
                    difficulty: 'advanced',
                    skills: ['Python', 'TensorFlow', 'Data Science', 'MLOps'],
                    nextMilestone: 'Complete your first ML project'
                },
                {
                    id: 3,
                    title: 'DevOps & Cloud',
                    description: 'Master cloud infrastructure and deployment strategies',
                    progress: 40,
                    estimatedTime: '4 months',
                    difficulty: 'intermediate',
                    skills: ['AWS', 'Docker', 'Kubernetes', 'CI/CD'],
                    nextMilestone: 'Deploy a scalable microservices architecture'
                }
            ];

            const sprints = [
                {
                    id: 1,
                    title: 'React Performance Optimization',
                    description: 'Learn advanced React patterns and optimization techniques',
                    duration: '2 weeks',
                    status: 'active',
                    progress: 60,
                    deliverable: 'Optimized React application',
                    startDate: '2024-03-10',
                    endDate: '2024-03-24'
                },
                {
                    id: 2,
                    title: 'TypeScript Advanced Patterns',
                    description: 'Master advanced TypeScript features and design patterns',
                    duration: '3 weeks',
                    status: 'upcoming',
                    progress: 0,
                    deliverable: 'TypeScript utility library',
                    startDate: '2024-03-25',
                    endDate: '2024-04-15'
                },
                {
                    id: 3,
                    title: 'Node.js Microservices',
                    description: 'Build scalable microservices with Node.js',
                    duration: '4 weeks',
                    status: 'completed',
                    progress: 100,
                    deliverable: 'Microservices architecture',
                    startDate: '2024-02-15',
                    endDate: '2024-03-10'
                }
            ];

            const achievements = [
                {
                    id: 1,
                    title: 'Sprint Completed',
                    description: 'React Performance Optimization',
                    color: 'bg-green-500',
                    date: '2024-03-15'
                },
                {
                    id: 2,
                    title: 'Skill Milestone',
                    description: 'React Level 85%',
                    color: 'bg-blue-500',
                    date: '2024-03-14'
                },
                {
                    id: 3,
                    title: 'Market Alignment',
                    description: 'High demand skills improved',
                    color: 'bg-purple-500',
                    date: '2024-03-12'
                }
            ];

            const getSkillLevelColor = (level) => {
                if (level >= 80) return 'text-green-400';
                if (level >= 60) return 'text-blue-400';
                if (level >= 40) return 'text-yellow-400';
                return 'text-red-400';
            };

            const getMarketDemandColor = (demand) => {
                switch (demand) {
                    case 'high':
                        return 'text-green-400 bg-green-500/20';
                    case 'medium':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'low':
                        return 'text-red-400 bg-red-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getTrendIcon = (trend) => {
                switch (trend) {
                    case 'up':
                        return '📈';
                    case 'down':
                        return '📉';
                    case 'stable':
                        return '➡️';
                    default:
                        return '➡️';
                }
            };

            const getDifficultyColor = (difficulty) => {
                switch (difficulty) {
                    case 'beginner':
                        return 'text-green-400 bg-green-500/20';
                    case 'intermediate':
                        return 'text-yellow-400 bg-yellow-500/20';
                    case 'advanced':
                        return 'text-red-400 bg-red-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getStatusColor = (status) => {
                switch (status) {
                    case 'active':
                        return 'text-green-400 bg-green-500/20';
                    case 'completed':
                        return 'text-blue-400 bg-blue-500/20';
                    case 'upcoming':
                        return 'text-orange-400 bg-orange-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const tabs = [
                { id: 'overview', label: 'Overview', icon: '📊' },
                { id: 'skills', label: 'Skills Radar', icon: '🎯' },
                { id: 'paths', label: 'Learning Paths', icon: '🛤️' },
                { id: 'sprints', label: 'Learning Sprints', icon: '🏃' },
                { id: 'certifications', label: 'Certifications', icon: '🏆' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'overview' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-8">
                                {/* Learning Progress Overview */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                            <div className="w-5 h-5 text-white text-xl">📊</div>
                                        </div>
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Learning Progress Overview</h2>
                                    </div>
                                    
                                    <div className="grid grid-cols-3 gap-6 mb-8">
                                        <div className="text-center">
                                            <div className={`text-3xl font-bold ${isLightMode ? 'text-indigo-600' : 'text-indigo-400'} mb-2`}>12</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Tracked</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-3xl font-bold ${isLightMode ? 'text-green-600' : 'text-green-400'} mb-2`}>65%</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Avg. Progress</div>
                                        </div>
                                        <div className="text-center">
                                            <div className={`text-3xl font-bold ${isLightMode ? 'text-purple-600' : 'text-purple-400'} mb-2`}>8</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completed Sprints</div>
                                        </div>
                                    </div>

                                    {/* Active Learning Paths */}
                                    <div className="mb-8">
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Active Learning Paths</h3>
                                        <div className="space-y-4">
                                            {learningPaths.slice(0, 2).map((path) => (
                                                <div key={path.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                    <div className="flex items-start justify-between mb-4">
                                                        <div>
                                                            <h4 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{path.title}</h4>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{path.description}</p>
                                                            <div className="flex items-center gap-3">
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(path.difficulty)}`}>
                                                                    {path.difficulty}
                                                                </span>
                                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{path.estimatedTime}</span>
                                                            </div>
                                                        </div>
                                                        <div className="text-right">
                                                            <div className={`text-2xl font-bold ${isLightMode ? 'text-indigo-600' : 'text-indigo-400'} mb-1`}>{path.progress}%</div>
                                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Progress</div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="mb-4">
                                                        <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                            <span>Progress</span>
                                                            <span>{path.progress}%</span>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                            <div 
                                                                className="bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full transition-all duration-500"
                                                                style={{ width: `${path.progress}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="mb-4">
                                                        <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}><strong>Next Milestone:</strong> {path.nextMilestone}</p>
                                                        <div className="flex flex-wrap gap-2">
                                                            {path.skills.map((skill) => (
                                                                <span key={skill} className={`px-2 py-1 ${isLightMode ? 'bg-indigo-100 text-indigo-600' : 'bg-indigo-500/20 text-indigo-400'} text-xs rounded-full`}>
                                                                    {skill}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    
                                                    <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                                        Continue Learning
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Current Learning Sprints */}
                                    <div>
                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Current Learning Sprints</h3>
                                        <div className="space-y-4">
                                            {sprints.filter(sprint => sprint.status === 'active').map((sprint) => (
                                                <div key={sprint.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                    <div className="flex items-start justify-between mb-4">
                                                        <div>
                                                            <h4 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{sprint.title}</h4>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{sprint.description}</p>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                                <span>{sprint.duration}</span>
                                                                <span>•</span>
                                                                <span>Deliverable: {sprint.deliverable}</span>
                                                            </div>
                                                        </div>
                                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(sprint.status)}`}>
                                                            {sprint.status}
                                                        </span>
                                                    </div>
                                                    
                                                    <div className="mb-4">
                                                        <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                            <span>Progress</span>
                                                            <span>{sprint.progress}%</span>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                            <div 
                                                                className="bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full transition-all duration-500"
                                                                style={{ width: `${sprint.progress}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Skill Radar Summary */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Skill Radar Summary</h3>
                                    <div className="space-y-4">
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-green-400 mb-1">4</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>High Demand Skills</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-blue-400 mb-1">3</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Trending Up</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-purple-400 mb-1">2</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills to Learn</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-yellow-400 mb-1">85%</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Market Alignment</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                            Start New Sprint
                                        </button>
                                        <button className="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                            Browse Learning Paths
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Plan Certifications
                                        </button>
                                    </div>
                                </div>

                                {/* Recent Achievements */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recent Achievements</h3>
                                    <div className="space-y-3">
                                        {achievements.map((achievement) => (
                                            <div key={achievement.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <div className="flex items-start gap-3">
                                                    <div className={`w-3 h-3 rounded-full ${achievement.color} mt-2 flex-shrink-0`}></div>
                                                    <div>
                                                        <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{achievement.title}</h4>
                                                        <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{achievement.description}</p>
                                                        <p className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mt-1`}>{achievement.date}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'skills' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Your Skills Portfolio</h2>
                                    
                                    <div className="space-y-6">
                                        {skills.map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex items-start gap-4">
                                                        <div className="w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                                            <div className="w-6 h-6 text-white text-xl">💻</div>
                                                        </div>
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-3 mb-2">
                                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getMarketDemandColor(skill.marketDemand)}`}>
                                                                    {skill.marketDemand} demand
                                                                </span>
                                                                <div className="flex items-center gap-1">
                                                                    <div className="w-4 h-4">{getTrendIcon(skill.trendDirection)}</div>
                                                                    <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{skill.trendDirection}</span>
                                                                </div>
                                                            </div>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-4`}>
                                                                <span>Current: {skill.currentLevel}%</span>
                                                                <span>Target: {skill.targetLevel}%</span>
                                                                <span>Updated: {skill.lastUpdated}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className={`text-2xl font-bold ${getSkillLevelColor(skill.currentLevel)}`}>
                                                            {skill.currentLevel}%
                                                        </div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Current Level</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="mb-4">
                                                    <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                        <span>Progress to Target</span>
                                                        <span>{skill.currentLevel}/{skill.targetLevel}%</span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-3`}>
                                                        <div 
                                                            className="bg-gradient-to-r from-purple-500 to-indigo-600 h-3 rounded-full transition-all duration-500"
                                                            style={{ width: `${(skill.currentLevel / skill.targetLevel) * 100}%` }}
                                                        ></div>
                                                    </div>
                                                </div>
                                                
                                                <div className="flex items-center justify-between">
                                                    <div className="text-sm text-gray-400">
                                                        {skill.targetLevel - skill.currentLevel}% to reach target
                                                    </div>
                                                    <button className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors duration-200">
                                                        Update Progress
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Market Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Market Insights</h3>
                                    <div className="space-y-4">
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-4">
                                            <h4 className="font-medium text-green-400 mb-1">Trending Skill</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>AI/ML skills are in high demand (+25% growth)</p>
                                        </div>
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-4">
                                            <h4 className="font-medium text-blue-400 mb-1">Opportunity</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>React developers earn 15% more than average</p>
                                        </div>
                                        <div className="bg-purple-500/20 border border-purple-500/50 rounded-lg p-4">
                                            <h4 className="font-medium text-purple-400 mb-1">Recommendation</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Focus on TypeScript to boost your market value</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'paths' && (
                        <div className="space-y-8">
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Learning Paths</h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {learningPaths.map((path) => (
                                        <div key={path.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:scale-105 transition-transform duration-300`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div>
                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{path.title}</h3>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{path.description}</p>
                                                    <div className="flex items-center gap-3 mb-4">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(path.difficulty)}`}>
                                                            {path.difficulty}
                                                        </span>
                                                        <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{path.estimatedTime}</span>
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className={`text-2xl font-bold ${isLightMode ? 'text-indigo-600' : 'text-indigo-400'} mb-1`}>{path.progress}%</div>
                                                    <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Progress</div>
                                                </div>
                                            </div>
                                            
                                            <div className="mb-4">
                                                <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                    <span>Progress</span>
                                                    <span>{path.progress}%</span>
                                                </div>
                                                <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                    <div 
                                                        className="bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full transition-all duration-500"
                                                        style={{ width: `${path.progress}%` }}
                                                    ></div>
                                                </div>
                                            </div>
                                            
                                            <div className="mb-4">
                                                <div className="flex flex-wrap gap-2">
                                                    {path.skills.map((skill) => (
                                                        <span key={skill} className={`px-2 py-1 ${isLightMode ? 'bg-indigo-100 text-indigo-600' : 'bg-indigo-500/20 text-indigo-400'} text-xs rounded-full`}>
                                                            {skill}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            
                                            <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                                Continue Learning
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'sprints' && (
                        <div className="space-y-8">
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Learning Sprints</h2>
                                    <button className="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                        Start New Sprint
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {sprints.map((sprint) => (
                                        <div key={sprint.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:scale-105 transition-transform duration-300`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div>
                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{sprint.title}</h3>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{sprint.description}</p>
                                                    <div className={`flex items-center gap-3 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-4`}>
                                                        <span>{sprint.duration}</span>
                                                        <span>•</span>
                                                        <span>{sprint.deliverable}</span>
                                                    </div>
                                                </div>
                                                <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(sprint.status)}`}>
                                                    {sprint.status}
                                                </span>
                                            </div>
                                            
                                            {sprint.status === 'active' && (
                                                <div className="mb-4">
                                                    <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                        <span>Progress</span>
                                                        <span>{sprint.progress}%</span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                        <div 
                                                            className="bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full transition-all duration-500"
                                                            style={{ width: `${sprint.progress}%` }}
                                                        ></div>
                                                    </div>
                                                </div>
                                            )}
                                            
                                            <div className={`flex items-center justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-4`}>
                                                <span>Start: {sprint.startDate}</span>
                                                <span>End: {sprint.endDate}</span>
                                            </div>
                                            
                                            <button className={`w-full py-2 rounded-lg font-medium transition-colors duration-200 ${
                                                sprint.status === 'active' 
                                                    ? 'bg-green-600 text-white hover:bg-green-700'
                                                    : sprint.status === 'completed'
                                                    ? 'bg-blue-600 text-white hover:bg-blue-700'
                                                    : 'bg-orange-600 text-white hover:bg-orange-700'
                                            }`}>
                                                {sprint.status === 'active' ? 'Continue Sprint' : 
                                                 sprint.status === 'completed' ? 'View Results' : 'Start Sprint'}
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'certifications' && (
                        <div className="space-y-8">
                            <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                <div className="text-center py-20">
                                    <div className="w-20 h-20 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <div className="w-10 h-10 text-white text-3xl">🏆</div>
                                    </div>
                                    <h3 className={`text-2xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Certification Planning</h3>
                                    <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-8`}>Plan and track your professional certifications to boost your career</p>
                                    <button className="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">
                                        Plan Certifications
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Upskilling Dashboard when upskilling-dash-content is shown
        window.renderUpskillingDashboard = function() {
            console.log('renderUpskillingDashboard called');
            const container = document.getElementById('upskilling-dash-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Upskilling Dashboard...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<UpskillingDashboard />);
                    console.log('Upskilling Dashboard rendered successfully');
                } catch (error) {
                    console.error('Error rendering Upskilling Dashboard:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Upskilling Dashboard</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('upskilling-dash-container not found');
            }
        };

        // Skill Radar React Component
        const SkillRadar = () => {
            const [activeView, setActiveView] = useState('radar');
            const [timeframe, setTimeframe] = useState('7d');
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [selectedSkill, setSelectedSkill] = useState(null);
            const [showSkillDetail, setShowSkillDetail] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [showSettings, setShowSettings] = useState(false);
            const [isScanning, setIsScanning] = useState(false);
            const [lastScanTime, setLastScanTime] = useState('2024-03-15 14:30');
            const [notifications, setNotifications] = useState([]);
            const [showOnboarding, setShowOnboarding] = useState(false);
            const [personalization, setPersonalization] = useState({
                role: 'Software Engineer',
                industry: 'Technology',
                location: 'San Francisco, CA',
                experienceLevel: 'Mid-level',
                careerGoals: 'Senior Developer',
                skillLevel: 'Intermediate'
            });

            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const skills = [
                {
                    id: 1,
                    name: 'AI/ML',
                    category: 'technical',
                    demandScore: 95,
                    growthRate: 45,
                    salaryImpact: 25,
                    jobCount: 12500,
                    trend: 'rising',
                    position: { x: 0.7, y: 0.8 },
                    isWatched: true,
                    emergingStatus: 'hot',
                    learningResources: ['Coursera', 'Fast.ai', 'Kaggle'],
                    timeToLearn: '6-12 months',
                    relatedSkills: ['Python', 'TensorFlow', 'Data Science']
                },
                {
                    id: 2,
                    name: 'Kubernetes',
                    category: 'tools',
                    demandScore: 88,
                    growthRate: 32,
                    salaryImpact: 20,
                    jobCount: 8500,
                    trend: 'rising',
                    position: { x: 0.6, y: 0.3 },
                    isWatched: false,
                    emergingStatus: 'emerging',
                    learningResources: ['Kubernetes.io', 'CNCF', 'Linux Academy'],
                    timeToLearn: '3-6 months',
                    relatedSkills: ['Docker', 'DevOps', 'Cloud']
                },
                {
                    id: 3,
                    name: 'Product Management',
                    category: 'soft',
                    demandScore: 82,
                    growthRate: 28,
                    salaryImpact: 18,
                    jobCount: 9200,
                    trend: 'rising',
                    position: { x: 0.3, y: 0.7 },
                    isWatched: false,
                    emergingStatus: 'established',
                    learningResources: ['Product School', 'Reforge', 'Mind the Product'],
                    timeToLearn: '6-12 months',
                    relatedSkills: ['Agile', 'User Research', 'Analytics']
                },
                {
                    id: 4,
                    name: 'Cybersecurity',
                    category: 'technical',
                    demandScore: 91,
                    growthRate: 38,
                    salaryImpact: 22,
                    jobCount: 6800,
                    trend: 'rising',
                    position: { x: 0.8, y: 0.6 },
                    isWatched: true,
                    emergingStatus: 'hot',
                    learningResources: ['Cybrary', 'SANS', 'CompTIA'],
                    timeToLearn: '6-18 months',
                    relatedSkills: ['Network Security', 'Penetration Testing', 'Compliance']
                },
                {
                    id: 5,
                    name: 'Blockchain',
                    category: 'technical',
                    demandScore: 65,
                    growthRate: -12,
                    salaryImpact: 15,
                    jobCount: 3200,
                    trend: 'falling',
                    position: { x: 0.4, y: 0.4 },
                    isWatched: false,
                    emergingStatus: 'declining',
                    learningResources: ['Ethereum.org', 'CryptoZombies', 'Blockchain Council'],
                    timeToLearn: '3-9 months',
                    relatedSkills: ['Solidity', 'Web3', 'Smart Contracts']
                },
                {
                    id: 6,
                    name: 'Data Visualization',
                    category: 'tools',
                    demandScore: 76,
                    growthRate: 15,
                    salaryImpact: 12,
                    jobCount: 5400,
                    trend: 'stable',
                    position: { x: 0.5, y: 0.5 },
                    isWatched: false,
                    emergingStatus: 'established',
                    learningResources: ['Tableau', 'D3.js', 'Power BI'],
                    timeToLearn: '2-4 months',
                    relatedSkills: ['Tableau', 'D3.js', 'Power BI']
                }
            ];

            const quadrants = [
                { id: 'technical', name: 'Technical Skills', color: 'blue', skills: skills.filter(s => s.category === 'technical') },
                { id: 'soft', name: 'Soft Skills', color: 'green', skills: skills.filter(s => s.category === 'soft') },
                { id: 'tools', name: 'Tools & Platforms', color: 'orange', skills: skills.filter(s => s.category === 'tools') },
                { id: 'industry', name: 'Industry Knowledge', color: 'purple', skills: skills.filter(s => s.category === 'industry') }
            ];

            const getDemandColor = (score) => {
                if (score >= 90) return 'text-red-400 bg-red-500/20';
                if (score >= 80) return 'text-orange-400 bg-orange-500/20';
                if (score >= 70) return 'text-yellow-400 bg-yellow-500/20';
                if (score >= 60) return 'text-blue-400 bg-blue-500/20';
                return 'text-gray-400 bg-gray-500/20';
            };

            const getGrowthColor = (rate) => {
                if (rate > 0) return 'text-green-400';
                if (rate < 0) return 'text-red-400';
                return 'text-gray-400';
            };

            const getEmergingColor = (status) => {
                switch (status) {
                    case 'hot':
                        return 'text-red-400 bg-red-500/20';
                    case 'emerging':
                        return 'text-orange-400 bg-orange-500/20';
                    case 'established':
                        return 'text-blue-400 bg-blue-500/20';
                    case 'declining':
                        return 'text-gray-400 bg-gray-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getTrendIcon = (trend) => {
                switch (trend) {
                    case 'rising':
                        return '📈';
                    case 'falling':
                        return '📉';
                    case 'stable':
                        return '➡️';
                    default:
                        return '➡️';
                }
            };

            const getCategoryColor = (category) => {
                switch (category) {
                    case 'technical':
                        return 'text-blue-400 bg-blue-500/20';
                    case 'soft':
                        return 'text-green-400 bg-green-500/20';
                    case 'tools':
                        return 'text-orange-400 bg-orange-500/20';
                    case 'industry':
                        return 'text-purple-400 bg-purple-500/20';
                    default:
                        return 'text-gray-400 bg-gray-500/20';
                }
            };

            const handleMarketScan = () => {
                setIsScanning(true);
                setTimeout(() => {
                    setIsScanning(false);
                    setLastScanTime(new Date().toLocaleString());
                }, 3000);
            };

            const handleSkillClick = (skill) => {
                setSelectedSkill(skill);
                setShowSkillDetail(true);
            };

            const handleWatchlistToggle = (skillId) => {
                // Toggle watchlist functionality
                console.log('Toggle watchlist for skill:', skillId);
            };

            const tabs = [
                { id: 'radar', label: 'Skill Radar', icon: '📡' },
                { id: 'list', label: 'Trending Skills', icon: '📈' },
                { id: 'watchlist', label: 'My Watchlist', icon: '⭐', count: skills.filter(s => s.isWatched).length },
                { id: 'insights', label: 'AI Insights', icon: '💡' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex items-center justify-between">
                            <div className="flex space-x-1 overflow-x-auto">
                                {tabs.map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveView(tab.id)}
                                        className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                            activeView === tab.id
                                                ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                                : isLightMode 
                                                    ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                    : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                        }`}
                                    >
                                        <div className="w-4 h-4">{tab.icon}</div>
                                        {tab.label}
                                        {tab.count !== undefined && (
                                            <span className="bg-indigo-500 text-white text-xs px-2 py-1 rounded-full">
                                                {tab.count}
                                            </span>
                                        )}
                                    </button>
                                ))}
                            </div>
                            <div className="flex items-center gap-2 ml-4">
                                <button
                                    onClick={() => setShowSettings(true)}
                                    className={`p-2 ${isLightMode ? 'bg-gray-200 hover:bg-gray-300 text-gray-700' : 'bg-gray-700 hover:bg-gray-600 text-white'} rounded-lg transition-all duration-300`}
                                >
                                    <div className="w-4 h-4">⚙️</div>
                                </button>
                                <button
                                    onClick={handleMarketScan}
                                    disabled={isScanning}
                                    className="bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all duration-300 disabled:opacity-50"
                                >
                                    {isScanning ? (
                                        <>
                                            <div className="w-4 h-4 animate-spin">🔄</div>
                                            Scanning...
                                        </>
                                    ) : (
                                        <>
                                            <div className="w-4 h-4">🔍</div>
                                            Scan Market
                                        </>
                                    )}
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeView === 'radar' && (
                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-3 space-y-6">
                                {/* Live Skill Radar */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Live Skill Radar</h2>
                                        <div className="flex items-center gap-3">
                                            <select
                                                value={timeframe}
                                                onChange={(e) => setTimeframe(e.target.value)}
                                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="7d">Last 7 days</option>
                                                <option value="30d">Last 30 days</option>
                                                <option value="90d">Last 90 days</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div className={`relative w-full h-96 ${isLightMode ? 'bg-gray-100' : 'bg-gray-900'} rounded-xl overflow-hidden`}>
                                        <svg className="w-full h-full" viewBox="0 0 400 400">
                                            {/* Grid circles */}
                                            <circle cx="200" cy="200" r="50" fill="none" stroke="gray" strokeWidth="1" opacity="0.3"/>
                                            <circle cx="200" cy="200" r="100" fill="none" stroke="gray" strokeWidth="1" opacity="0.3"/>
                                            <circle cx="200" cy="200" r="150" fill="none" stroke="gray" strokeWidth="1" opacity="0.3"/>
                                            
                                            {/* Cross lines */}
                                            <line x1="200" y1="50" x2="200" y2="350" stroke="gray" strokeWidth="1" opacity="0.3"/>
                                            <line x1="50" y1="200" x2="350" y2="200" stroke="gray" strokeWidth="1" opacity="0.3"/>
                                            
                                            {/* Quadrant labels */}
                                            <text x="200" y="30" textAnchor="middle" className={`text-sm font-medium ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Technical Skills</text>
                                            <text x="370" y="200" textAnchor="middle" className={`text-sm font-medium ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Tools & Platforms</text>
                                            <text x="200" y="380" textAnchor="middle" className={`text-sm font-medium ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Industry Knowledge</text>
                                            <text x="30" y="200" textAnchor="middle" className={`text-sm font-medium ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Soft Skills</text>
                                            
                                            {/* Skill dots */}
                                            {skills.map((skill) => {
                                                const x = 200 + (skill.position.x - 0.5) * 300;
                                                const y = 200 + (skill.position.y - 0.5) * 300;
                                                const dotColor = skill.emergingStatus === 'hot' ? 'red' : 
                                                               skill.emergingStatus === 'emerging' ? 'orange' : 
                                                               skill.emergingStatus === 'established' ? 'blue' : 'gray';
                                                
                                                return (
                                                    <g key={skill.id}>
                                                        {skill.isWatched && (
                                                            <circle cx={x} cy={y} r="12" fill="none" stroke="yellow" strokeWidth="2" opacity="0.8"/>
                                                        )}
                                                        <circle
                                                            cx={x}
                                                            cy={y}
                                                            r="8"
                                                            fill={dotColor}
                                                            className="cursor-pointer hover:scale-125 transition-transform duration-200"
                                                            onClick={() => handleSkillClick(skill)}
                                                        />
                                                        <text x={x} y={y + 3} textAnchor="middle" className="text-xs fill-white font-medium">
                                                            {skill.name.substring(0, 3)}
                                                        </text>
                                                    </g>
                                                );
                                            })}
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Filters */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Filters</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Category</label>
                                            <select
                                                value={selectedCategory}
                                                onChange={(e) => setSelectedCategory(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Categories</option>
                                                <option value="technical">Technical Skills</option>
                                                <option value="soft">Soft Skills</option>
                                                <option value="tools">Tools & Platforms</option>
                                                <option value="industry">Industry Knowledge</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Search</label>
                                            <input
                                                type="text"
                                                value={searchQuery}
                                                onChange={(e) => setSearchQuery(e.target.value)}
                                                placeholder="Search skills..."
                                                className="w-full px-3 py-2 bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* Hot Skills This Week */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Hot Skills This Week</h3>
                                    <div className="space-y-3">
                                        {skills.filter(skill => skill.emergingStatus === 'hot').map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                                <div className="flex items-center justify-between mb-2">
                                                    <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h4>
                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDemandColor(skill.demandScore)}`}>
                                                        {skill.demandScore}
                                                    </span>
                                                </div>
                                                <div className={`flex items-center gap-2 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                    <span>{skill.growthRate}% growth</span>
                                                    <span>•</span>
                                                    <span>{skill.jobCount.toLocaleString()} jobs</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Market Intelligence */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Market Intelligence</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>Skills Tracked</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skills.length}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>Hot Skills</span>
                                            <span className="text-sm font-medium text-red-400">
                                                {skills.filter(s => s.emergingStatus === 'hot').length}
                                            </span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>Rising Trends</span>
                                            <span className="text-sm font-medium text-green-400">
                                                {skills.filter(s => s.trend === 'rising').length}
                                            </span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>Avg. Demand</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>
                                                {Math.round(skills.reduce((acc, skill) => acc + skill.demandScore, 0) / skills.length)}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeView === 'list' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Trending Skills</h2>
                                        <div className="flex items-center gap-3">
                                            <input
                                                type="text"
                                                value={searchQuery}
                                                onChange={(e) => setSearchQuery(e.target.value)}
                                                placeholder="Search skills..."
                                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            />
                                            <select
                                                value={selectedCategory}
                                                onChange={(e) => setSelectedCategory(e.target.value)}
                                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Categories</option>
                                                <option value="technical">Technical</option>
                                                <option value="soft">Soft Skills</option>
                                                <option value="tools">Tools</option>
                                                <option value="industry">Industry</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {skills.map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex items-start gap-4">
                                                        <div className="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                                            <div className="w-6 h-6 text-white text-xl">💻</div>
                                                        </div>
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-3 mb-2">
                                                                <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(skill.category)}`}>
                                                                    {skill.category}
                                                                </span>
                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getEmergingColor(skill.emergingStatus)}`}>
                                                                    {skill.emergingStatus}
                                                                </span>
                                                            </div>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                                <span>Demand: {skill.demandScore}</span>
                                                                <span>•</span>
                                                                <span className={`flex items-center gap-1 ${getGrowthColor(skill.growthRate)}`}>
                                                                    {getTrendIcon(skill.trend)} {skill.growthRate}%
                                                                </span>
                                                                <span>•</span>
                                                                <span>{skill.jobCount.toLocaleString()} jobs</span>
                                                            </div>
                                                            <div className="flex flex-wrap gap-2 mb-4">
                                                                {skill.relatedSkills.map((relatedSkill) => (
                                                                    <span key={relatedSkill} className={`px-2 py-1 ${isLightMode ? 'bg-indigo-100 text-indigo-600' : 'bg-indigo-500/20 text-indigo-400'} text-xs rounded-full`}>
                                                                        {relatedSkill}
                                                                    </span>
                                                                ))}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <button
                                                            onClick={() => handleWatchlistToggle(skill.id)}
                                                            className={`p-2 rounded-lg transition-colors duration-200 ${
                                                                skill.isWatched 
                                                                    ? 'bg-yellow-500 text-white' 
                                                                    : 'bg-gray-700 text-gray-400 hover:bg-gray-600'
                                                            }`}
                                                        >
                                                            <div className="w-4 h-4">⭐</div>
                                                        </button>
                                                        <button
                                                            onClick={() => handleSkillClick(skill)}
                                                            className="p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"
                                                        >
                                                            <div className="w-4 h-4">👁️</div>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <div className="grid grid-cols-4 gap-4">
                                                    <div className="text-center">
                                                        <div className="text-2xl font-bold text-indigo-400">{skill.demandScore}</div>
                                                        <div className="text-xs text-gray-400">Demand Score</div>
                                                    </div>
                                                    <div className="text-center">
                                                        <div className={`text-2xl font-bold ${getGrowthColor(skill.growthRate)}`}>
                                                            {skill.growthRate}%
                                                        </div>
                                                        <div className="text-xs text-gray-400">Growth Rate</div>
                                                    </div>
                                                    <div className="text-center">
                                                        <div className="text-2xl font-bold text-green-400">+{skill.salaryImpact}%</div>
                                                        <div className="text-xs text-gray-400">Salary Impact</div>
                                                    </div>
                                                    <div className="text-center">
                                                        <div className="text-2xl font-bold text-purple-400">{skill.jobCount.toLocaleString()}</div>
                                                        <div className="text-xs text-gray-400">Job Openings</div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Category Breakdown */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Category Breakdown</h3>
                                    <div className="space-y-3">
                                        {quadrants.map((quadrant) => (
                                            <div key={quadrant.id} className="flex items-center justify-between">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{quadrant.name}</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{quadrant.skills.length}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-700 transition-all duration-300">
                                            Add to Watchlist
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Start Learning
                                        </button>
                                        <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                            Find Jobs
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeView === 'watchlist' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>My Skill Watchlist</h2>
                                    
                                    {skills.filter(skill => skill.isWatched).length === 0 ? (
                                        <div className="text-center py-20">
                                            <div className={`w-16 h-16 ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full flex items-center justify-center mx-auto mb-4`}>
                                                <div className={`w-8 h-8 ${isLightMode ? 'text-gray-500' : 'text-gray-400'} text-2xl`}>⭐</div>
                                            </div>
                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>No Skills in Watchlist</h3>
                                            <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Start watching skills to track their market trends and opportunities</p>
                                            <button className="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-700 transition-all duration-300">
                                                Browse Skills
                                            </button>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            {skills.filter(skill => skill.isWatched).map((skill) => (
                                                <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-yellow-500/30' : 'bg-gray-800 border-yellow-500/30'} border rounded-lg p-6`}>
                                                    <div className="flex items-start justify-between mb-4">
                                                        <div className="flex items-start gap-4">
                                                            <div className="w-12 h-12 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center">
                                                                <div className="w-6 h-6 text-white text-xl">⭐</div>
                                                            </div>
                                                            <div className="flex-1">
                                                                <div className="flex items-center gap-3 mb-2">
                                                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(skill.category)}`}>
                                                                        {skill.category}
                                                                    </span>
                                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getEmergingColor(skill.emergingStatus)}`}>
                                                                        {skill.emergingStatus}
                                                                    </span>
                                                                </div>
                                                                <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                                    <span>Demand: {skill.demandScore}</span>
                                                                    <span>•</span>
                                                                    <span className={`flex items-center gap-1 ${getGrowthColor(skill.growthRate)}`}>
                                                                        {getTrendIcon(skill.trend)} {skill.growthRate}%
                                                                    </span>
                                                                    <span>•</span>
                                                                    <span>{skill.jobCount.toLocaleString()} jobs</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button
                                                            onClick={() => handleWatchlistToggle(skill.id)}
                                                            className="p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200"
                                                        >
                                                            <div className="w-4 h-4">❌</div>
                                                        </button>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-4 gap-4">
                                                        <div className="text-center">
                                                            <div className="text-2xl font-bold text-indigo-400">{skill.demandScore}</div>
                                                            <div className="text-xs text-gray-400">Demand Score</div>
                                                        </div>
                                                        <div className="text-center">
                                                            <div className={`text-2xl font-bold ${getGrowthColor(skill.growthRate)}`}>
                                                                {skill.growthRate}%
                                                            </div>
                                                            <div className="text-xs text-gray-400">Growth Rate</div>
                                                        </div>
                                                        <div className="text-center">
                                                            <div className="text-2xl font-bold text-green-400">+{skill.salaryImpact}%</div>
                                                            <div className="text-xs text-gray-400">Salary Impact</div>
                                                        </div>
                                                        <div className="text-center">
                                                            <div className="text-2xl font-bold text-purple-400">{skill.jobCount.toLocaleString()}</div>
                                                            <div className="text-xs text-gray-400">Job Openings</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Watchlist Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Watchlist Insights</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Watched</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skills.filter(s => s.isWatched).length}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Hot Skills</span>
                                            <span className="text-sm font-medium text-red-400">
                                                {skills.filter(s => s.isWatched && s.emergingStatus === 'hot').length}
                                            </span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Rising Trends</span>
                                            <span className="text-sm font-medium text-green-400">
                                                {skills.filter(s => s.isWatched && s.trend === 'rising').length}
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                {/* Recommended Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recommended Actions</h3>
                                    <div className="space-y-3">
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-3">
                                            <h4 className="font-medium text-green-400 mb-1">Start Learning</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>AI/ML is trending up - perfect time to start</p>
                                        </div>
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-3">
                                            <h4 className="font-medium text-blue-400 mb-1">Job Search</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Cybersecurity has high demand</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeView === 'insights' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Personalized AI Insights</h2>
                                    
                                    {/* Top Recommendation */}
                                    <div className="bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-6 mb-6">
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                                                <div className="w-5 h-5 text-white text-xl">💡</div>
                                            </div>
                                            <h3 className="text-xl font-semibold text-white">Top Recommendation</h3>
                                        </div>
                                        <h4 className="text-lg font-semibold text-white mb-2">Focus on AI/ML Skills</h4>
                                        <p className="text-green-100 mb-4">Based on your profile as a Software Engineer, AI/ML skills show the highest growth potential with 45% growth rate and 12,500+ job openings.</p>
                                        <div className="grid grid-cols-3 gap-4">
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-white">95</div>
                                                <div className="text-sm text-green-100">Demand Score</div>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-white">45%</div>
                                                <div className="text-sm text-green-100">Growth Rate</div>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-white">25%</div>
                                                <div className="text-sm text-green-100">Salary Impact</div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Market Intelligence Grid */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="bg-red-500/20 border border-red-500/50 rounded-lg p-4">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-4 h-4 text-red-400">🔥</div>
                                                <h4 className="font-medium text-red-400">Hot Alert</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Cybersecurity demand spiked 38% this week</p>
                                        </div>
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-4">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-4 h-4 text-blue-400">📈</div>
                                                <h4 className="font-medium text-blue-400">Trend Alert</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Kubernetes skills growing 32% monthly</p>
                                        </div>
                                        <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-4 h-4 text-yellow-400">⚠️</div>
                                                <h4 className="font-medium text-yellow-400">Warning</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Blockchain demand declining -12%</p>
                                        </div>
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-4">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-4 h-4 text-green-400">💼</div>
                                                <h4 className="font-medium text-green-400">Opportunity</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Product Management roles up 28%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Your Profile */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Your Profile</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Role</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{personalization.role}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Industry</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{personalization.industry}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Location</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{personalization.location}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Experience</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{personalization.experienceLevel}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Career Goal</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{personalization.careerGoals}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Notifications */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Notifications</h3>
                                    <div className="space-y-3">
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-3">
                                            <h4 className="font-medium text-blue-400 mb-1">Skill Alert</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>AI/ML demand increased 5%</p>
                                        </div>
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-3">
                                            <h4 className="font-medium text-green-400 mb-1">Market Update</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>New jobs posted for your skills</p>
                                        </div>
                                        <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-3">
                                            <h4 className="font-medium text-yellow-400 mb-1">Learning Tip</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Consider Kubernetes certification</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Skill Detail Modal */}
                    {showSkillDetail && selectedSkill && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">{selectedSkill.name}</h2>
                                    <button
                                        onClick={() => setShowSkillDetail(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    {/* Market Data */}
                                    <div className="space-y-6">
                                        <h3 className="text-lg font-semibold text-gray-50 mb-4">Market Data</h3>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-gray-800 rounded-lg p-4 text-center">
                                                <div className="text-3xl font-bold text-indigo-400 mb-1">{selectedSkill.demandScore}</div>
                                                <div className="text-sm text-gray-400">Demand Score</div>
                                            </div>
                                            <div className="bg-gray-800 rounded-lg p-4 text-center">
                                                <div className={`text-3xl font-bold ${getGrowthColor(selectedSkill.growthRate)}`}>
                                                    {selectedSkill.growthRate}%
                                                </div>
                                                <div className="text-sm text-gray-400">Growth Rate</div>
                                            </div>
                                            <div className="bg-gray-800 rounded-lg p-4 text-center">
                                                <div className="text-3xl font-bold text-green-400">+{selectedSkill.salaryImpact}%</div>
                                                <div className="text-sm text-gray-400">Salary Impact</div>
                                            </div>
                                            <div className="bg-gray-800 rounded-lg p-4 text-center">
                                                <div className="text-3xl font-bold text-purple-400">{selectedSkill.jobCount.toLocaleString()}</div>
                                                <div className="text-sm text-gray-400">Job Openings</div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Learning Information */}
                                    <div className="space-y-6">
                                        <h3 className="text-lg font-semibold text-gray-50 mb-4">Learning Information</h3>
                                        <div className="space-y-4">
                                            <div>
                                                <h4 className="font-medium text-gray-50 mb-2">Time to Learn</h4>
                                                <p className="text-gray-300">{selectedSkill.timeToLearn}</p>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50 mb-2">Learning Resources</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {selectedSkill.learningResources.map((resource) => (
                                                        <span key={resource} className="px-2 py-1 bg-indigo-500/20 text-indigo-400 text-xs rounded-full">
                                                            {resource}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <h4 className="font-medium text-gray-50 mb-2">Related Skills</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {selectedSkill.relatedSkills.map((skill) => (
                                                        <span key={skill} className="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full">
                                                            {skill}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex items-center gap-4 mt-8">
                                    <button
                                        onClick={() => handleWatchlistToggle(selectedSkill.id)}
                                        className={`px-6 py-3 rounded-lg font-medium transition-colors duration-200 ${
                                            selectedSkill.isWatched 
                                                ? 'bg-yellow-600 text-white hover:bg-yellow-700' 
                                                : 'bg-indigo-600 text-white hover:bg-indigo-700'
                                        }`}
                                    >
                                        {selectedSkill.isWatched ? 'Remove from Watchlist' : 'Add to Watchlist'}
                                    </button>
                                    <button className="px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                        Start Learning
                                    </button>
                                    <button className="px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                        Find Jobs
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Settings Modal */}
                    {showSettings && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-2xl w-full">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">Settings</h2>
                                    <button
                                        onClick={() => setShowSettings(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <h3 className="text-lg font-semibold text-gray-50 mb-4">Profile Information</h3>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-300 mb-2">Role</label>
                                                <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                                    <option>Software Engineer</option>
                                                    <option>Data Scientist</option>
                                                    <option>Product Manager</option>
                                                    <option>DevOps Engineer</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-300 mb-2">Industry</label>
                                                <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                                    <option>Technology</option>
                                                    <option>Finance</option>
                                                    <option>Healthcare</option>
                                                    <option>E-commerce</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-300 mb-2">Experience Level</label>
                                                <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                                    <option>Entry-level</option>
                                                    <option>Mid-level</option>
                                                    <option>Senior</option>
                                                    <option>Lead</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-300 mb-2">Location</label>
                                                <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                                    <option>San Francisco, CA</option>
                                                    <option>New York, NY</option>
                                                    <option>Seattle, WA</option>
                                                    <option>Remote</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <h3 className="text-lg font-semibold text-gray-50 mb-4">Notification Preferences</h3>
                                        <div className="space-y-3">
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-gray-300">Skill alerts</span>
                                                <input type="checkbox" className="w-4 h-4 text-indigo-600 bg-gray-800 border-gray-700 rounded focus:ring-indigo-500" defaultChecked />
                                            </div>
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-gray-300">Market updates</span>
                                                <input type="checkbox" className="w-4 h-4 text-indigo-600 bg-gray-800 border-gray-700 rounded focus:ring-indigo-500" defaultChecked />
                                            </div>
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-gray-300">Learning recommendations</span>
                                                <input type="checkbox" className="w-4 h-4 text-indigo-600 bg-gray-800 border-gray-700 rounded focus:ring-indigo-500" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex items-center gap-4 mt-8">
                                    <button className="px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors duration-200">
                                        Save Settings
                                    </button>
                                    <button
                                        onClick={() => setShowSettings(false)}
                                        className="px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Skill Radar when skill-radar-content is shown
        window.renderSkillRadar = function() {
            console.log('renderSkillRadar called');
            const container = document.getElementById('skill-radar-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Skill Radar...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<SkillRadar />);
                    console.log('Skill Radar rendered successfully');
                } catch (error) {
                    console.error('Error rendering Skill Radar:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Skill Radar</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('skill-radar-container not found');
            }
        };

        // Learning Path React Component
        const LearningPath = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [showOnboarding, setShowOnboarding] = useState(false);
            const [onboardingStep, setOnboardingStep] = useState(1);
            const [selectedPath, setSelectedPath] = useState(null);
            const [showPathDetails, setShowPathDetails] = useState(false);
            const [expandedWeek, setExpandedWeek] = useState(null);
            const [learningGoals, setLearningGoals] = useState([]);
            const [experienceLevel, setExperienceLevel] = useState('');
            const [timeCommitment, setTimeCommitment] = useState(5);
            const [learningStyle, setLearningStyle] = useState([]);
            const [targetRole, setTargetRole] = useState('');

            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const learningPaths = [
                {
                    id: 1,
                    title: 'Full-Stack React Development',
                    description: 'Master modern React development with hooks, context, and full-stack integration',
                    duration: 90,
                    difficulty: 'intermediate',
                    skills: ['React', 'Node.js', 'MongoDB', 'TypeScript'],
                    progress: 65,
                    status: 'in-progress',
                    estimatedHours: 120,
                    projects: 8,
                    createdAt: '2024-01-15',
                    nextActivity: 'Build a Todo App with React Hooks',
                    streak: 12
                },
                {
                    id: 2,
                    title: 'Modern Frontend with TypeScript',
                    description: 'Advanced frontend development using TypeScript, modern build tools, and best practices',
                    duration: 60,
                    difficulty: 'advanced',
                    skills: ['TypeScript', 'Vite', 'Tailwind CSS', 'Testing'],
                    progress: 0,
                    status: 'not-started',
                    estimatedHours: 80,
                    projects: 5,
                    createdAt: '2024-02-01',
                    nextActivity: 'Setup TypeScript Project',
                    streak: 0
                },
                {
                    id: 3,
                    title: 'DevOps & Cloud Deployment',
                    description: 'Learn containerization, CI/CD, and cloud deployment strategies',
                    duration: 75,
                    difficulty: 'intermediate',
                    skills: ['Docker', 'Kubernetes', 'AWS', 'CI/CD'],
                    progress: 100,
                    status: 'completed',
                    estimatedHours: 100,
                    projects: 6,
                    createdAt: '2023-11-20',
                    nextActivity: 'Certificate Available',
                    streak: 0
                }
            ];

            const weeklySprints = [
                {
                    week: 1,
                    title: 'React Fundamentals',
                    objectives: [
                        'Understand React components and JSX',
                        'Learn state management with useState',
                        'Practice event handling'
                    ],
                    activities: [
                        { id: 1, title: 'Introduction to React', type: 'video', duration: 45, completed: true },
                        { id: 2, title: 'JSX and Components', type: 'reading', duration: 30, completed: true },
                        { id: 3, title: 'State and Props', type: 'practice', duration: 60, completed: false }
                    ],
                    project: {
                        title: 'Hello World Component',
                        estimatedTime: '2 hours',
                        completed: true
                    },
                    completed: true
                },
                {
                    week: 2,
                    title: 'Hooks and State Management',
                    objectives: [
                        'Master React Hooks (useState, useEffect)',
                        'Learn custom hooks',
                        'Understand state lifting'
                    ],
                    activities: [
                        { id: 4, title: 'useState Hook Deep Dive', type: 'video', duration: 50, completed: true },
                        { id: 5, title: 'useEffect Hook', type: 'reading', duration: 40, completed: true },
                        { id: 6, title: 'Custom Hooks', type: 'practice', duration: 90, completed: false }
                    ],
                    project: {
                        title: 'Counter App with Hooks',
                        estimatedTime: '3 hours',
                        completed: false
                    },
                    completed: false
                }
            ];

            const availableSkills = ['React', 'TypeScript', 'Node.js', 'Python', 'JavaScript', 'CSS', 'HTML', 'MongoDB', 'PostgreSQL', 'Docker', 'AWS', 'Git'];
            const learningStyles = ['Visual', 'Auditory', 'Kinesthetic', 'Reading/Writing', 'Interactive', 'Self-paced'];
            const targetRoles = ['Frontend Developer', 'Backend Developer', 'Full-Stack Developer', 'DevOps Engineer', 'Data Scientist', 'Product Manager'];

            const getDifficultyColor = (difficulty) => {
                switch (difficulty) {
                    case 'beginner': return 'text-green-400 bg-green-500/20';
                    case 'intermediate': return 'text-yellow-400 bg-yellow-500/20';
                    case 'advanced': return 'text-red-400 bg-red-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getStatusColor = (status) => {
                switch (status) {
                    case 'completed': return 'text-green-400 bg-green-500/20';
                    case 'in-progress': return 'text-blue-400 bg-blue-500/20';
                    case 'paused': return 'text-yellow-400 bg-yellow-500/20';
                    case 'not-started': return 'text-gray-400 bg-gray-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getActivityIcon = (type) => {
                switch (type) {
                    case 'reading': return '📖';
                    case 'video': return '🎥';
                    case 'project': return '💻';
                    case 'quiz': return '❓';
                    case 'practice': return '⚡';
                    default: return '📝';
                }
            };

            const handleOnboardingNext = () => {
                if (onboardingStep < 5) {
                    setOnboardingStep(onboardingStep + 1);
                } else {
                    setShowOnboarding(false);
                    // Generate learning path logic here
                }
            };

            const handleOnboardingBack = () => {
                if (onboardingStep > 1) {
                    setOnboardingStep(onboardingStep - 1);
                }
            };

            const handlePathClick = (path) => {
                setSelectedPath(path);
                setShowPathDetails(true);
            };

            const handleWeekToggle = (week) => {
                setExpandedWeek(expandedWeek === week ? null : week);
            };

            const tabs = [
                { id: 'dashboard', label: 'Dashboard', icon: '📊' },
                { id: 'paths', label: 'My Learning Paths', icon: '📚' },
                { id: 'create', label: 'Discover Paths', icon: '🔍' },
                { id: 'community', label: 'Community', icon: '👥' },
                { id: 'analytics', label: 'Analytics', icon: '📈' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex items-center justify-between">
                            <div className="flex space-x-1 overflow-x-auto">
                                {tabs.map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                            activeTab === tab.id
                                                ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                                : isLightMode 
                                                    ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                    : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                        }`}
                                    >
                                        <div className="w-4 h-4">{tab.icon}</div>
                                        {tab.label}
                                    </button>
                                ))}
                            </div>
                            <button
                                onClick={() => setShowOnboarding(true)}
                                className="bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all duration-300 ml-4"
                            >
                                <div className="w-4 h-4">➕</div>
                                Create Learning Path
                            </button>
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'dashboard' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Current Learning Path */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Current Learning Path</h2>
                                    {learningPaths.find(p => p.status === 'in-progress') ? (
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="flex-1">
                                                    <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>
                                                        {learningPaths.find(p => p.status === 'in-progress').title}
                                                    </h3>
                                                    <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>
                                                        {learningPaths.find(p => p.status === 'in-progress').description}
                                                    </p>
                                                    <div className="flex items-center gap-4 mb-4">
                                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${getDifficultyColor(learningPaths.find(p => p.status === 'in-progress').difficulty)}`}>
                                                            {learningPaths.find(p => p.status === 'in-progress').difficulty}
                                                        </span>
                                                        <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            {learningPaths.find(p => p.status === 'in-progress').progress}% Complete
                                                        </span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-4`}>
                                                        <div 
                                                            className="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300"
                                                            style={{ width: `${learningPaths.find(p => p.status === 'in-progress').progress}%` }}
                                                        ></div>
                                                    </div>
                                                    <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                        Next: {learningPaths.find(p => p.status === 'in-progress').nextActivity}
                                                    </p>
                                                </div>
                                            </div>
                                            <div className="flex items-center gap-4">
                                                <button className="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                    Continue Learning
                                                </button>
                                                <button 
                                                    onClick={() => handlePathClick(learningPaths.find(p => p.status === 'in-progress'))}
                                                    className="bg-gray-700 text-gray-300 px-6 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                >
                                                    View Details
                                                </button>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center py-12">
                                            <div className={`w-16 h-16 ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full flex items-center justify-center mx-auto mb-4`}>
                                                <div className={`w-8 h-8 ${isLightMode ? 'text-gray-500' : 'text-gray-400'} text-2xl`}>📚</div>
                                            </div>
                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>No Active Learning Path</h3>
                                            <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Start a new learning journey to begin your skill development</p>
                                            <button 
                                                onClick={() => setShowOnboarding(true)}
                                                className="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300"
                                            >
                                                Create Learning Path
                                            </button>
                                        </div>
                                    )}
                                </div>

                                {/* Today's Learning Activities */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Today's Learning Activities</h2>
                                    <div className="space-y-4">
                                        {weeklySprints[1].activities.map((activity) => (
                                            <div key={activity.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <div className="flex items-center justify-between">
                                                    <div className="flex items-center gap-3">
                                                        <div className="w-8 h-8 bg-indigo-500/20 rounded-lg flex items-center justify-center">
                                                            <div className="w-4 h-4">{getActivityIcon(activity.type)}</div>
                                                        </div>
                                                        <div>
                                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{activity.title}</h4>
                                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{activity.duration} minutes • {activity.type}</p>
                                                        </div>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        {activity.completed ? (
                                                            <div className="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                                                <div className="w-3 h-3 text-white">✓</div>
                                                            </div>
                                                        ) : (
                                                            <button className="w-6 h-6 border-2 border-gray-600 rounded-full hover:border-indigo-500 transition-colors duration-200"></button>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Learning Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Learning Stats</h3>
                                    <div className="space-y-4">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Current Streak</span>
                                            <span className="text-sm font-medium text-orange-400">12 days</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Weekly Goal</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8/10 hours</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Hours</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>156 hours</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8 completed</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12 mastered</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                            Continue Session
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Review Projects
                                        </button>
                                        <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                            Join Study Group
                                        </button>
                                        <button className="w-full bg-yellow-600 text-white py-2 rounded-lg font-medium hover:bg-yellow-700 transition-colors duration-200">
                                            Ask AI Tutor
                                        </button>
                                    </div>
                                </div>

                                {/* Recent Achievements */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recent Achievements</h3>
                                    <div className="space-y-3">
                                        <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-3">
                                            <div className="flex items-center gap-2 mb-1">
                                                <div className="w-4 h-4 text-green-400">🏆</div>
                                                <h4 className="font-medium text-green-400">Week 1 Complete</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Finished React Fundamentals</p>
                                        </div>
                                        <div className="bg-blue-500/20 border border-blue-500/50 rounded-lg p-3">
                                            <div className="flex items-center gap-2 mb-1">
                                                <div className="w-4 h-4 text-blue-400">⚡</div>
                                                <h4 className="font-medium text-blue-400">Streak Milestone</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>10 days in a row!</p>
                                        </div>
                                        <div className="bg-purple-500/20 border border-purple-500/50 rounded-lg p-3">
                                            <div className="flex items-center gap-2 mb-1">
                                                <div className="w-4 h-4 text-purple-400">💻</div>
                                                <h4 className="font-medium text-purple-400">Project Complete</h4>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Todo App with Hooks</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'paths' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>My Learning Paths</h2>
                                    <div className="space-y-4">
                                        {learningPaths.map((path) => (
                                            <div key={path.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{path.title}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(path.status)}`}>
                                                                {path.status.replace('-', ' ')}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(path.difficulty)}`}>
                                                                {path.difficulty}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{path.description}</p>
                                                        <div className="flex flex-wrap gap-2 mb-3">
                                                            {path.skills.map((skill) => (
                                                                <span key={skill} className={`px-2 py-1 ${isLightMode ? 'bg-indigo-100 text-indigo-600' : 'bg-indigo-500/20 text-indigo-400'} text-xs rounded-full`}>
                                                                    {skill}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>{path.duration} days</span>
                                                            <span>•</span>
                                                            <span>{path.estimatedHours} hours</span>
                                                            <span>•</span>
                                                            <span>{path.projects} projects</span>
                                                            <span>•</span>
                                                            <span>{path.streak} day streak</span>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-4`}>
                                                            <div 
                                                                className="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300"
                                                                style={{ width: `${path.progress}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-4">
                                                    {path.status === 'in-progress' && (
                                                        <button className="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-4 py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                            Continue
                                                        </button>
                                                    )}
                                                    {path.status === 'not-started' && (
                                                        <button className="bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                                            Start Path
                                                        </button>
                                                    )}
                                                    {path.status === 'completed' && (
                                                        <button className="bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-yellow-700 transition-colors duration-200">
                                                            View Certificate
                                                        </button>
                                                    )}
                                                    <button 
                                                        onClick={() => handlePathClick(path)}
                                                        className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                    >
                                                        View Details
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Overall Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Overall Progress</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Paths Started</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{learningPaths.filter(p => p.status !== 'not-started').length}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Paths Completed</span>
                                            <span className="text-sm font-medium text-green-400">{learningPaths.filter(p => p.status === 'completed').length}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Hours</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>156</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Learned</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Recommended Paths */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recommended Paths</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Advanced React Patterns</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Master advanced React concepts</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Full-Stack TypeScript</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>End-to-end TypeScript development</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Community Activity */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Community Activity</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                                <div className="w-4 h-4 text-white">👤</div>
                                            </div>
                                            <div>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Sarah completed React Fundamentals</p>
                                                <p className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>2 hours ago</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                                <div className="w-4 h-4 text-white">👤</div>
                                            </div>
                                            <div>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Mike shared a project</p>
                                                <p className={`text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>4 hours ago</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'create' && (
                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-3 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Discover Learning Paths</h2>
                                        <div className="flex items-center gap-3">
                                            <input
                                                type="text"
                                                placeholder="Search paths..."
                                                className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            />
                                            <select className={`px-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>All Categories</option>
                                                <option>Frontend</option>
                                                <option>Backend</option>
                                                <option>Full-Stack</option>
                                                <option>DevOps</option>
                                                <option>Data Science</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {[
                                            {
                                                id: 1,
                                                title: 'Complete Web Development Bootcamp',
                                                description: 'Master HTML, CSS, JavaScript, React, Node.js, and MongoDB',
                                                duration: 120,
                                                difficulty: 'beginner',
                                                skills: ['HTML', 'CSS', 'JavaScript', 'React', 'Node.js'],
                                                students: 15420,
                                                rating: 4.8,
                                                projects: 12
                                            },
                                            {
                                                id: 2,
                                                title: 'Python for Data Science',
                                                description: 'Learn Python, Pandas, NumPy, Matplotlib, and Machine Learning',
                                                duration: 90,
                                                difficulty: 'intermediate',
                                                skills: ['Python', 'Pandas', 'NumPy', 'Matplotlib', 'Scikit-learn'],
                                                students: 8920,
                                                rating: 4.7,
                                                projects: 8
                                            },
                                            {
                                                id: 3,
                                                title: 'AWS Cloud Architecture',
                                                description: 'Master AWS services, cloud architecture, and deployment strategies',
                                                duration: 75,
                                                difficulty: 'advanced',
                                                skills: ['AWS', 'CloudFormation', 'Lambda', 'Docker', 'Kubernetes'],
                                                students: 5430,
                                                rating: 4.9,
                                                projects: 6
                                            },
                                            {
                                                id: 4,
                                                title: 'Mobile App Development',
                                                description: 'Build iOS and Android apps with React Native and Flutter',
                                                duration: 100,
                                                difficulty: 'intermediate',
                                                skills: ['React Native', 'Flutter', 'Swift', 'Kotlin', 'Firebase'],
                                                students: 6780,
                                                rating: 4.6,
                                                projects: 10
                                            },
                                            {
                                                id: 5,
                                                title: 'Machine Learning Engineer',
                                                description: 'Advanced ML algorithms, TensorFlow, PyTorch, and MLOps',
                                                duration: 150,
                                                difficulty: 'advanced',
                                                skills: ['TensorFlow', 'PyTorch', 'MLOps', 'Docker', 'Kubernetes'],
                                                students: 3210,
                                                rating: 4.8,
                                                projects: 15
                                            },
                                            {
                                                id: 6,
                                                title: 'Cybersecurity Fundamentals',
                                                description: 'Learn ethical hacking, network security, and penetration testing',
                                                duration: 80,
                                                difficulty: 'intermediate',
                                                skills: ['Ethical Hacking', 'Network Security', 'Penetration Testing', 'Linux', 'Cryptography'],
                                                students: 4560,
                                                rating: 4.7,
                                                projects: 7
                                            }
                                        ].map((path) => (
                                            <div key={path.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{path.title}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(path.difficulty)}`}>
                                                                {path.difficulty}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3 text-sm`}>{path.description}</p>
                                                        <div className="flex flex-wrap gap-1 mb-3">
                                                            {path.skills.slice(0, 3).map((skill) => (
                                                                <span key={skill} className="px-2 py-1 bg-indigo-500/20 text-indigo-400 text-xs rounded-full">
                                                                    {skill}
                                                                </span>
                                                            ))}
                                                            {path.skills.length > 3 && (
                                                                <span className="px-2 py-1 bg-gray-500/20 text-gray-400 text-xs rounded-full">
                                                                    +{path.skills.length - 3} more
                                                                </span>
                                                            )}
                                                        </div>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>{path.duration} days</span>
                                                            <span>•</span>
                                                            <span>{path.projects} projects</span>
                                                            <span>•</span>
                                                            <span>{path.students.toLocaleString()} students</span>
                                                        </div>
                                                        <div className="flex items-center gap-2 mb-4">
                                                            <div className="flex items-center gap-1">
                                                                <div className="w-4 h-4 text-yellow-400">⭐</div>
                                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>{path.rating}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                        Start Path
                                                    </button>
                                                    <button className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                        Preview
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Categories */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Categories</h3>
                                    <div className="space-y-2">
                                        {['Frontend Development', 'Backend Development', 'Full-Stack', 'DevOps', 'Data Science', 'Mobile Development', 'Cybersecurity', 'AI/ML'].map((category) => (
                                            <button key={category} className={`w-full text-left px-3 py-2 text-sm ${isLightMode ? 'text-gray-600 hover:bg-gray-100' : 'text-gray-300 hover:bg-gray-800'} rounded-lg transition-colors duration-200`}>
                                                {category}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Popular This Week */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Popular This Week</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>React 18 Masterclass</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>2,340 new students</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Python for AI</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>1,890 new students</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Solutions Architect</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>1,560 new students</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'community' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Active Study Groups */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Active Study Groups</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {[
                                            {
                                                id: 1,
                                                name: 'React Developers United',
                                                description: 'Advanced React patterns and best practices',
                                                members: 245,
                                                activeNow: 12,
                                                nextSession: 'Tomorrow 7:00 PM',
                                                topics: ['React Hooks', 'State Management', 'Performance']
                                            },
                                            {
                                                id: 2,
                                                name: 'Python Data Scientists',
                                                description: 'Machine learning and data analysis with Python',
                                                members: 189,
                                                activeNow: 8,
                                                nextSession: 'Friday 6:30 PM',
                                                topics: ['Pandas', 'NumPy', 'Scikit-learn']
                                            },
                                            {
                                                id: 3,
                                                name: 'DevOps Engineers',
                                                description: 'Cloud infrastructure and deployment strategies',
                                                members: 156,
                                                activeNow: 5,
                                                nextSession: 'Sunday 2:00 PM',
                                                topics: ['Docker', 'Kubernetes', 'AWS']
                                            },
                                            {
                                                id: 4,
                                                name: 'Frontend Masters',
                                                description: 'Modern frontend development and design systems',
                                                members: 312,
                                                activeNow: 18,
                                                nextSession: 'Wednesday 8:00 PM',
                                                topics: ['TypeScript', 'Design Systems', 'Accessibility']
                                            }
                                        ].map((group) => (
                                            <div key={group.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{group.name}</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{group.description}</p>
                                                        <div className="flex flex-wrap gap-2 mb-3">
                                                            {group.topics.map((topic) => (
                                                                <span key={topic} className="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full">
                                                                    {topic}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <span>{group.members} members</span>
                                                            <span>•</span>
                                                            <span className="text-green-400">{group.activeNow} online</span>
                                                            <span>•</span>
                                                            <span>Next: {group.nextSession}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                        Join Group
                                                    </button>
                                                    <button className={`${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} px-4 py-2 rounded-lg font-medium transition-colors duration-200`}>
                                                        View Details
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Community Projects */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Community Projects</h2>
                                    <div className="space-y-4">
                                        {[
                                            {
                                                id: 1,
                                                title: 'Open Source React Component Library',
                                                description: 'Building a comprehensive UI component library for React applications',
                                                contributors: 15,
                                                stars: 234,
                                                language: 'TypeScript',
                                                lastActivity: '2 hours ago'
                                            },
                                            {
                                                id: 2,
                                                title: 'Machine Learning Dataset Collection',
                                                description: 'Curated collection of datasets for machine learning projects',
                                                contributors: 8,
                                                stars: 89,
                                                language: 'Python',
                                                lastActivity: '5 hours ago'
                                            },
                                            {
                                                id: 3,
                                                title: 'DevOps Automation Scripts',
                                                description: 'Collection of automation scripts for common DevOps tasks',
                                                contributors: 12,
                                                stars: 156,
                                                language: 'Bash',
                                                lastActivity: '1 day ago'
                                            }
                                        ].map((project) => (
                                            <div key={project.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{project.title}</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{project.description}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>{project.contributors} contributors</span>
                                                            <span>•</span>
                                                            <span>{project.stars} stars</span>
                                                            <span>•</span>
                                                            <span>{project.language}</span>
                                                            <span>•</span>
                                                            <span>Updated {project.lastActivity}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                                        Contribute
                                                    </button>
                                                    <button className={`${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} px-4 py-2 rounded-lg font-medium transition-colors duration-200`}>
                                                        View Code
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Your Activity */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Your Activity</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Groups Joined</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>3</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects Contributed</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>2</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Study Sessions</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12 this month</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Questions Asked</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Answers Given</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>15</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Trending Topics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Trending Topics</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>React Server Components</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>45 discussions today</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AI Code Generation</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>32 discussions today</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>WebAssembly</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>28 discussions today</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'analytics' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Learning Analytics</h2>
                                    <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-8 text-center`}>
                                        <div className="w-16 h-16 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <div className="w-8 h-8 text-indigo-400 text-2xl">📊</div>
                                        </div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Interactive Charts Coming Soon</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Advanced learning analytics with detailed progress tracking, skill development graphs, and personalized insights will be available soon.</p>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-700'} border rounded-lg p-4`}>
                                                <div className="text-2xl font-bold text-indigo-400 mb-1">156</div>
                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Hours</div>
                                            </div>
                                            <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-700'} border rounded-lg p-4`}>
                                                <div className="text-2xl font-bold text-green-400 mb-1">12</div>
                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Mastered</div>
                                            </div>
                                            <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-700'} border rounded-lg p-4`}>
                                                <div className="text-2xl font-bold text-yellow-400 mb-1">8</div>
                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects</div>
                                            </div>
                                            <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-700'} border rounded-lg p-4`}>
                                                <div className="text-2xl font-bold text-purple-400 mb-1">85%</div>
                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completion Rate</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Learning Metrics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Learning Metrics</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Study Time</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>156 hours</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-indigo-500 h-2 rounded-full" style={{ width: '78%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Concepts Mastered</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12/15</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-green-500 h-2 rounded-full" style={{ width: '80%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects Completed</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>8/10</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-yellow-500 h-2 rounded-full" style={{ width: '80%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Learning Velocity</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>High</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-purple-500 h-2 rounded-full" style={{ width: '90%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Skill Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Skill Progress</h3>
                                    <div className="space-y-3">
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>React</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>85%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-green-500 h-1.5 rounded-full" style={{ width: '85%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>TypeScript</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>70%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-blue-500 h-1.5 rounded-full" style={{ width: '70%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Node.js</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>60%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-yellow-500 h-1.5 rounded-full" style={{ width: '60%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>MongoDB</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>45%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-orange-500 h-1.5 rounded-full" style={{ width: '45%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Docker</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>30%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-red-500 h-1.5 rounded-full" style={{ width: '30%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Onboarding Modal */}
                    {showOnboarding && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-[#111827] border-gray-700'} border rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto`}>
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Create Your Learning Path</h2>
                                    <button
                                        onClick={() => setShowOnboarding(false)}
                                        className={`p-2 ${isLightMode ? 'bg-gray-200 text-gray-600 hover:bg-gray-300' : 'bg-gray-700 text-gray-400 hover:bg-gray-600'} rounded-lg transition-colors duration-200`}
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                {/* Progress Bar */}
                                <div className="mb-8">
                                    <div className="flex items-center justify-between mb-2">
                                        <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Step {onboardingStep} of 5</span>
                                        <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{Math.round((onboardingStep / 5) * 100)}%</span>
                                    </div>
                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                        <div 
                                            className="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300"
                                            style={{ width: `${(onboardingStep / 5) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>

                                {/* Step Content */}
                                {onboardingStep === 1 && (
                                    <div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>What skills do you want to learn?</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Select all the skills you're interested in developing</p>
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                                            {availableSkills.map((skill) => (
                                                <button
                                                    key={skill}
                                                    onClick={() => {
                                                        if (learningGoals.includes(skill)) {
                                                            setLearningGoals(learningGoals.filter(s => s !== skill));
                                                        } else {
                                                            setLearningGoals([...learningGoals, skill]);
                                                        }
                                                    }}
                                                    className={`p-3 rounded-lg border transition-all duration-200 ${
                                                        learningGoals.includes(skill)
                                                            ? 'bg-indigo-500 border-indigo-500 text-white'
                                                            : 'bg-gray-800 border-gray-700 text-gray-300 hover:border-indigo-500'
                                                    }`}
                                                >
                                                    {skill}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {onboardingStep === 2 && (
                                    <div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>What's your experience level?</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>This helps us personalize your learning path</p>
                                        <div className="space-y-3">
                                            {['Beginner', 'Intermediate', 'Advanced'].map((level) => (
                                                <label key={level} className={`flex items-center p-4 ${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg cursor-pointer hover:border-indigo-500 transition-colors duration-200`}>
                                                    <input
                                                        type="radio"
                                                        name="experienceLevel"
                                                        value={level.toLowerCase()}
                                                        checked={experienceLevel === level.toLowerCase()}
                                                        onChange={(e) => setExperienceLevel(e.target.value)}
                                                        className={`w-4 h-4 text-indigo-600 ${isLightMode ? 'bg-white border-gray-300' : 'bg-gray-800 border-gray-600'} focus:ring-indigo-500`}
                                                    />
                                                    <div className="ml-3">
                                                        <div className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{level}</div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            {level === 'Beginner' && 'New to programming or this technology'}
                                                            {level === 'Intermediate' && 'Some experience, want to deepen knowledge'}
                                                            {level === 'Advanced' && 'Experienced, looking for expert-level content'}
                                                        </div>
                                                    </div>
                                                </label>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {onboardingStep === 3 && (
                                    <div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>How much time can you commit?</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>We'll adjust your learning path based on your availability</p>
                                        <div className="space-y-6">
                                            <div>
                                                <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>
                                                    Hours per week: {timeCommitment} hours
                                                </label>
                                                <input
                                                    type="range"
                                                    min="1"
                                                    max="20"
                                                    value={timeCommitment}
                                                    onChange={(e) => setTimeCommitment(parseInt(e.target.value))}
                                                    className={`w-full h-2 ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-lg appearance-none cursor-pointer`}
                                                />
                                                <div className={`flex justify-between text-xs ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mt-1`}>
                                                    <span>1 hour</span>
                                                    <span>20 hours</span>
                                                </div>
                                            </div>
                                            <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Estimated Timeline</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-400'}`}>
                                                    With {timeCommitment} hours per week, your learning path will take approximately {Math.ceil(120 / timeCommitment)} weeks to complete.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {onboardingStep === 4 && (
                                    <div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>How do you prefer to learn?</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Select your preferred learning styles</p>
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                                            {learningStyles.map((style) => (
                                                <button
                                                    key={style}
                                                    onClick={() => {
                                                        if (learningStyle.includes(style)) {
                                                            setLearningStyle(learningStyle.filter(s => s !== style));
                                                        } else {
                                                            setLearningStyle([...learningStyle, style]);
                                                        }
                                                    }}
                                                    className={`p-3 rounded-lg border transition-all duration-200 ${
                                                        learningStyle.includes(style)
                                                            ? 'bg-indigo-500 border-indigo-500 text-white'
                                                            : 'bg-gray-800 border-gray-700 text-gray-300 hover:border-indigo-500'
                                                    }`}
                                                >
                                                    {style}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {onboardingStep === 5 && (
                                    <div>
                                        <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>What's your target role?</h3>
                                        <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>This helps us align your learning path with career goals</p>
                                        <div className="grid grid-cols-2 gap-3">
                                            {targetRoles.map((role) => (
                                                <button
                                                    key={role}
                                                    onClick={() => setTargetRole(role)}
                                                    className={`p-4 rounded-lg border transition-all duration-200 ${
                                                        targetRole === role
                                                            ? 'bg-indigo-500 border-indigo-500 text-white'
                                                            : isLightMode 
                                                                ? 'bg-white border-gray-200 text-gray-700 hover:border-indigo-500'
                                                                : 'bg-gray-800 border-gray-700 text-gray-300 hover:border-indigo-500'
                                                    }`}
                                                >
                                                    {role}
                                                </button>
                                            ))}
                                        </div>
                                        
                                        {/* Summary */}
                                        {targetRole && (
                                            <div className={`mt-6 ${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Learning Path Summary</h4>
                                                <div className={`space-y-2 text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>
                                                    <p><span className="font-medium">Skills:</span> {learningGoals.join(', ')}</p>
                                                    <p><span className="font-medium">Level:</span> {experienceLevel}</p>
                                                    <p><span className="font-medium">Time:</span> {timeCommitment} hours/week</p>
                                                    <p><span className="font-medium">Style:</span> {learningStyle.join(', ')}</p>
                                                    <p><span className="font-medium">Goal:</span> {targetRole}</p>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {/* Navigation Buttons */}
                                <div className="flex items-center justify-between mt-8">
                                    <div className="flex items-center gap-4">
                                        {onboardingStep > 1 && (
                                            <button
                                                onClick={handleOnboardingBack}
                                                className={`px-6 py-3 ${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-600 text-white hover:bg-gray-700'} rounded-lg font-medium transition-colors duration-200`}
                                            >
                                                Back
                                            </button>
                                        )}
                                        <button
                                            onClick={() => setShowOnboarding(false)}
                                            className={`px-6 py-3 ${isLightMode ? 'bg-gray-300 text-gray-700 hover:bg-gray-400' : 'bg-gray-500 text-white hover:bg-gray-600'} rounded-lg font-medium transition-colors duration-200`}
                                        >
                                            Save & Close
                                        </button>
                                    </div>
                                    <div className="flex items-center gap-4">
                                        {onboardingStep < 5 ? (
                                            <button
                                                onClick={handleOnboardingNext}
                                                disabled={onboardingStep === 1 && learningGoals.length === 0 || onboardingStep === 2 && !experienceLevel || onboardingStep === 5 && !targetRole}
                                                className="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                Next Step
                                            </button>
                                        ) : (
                                            <button
                                                onClick={() => setShowOnboarding(false)}
                                                disabled={!targetRole}
                                                className="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                Generate Learning Path
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Learning Path Details Modal */}
                    {showPathDetails && selectedPath && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">{selectedPath.title}</h2>
                                    <button
                                        onClick={() => setShowPathDetails(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    {/* Weekly Learning Sprints */}
                                    <div className="space-y-6">
                                        <h3 className="text-lg font-semibold text-gray-50 mb-4">Weekly Learning Sprints</h3>
                                        {weeklySprints.map((sprint) => (
                                            <div key={sprint.week} className="bg-gray-800 border border-gray-700 rounded-lg">
                                                <button
                                                    onClick={() => handleWeekToggle(sprint.week)}
                                                    className="w-full p-4 flex items-center justify-between hover:bg-gray-700 transition-colors duration-200"
                                                >
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                                                            sprint.completed ? 'bg-green-500' : 'bg-indigo-500'
                                                        }`}>
                                                            <div className="w-4 h-4 text-white">{sprint.completed ? '✓' : sprint.week}</div>
                                                        </div>
                                                        <div className="text-left">
                                                            <h4 className="font-medium text-gray-50">{sprint.title}</h4>
                                                            <p className="text-sm text-gray-400">{sprint.objectives.length} objectives</p>
                                                        </div>
                                                    </div>
                                                    <div className={`w-5 h-5 transition-transform duration-200 ${
                                                        expandedWeek === sprint.week ? 'rotate-180' : ''
                                                    }`}>
                                                        ▼
                                                    </div>
                                                </button>
                                                
                                                {expandedWeek === sprint.week && (
                                                    <div className="p-4 border-t border-gray-700">
                                                        <div className="mb-4">
                                                            <h5 className="font-medium text-gray-50 mb-2">Learning Objectives</h5>
                                                            <ul className="space-y-1">
                                                                {sprint.objectives.map((objective, index) => (
                                                                    <li key={index} className="text-sm text-gray-300 flex items-center gap-2">
                                                                        <div className="w-1 h-1 bg-indigo-400 rounded-full"></div>
                                                                        {objective}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                        
                                                        <div className="mb-4">
                                                            <h5 className="font-medium text-gray-50 mb-2">Activities</h5>
                                                            <div className="space-y-2">
                                                                {sprint.activities.map((activity) => (
                                                                    <div key={activity.id} className="flex items-center justify-between p-2 bg-gray-700 rounded">
                                                                        <div className="flex items-center gap-2">
                                                                            <div className="w-4 h-4">{getActivityIcon(activity.type)}</div>
                                                                            <span className="text-sm text-gray-300">{activity.title}</span>
                                                                        </div>
                                                                        <div className="flex items-center gap-2">
                                                                            <span className="text-xs text-gray-400">{activity.duration}min</span>
                                                                            {activity.completed ? (
                                                                                <div className="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                                                                                    <div className="w-2 h-2 text-white">✓</div>
                                                                                </div>
                                                                            ) : (
                                                                                <div className="w-4 h-4 border border-gray-600 rounded-full"></div>
                                                                            )}
                                                                        </div>
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        </div>
                                                        
                                                        <div>
                                                            <h5 className="font-medium text-gray-50 mb-2">Week Project</h5>
                                                            <div className="bg-gray-700 rounded p-3">
                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <h6 className="font-medium text-gray-50">{sprint.project.title}</h6>
                                                                        <p className="text-sm text-gray-400">{sprint.project.estimatedTime}</p>
                                                                    </div>
                                                                    {sprint.project.completed ? (
                                                                        <div className="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                                                            <div className="w-3 h-3 text-white">✓</div>
                                                                        </div>
                                                                    ) : (
                                                                        <div className="w-6 h-6 border border-gray-600 rounded-full"></div>
                                                                    )}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>

                                    {/* Path Overview */}
                                    <div className="space-y-6">
                                        <div className="bg-gray-800 border border-gray-700 rounded-lg p-6">
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Path Overview</h3>
                                            <div className="space-y-3">
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Duration</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedPath.duration} days</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Difficulty</span>
                                                    <span className={`text-sm font-medium px-2 py-1 rounded-full ${getDifficultyColor(selectedPath.difficulty)}`}>
                                                        {selectedPath.difficulty}
                                                    </span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Estimated Hours</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedPath.estimatedHours} hours</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Projects</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedPath.projects}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Progress</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedPath.progress}%</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="bg-gray-800 border border-gray-700 rounded-lg p-6">
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Skills You'll Learn</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedPath.skills.map((skill) => (
                                                    <span key={skill} className="px-3 py-1 bg-indigo-500/20 text-indigo-400 text-sm rounded-full">
                                                        {skill}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="flex items-center gap-4">
                                            {selectedPath.status === 'not-started' && (
                                                <button className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300">
                                                    Start Learning Path
                                                </button>
                                            )}
                                            {selectedPath.status === 'in-progress' && (
                                                <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                    Continue Learning
                                                </button>
                                            )}
                                            {selectedPath.status === 'completed' && (
                                                <button className="flex-1 bg-gradient-to-r from-yellow-500 to-orange-500 text-white py-3 rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-300">
                                                    View Certificate
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Learning Path when learning-path-content is shown
        window.renderLearningPath = function() {
            console.log('renderLearningPath called');
            const container = document.getElementById('learning-path-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Learning Path...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<LearningPath />);
                    console.log('Learning Path rendered successfully');
                } catch (error) {
                    console.error('Error rendering Learning Path:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Learning Path</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('learning-path-container not found');
            }
        };

        // Sprints React Component
        const Sprints = () => {
            const [activeTab, setActiveTab] = useState('browse');
            const [selectedSprint, setSelectedSprint] = useState(null);
            const [showSprintDetail, setShowSprintDetail] = useState(false);
            const [filterTechnology, setFilterTechnology] = useState('all');
            const [filterDifficulty, setFilterDifficulty] = useState('all');

            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');
            const [filterDuration, setFilterDuration] = useState('all');
            const [searchQuery, setSearchQuery] = useState('');
            const [enrolledSprints, setEnrolledSprints] = useState([1, 3]);

            const sprints = [
                {
                    id: 1,
                    title: 'Modern E-commerce Platform',
                    description: 'Build a full-stack e-commerce platform with React, Node.js, and MongoDB',
                    technology: ['React', 'Node.js', 'MongoDB', 'Stripe'],
                    difficulty: 'intermediate',
                    duration: '3 weeks',
                    participants: 1240,
                    rating: 4.8,
                    deliverable: 'Complete e-commerce website with payment integration',
                    skills: ['React', 'Node.js', 'MongoDB', 'Stripe', 'Authentication', 'Payment Processing'],
                    prerequisites: ['JavaScript', 'HTML/CSS', 'Basic React'],
                    category: 'fullstack',
                    featured: true,
                    completionRate: 78,
                    estimatedHours: 40,
                    industry: 'E-commerce',
                    thumbnail: '🛒'
                },
                {
                    id: 2,
                    title: 'AI-Powered Chat Application',
                    description: 'Create an intelligent chat application with OpenAI integration',
                    technology: ['React', 'TypeScript', 'OpenAI', 'WebSocket'],
                    difficulty: 'advanced',
                    duration: '2 weeks',
                    participants: 890,
                    rating: 4.9,
                    deliverable: 'Real-time chat app with AI responses',
                    skills: ['React', 'TypeScript', 'OpenAI API', 'WebSocket', 'Real-time Communication'],
                    prerequisites: ['React', 'TypeScript', 'API Integration'],
                    category: 'ai',
                    featured: true,
                    completionRate: 65,
                    estimatedHours: 30,
                    industry: 'AI/ML',
                    thumbnail: '🤖'
                },
                {
                    id: 3,
                    title: 'Mobile-First Dashboard Design',
                    description: 'Design and build a responsive dashboard with modern UI/UX',
                    technology: ['React', 'Tailwind CSS', 'Chart.js', 'Framer Motion'],
                    difficulty: 'beginner',
                    duration: '2 weeks',
                    participants: 2100,
                    rating: 4.7,
                    deliverable: 'Responsive dashboard with data visualization',
                    skills: ['React', 'Tailwind CSS', 'Chart.js', 'Responsive Design', 'UI/UX'],
                    prerequisites: ['HTML/CSS', 'JavaScript', 'Basic React'],
                    category: 'frontend',
                    featured: false,
                    completionRate: 85,
                    estimatedHours: 25,
                    industry: 'SaaS',
                    thumbnail: '📊'
                },
                {
                    id: 4,
                    title: 'DevOps Pipeline Mastery',
                    description: 'Master CI/CD pipelines with Docker, GitHub Actions, and AWS',
                    technology: ['Docker', 'GitHub Actions', 'AWS', 'Kubernetes'],
                    difficulty: 'advanced',
                    duration: '3 weeks',
                    participants: 650,
                    rating: 4.6,
                    deliverable: 'Complete DevOps pipeline with automated deployment',
                    skills: ['Docker', 'CI/CD', 'AWS', 'Kubernetes', 'Infrastructure as Code'],
                    prerequisites: ['Linux', 'Git', 'Basic Cloud Knowledge'],
                    category: 'devops',
                    featured: false,
                    completionRate: 70,
                    estimatedHours: 45,
                    industry: 'DevOps',
                    thumbnail: '⚙️'
                },
                {
                    id: 5,
                    title: 'React Native Mobile App',
                    description: 'Build a cross-platform mobile app with React Native and Expo',
                    technology: ['React Native', 'Expo', 'Firebase', 'Redux'],
                    difficulty: 'intermediate',
                    duration: '3 weeks',
                    participants: 980,
                    rating: 4.5,
                    deliverable: 'Cross-platform mobile application',
                    skills: ['React Native', 'Expo', 'Firebase', 'Redux', 'Mobile Development'],
                    prerequisites: ['React', 'JavaScript', 'Mobile Development Basics'],
                    category: 'mobile',
                    featured: false,
                    completionRate: 75,
                    estimatedHours: 35,
                    industry: 'Mobile',
                    thumbnail: '📱'
                },
                {
                    id: 6,
                    title: 'Microservices Architecture Sprint',
                    description: 'Design and implement a microservices architecture with Node.js',
                    technology: ['Node.js', 'Docker', 'Redis', 'PostgreSQL', 'API Gateway'],
                    difficulty: 'advanced',
                    duration: '4 weeks',
                    participants: 420,
                    rating: 4.8,
                    deliverable: 'Scalable microservices system',
                    skills: ['Node.js', 'Microservices', 'Docker', 'Redis', 'PostgreSQL', 'API Design'],
                    prerequisites: ['Node.js', 'Database Knowledge', 'System Design'],
                    category: 'backend',
                    featured: false,
                    completionRate: 60,
                    estimatedHours: 50,
                    industry: 'Enterprise',
                    thumbnail: '🏗️'
                }
            ];

            const userProgress = [
                { sprintId: 1, progress: 65, currentMilestone: 3, totalMilestones: 5, timeSpent: 26, startDate: '2024-01-15', status: 'in_progress' },
                { sprintId: 3, progress: 100, currentMilestone: 5, totalMilestones: 5, timeSpent: 25, startDate: '2024-01-01', status: 'completed' }
            ];

            const achievements = [
                { id: 1, title: 'First Sprint Complete', description: 'Completed your first learning sprint', icon: '🏆', earned: true, earnedDate: '2024-01-20' },
                { id: 2, title: 'Frontend Master', description: 'Completed 3 frontend sprints', icon: '🎨', earned: true, earnedDate: '2024-01-25' },
                { id: 3, title: 'Full-Stack Developer', description: 'Completed both frontend and backend sprints', icon: '💻', earned: false, earnedDate: null },
                { id: 4, title: 'Sprint Streak', description: 'Completed 5 sprints in a row', icon: '🔥', earned: false, earnedDate: null },
                { id: 5, title: 'Advanced Learner', description: 'Completed 3 advanced difficulty sprints', icon: '🚀', earned: false, earnedDate: null },
                { id: 6, title: 'Community Helper', description: 'Helped 10 other learners in sprint discussions', icon: '🤝', earned: false, earnedDate: null }
            ];

            const getDifficultyColor = (difficulty) => {
                switch (difficulty) {
                    case 'beginner': return 'text-green-400 bg-green-500/20';
                    case 'intermediate': return 'text-yellow-400 bg-yellow-500/20';
                    case 'advanced': return 'text-red-400 bg-red-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getCategoryIcon = (category) => {
                switch (category) {
                    case 'frontend': return '💻';
                    case 'backend': return '🗄️';
                    case 'fullstack': return '🌐';
                    case 'mobile': return '📱';
                    case 'ai': return '🧠';
                    case 'devops': return '⚙️';
                    default: return '📚';
                }
            };

            const getCategoryColor = (category) => {
                switch (category) {
                    case 'frontend': return 'text-blue-400 bg-blue-500/20';
                    case 'backend': return 'text-green-400 bg-green-500/20';
                    case 'fullstack': return 'text-purple-400 bg-purple-500/20';
                    case 'mobile': return 'text-pink-400 bg-pink-500/20';
                    case 'ai': return 'text-orange-400 bg-orange-500/20';
                    case 'devops': return 'text-gray-400 bg-gray-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const handleSprintClick = (sprint) => {
                setSelectedSprint(sprint);
                setShowSprintDetail(true);
            };

            const handleEnrollSprint = (sprintId) => {
                if (enrolledSprints.includes(sprintId)) {
                    setEnrolledSprints(enrolledSprints.filter(id => id !== sprintId));
                } else {
                    setEnrolledSprints([...enrolledSprints, sprintId]);
                }
            };

            const filteredSprints = sprints.filter(sprint => {
                const matchesSearch = sprint.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                   sprint.description.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                   sprint.technology.some(tech => tech.toLowerCase().includes(searchQuery.toLowerCase()));
                const matchesTechnology = filterTechnology === 'all' || sprint.technology.includes(filterTechnology);
                const matchesDifficulty = filterDifficulty === 'all' || sprint.difficulty === filterDifficulty;
                const matchesDuration = filterDuration === 'all' || 
                    (filterDuration === '1-2' && sprint.duration === '2 weeks') ||
                    (filterDuration === '2-3' && sprint.duration === '3 weeks') ||
                    (filterDuration === '3+' && sprint.duration === '4 weeks');
                
                return matchesSearch && matchesTechnology && matchesDifficulty && matchesDuration;
            });

            const tabs = [
                { id: 'browse', label: 'Browse Sprints', icon: '🔍' },
                { id: 'my-sprints', label: 'My Sprints', icon: '📚' },
                { id: 'achievements', label: 'Achievements', icon: '🏆' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'browse' && (
                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-3 space-y-6">
                                {/* Filters */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Search</label>
                                            <div className="relative">
                                                <input
                                                    type="text"
                                                    value={searchQuery}
                                                    onChange={(e) => setSearchQuery(e.target.value)}
                                                    placeholder="Search sprints..."
                                                    className={`w-full pl-10 pr-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                                />
                                                <div className="absolute left-3 top-2.5 w-4 h-4 text-gray-400">🔍</div>
                                            </div>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Technology</label>
                                            <select
                                                value={filterTechnology}
                                                onChange={(e) => setFilterTechnology(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Technologies</option>
                                                <option value="React">React</option>
                                                <option value="Node.js">Node.js</option>
                                                <option value="Python">Python</option>
                                                <option value="TypeScript">TypeScript</option>
                                                <option value="Vue.js">Vue.js</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Difficulty</label>
                                            <select
                                                value={filterDifficulty}
                                                onChange={(e) => setFilterDifficulty(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Levels</option>
                                                <option value="beginner">Beginner</option>
                                                <option value="intermediate">Intermediate</option>
                                                <option value="advanced">Advanced</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Duration</label>
                                            <select
                                                value={filterDuration}
                                                onChange={(e) => setFilterDuration(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Durations</option>
                                                <option value="1-2">1-2 weeks</option>
                                                <option value="2-3">2-3 weeks</option>
                                                <option value="3+">3+ weeks</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Featured Sprints */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Featured Sprints</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {sprints.filter(sprint => sprint.featured).map((sprint) => (
                                            <div key={sprint.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{sprint.thumbnail}</div>
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{sprint.title}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(sprint.difficulty)}`}>
                                                                {sprint.difficulty}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{sprint.description}</p>
                                                        <div className="flex flex-wrap gap-2 mb-3">
                                                            {sprint.technology.slice(0, 3).map((tech) => (
                                                                <span key={tech} className={`px-2 py-1 ${isLightMode ? 'bg-blue-100 text-blue-600' : 'bg-blue-500/20 text-blue-400'} text-xs rounded-full`}>
                                                                    {tech}
                                                                </span>
                                                            ))}
                                                            {sprint.technology.length > 3 && (
                                                                <span className={`px-2 py-1 ${isLightMode ? 'bg-gray-100 text-gray-600' : 'bg-gray-500/20 text-gray-400'} text-xs rounded-full`}>
                                                                    +{sprint.technology.length - 3} more
                                                                </span>
                                                            )}
                                                        </div>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>{sprint.duration}</span>
                                                            <span>•</span>
                                                            <span>{sprint.participants.toLocaleString()} participants</span>
                                                            <span>•</span>
                                                            <span>{sprint.estimatedHours} hours</span>
                                                        </div>
                                                        {enrolledSprints.includes(sprint.id) && (
                                                            <div className="mb-3">
                                                                <div className="flex justify-between text-sm text-gray-400 mb-1">
                                                                    <span>Progress</span>
                                                                    <span>{sprint.completionRate}%</span>
                                                                </div>
                                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                                    <div 
                                                                        className="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full transition-all duration-300"
                                                                        style={{ width: `${sprint.completionRate}%` }}
                                                                    ></div>
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    {enrolledSprints.includes(sprint.id) ? (
                                                        <button className="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300">
                                                            Continue Sprint
                                                        </button>
                                                    ) : (
                                                        <button 
                                                            onClick={() => handleEnrollSprint(sprint.id)}
                                                            className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300"
                                                        >
                                                            Start Sprint
                                                        </button>
                                                    )}
                                                    <button 
                                                        onClick={() => handleSprintClick(sprint)}
                                                        className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                    >
                                                        View Details
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* All Sprints */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>All Sprints</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {filteredSprints.filter(sprint => !sprint.featured).map((sprint) => (
                                            <div key={sprint.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-3">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <div className="text-xl">{sprint.thumbnail}</div>
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{sprint.title}</h3>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} text-sm mb-2`}>{sprint.description}</p>
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(sprint.difficulty)}`}>
                                                                {sprint.difficulty}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(sprint.category)}`}>
                                                                {getCategoryIcon(sprint.category)} {sprint.category}
                                                            </span>
                                                        </div>
                                                        <div className="flex items-center gap-3 text-sm text-gray-400">
                                                            <span>{sprint.duration}</span>
                                                            <span>•</span>
                                                            <span>{sprint.participants.toLocaleString()}</span>
                                                            <span>•</span>
                                                            <span>⭐ {sprint.rating}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    {enrolledSprints.includes(sprint.id) ? (
                                                        <button className="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300 text-sm">
                                                            Continue
                                                        </button>
                                                    ) : (
                                                        <button 
                                                            onClick={() => handleEnrollSprint(sprint.id)}
                                                            className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 text-sm"
                                                        >
                                                            Start Sprint
                                                        </button>
                                                    )}
                                                    <button 
                                                        onClick={() => handleSprintClick(sprint)}
                                                        className="bg-gray-700 text-gray-300 px-3 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200 text-sm"
                                                    >
                                                        View
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Your Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Your Progress</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Active Sprints</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{enrolledSprints.length}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completed</span>
                                            <span className="text-sm font-medium text-green-400">1</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Hours</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>51 hours</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Achievements</span>
                                            <span className="text-sm font-medium text-yellow-400">2 earned</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Trending This Week */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Trending This Week</h3>
                                    <div className="space-y-3">
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
                                                <div className="w-4 h-4 text-white">⚛️</div>
                                            </div>
                                            <div>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>React</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+340 new learners</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center">
                                                <div className="w-4 h-4 text-white">🐍</div>
                                            </div>
                                            <div>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Python</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+280 new learners</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center">
                                                <div className="w-4 h-4 text-white">⚡</div>
                                            </div>
                                            <div>
                                                <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>TypeScript</h4>
                                                <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+190 new learners</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Sprint Tips */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Sprint Tips</h3>
                                    <div className="space-y-2">
                                        <div className="flex items-start gap-2">
                                            <div className="w-1 h-1 bg-indigo-400 rounded-full mt-2"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Set aside 2-3 hours daily for consistent progress</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-1 h-1 bg-indigo-400 rounded-full mt-2"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Join the community discussions for help</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-1 h-1 bg-indigo-400 rounded-full mt-2"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Complete the deliverable for maximum learning</p>
                                        </div>
                                        <div className="flex items-start gap-2">
                                            <div className="w-1 h-1 bg-indigo-400 rounded-full mt-2"></div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Share your progress to stay motivated</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'my-sprints' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Active Sprints */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Active Sprints</h2>
                                    {enrolledSprints.length > 0 ? (
                                        <div className="space-y-4">
                                            {sprints.filter(sprint => enrolledSprints.includes(sprint.id)).map((sprint) => {
                                                const progress = userProgress.find(p => p.sprintId === sprint.id);
                                                return (
                                                    <div key={sprint.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                        <div className="flex items-start justify-between mb-4">
                                                            <div className="flex-1">
                                                                <div className="flex items-center gap-3 mb-2">
                                                                    <div className="text-2xl">{sprint.thumbnail}</div>
                                                                    <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{sprint.title}</h3>
                                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(sprint.difficulty)}`}>
                                                                        {sprint.difficulty}
                                                                    </span>
                                                                </div>
                                                                <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{sprint.description}</p>
                                                                <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                                    <span>Milestone {progress?.currentMilestone || 0}/{progress?.totalMilestones || 0}</span>
                                                                    <span>•</span>
                                                                    <span>{progress?.timeSpent || 0} hours spent</span>
                                                                    <span>•</span>
                                                                    <span>Started {progress?.startDate || 'N/A'}</span>
                                                                </div>
                                                                <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-4`}>
                                                                    <div 
                                                                        className="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full transition-all duration-300"
                                                                        style={{ width: `${progress?.progress || 0}%` }}
                                                                    ></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <button className="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300">
                                                                Continue Sprint
                                                            </button>
                                                            <button 
                                                                onClick={() => handleSprintClick(sprint)}
                                                                className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                            >
                                                                View Details
                                                            </button>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    ) : (
                                        <div className="text-center py-12">
                                            <div className={`w-16 h-16 ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full flex items-center justify-center mx-auto mb-4`}>
                                                <div className={`w-8 h-8 ${isLightMode ? 'text-gray-500' : 'text-gray-400'} text-2xl`}>📚</div>
                                            </div>
                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>No Active Sprints</h3>
                                            <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-6`}>Start a learning sprint to begin your focused learning journey</p>
                                            <button 
                                                onClick={() => setActiveTab('browse')}
                                                className="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300"
                                            >
                                                Browse Sprints
                                            </button>
                                        </div>
                                    )}
                                </div>

                                {/* Completed Sprints */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Completed Sprints</h2>
                                    <div className="space-y-4">
                                        {sprints.filter(sprint => userProgress.find(p => p.sprintId === sprint.id && p.status === 'completed')).map((sprint) => (
                                            <div key={sprint.id} className={`${isLightMode ? 'bg-white border-green-500/30' : 'bg-gray-800 border-green-500/30'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{sprint.thumbnail}</div>
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{sprint.title}</h3>
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-500/20">
                                                                Completed
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{sprint.description}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <span>Certificate Available</span>
                                                            <span>•</span>
                                                            <span>100% Complete</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-2 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300">
                                                        View Certificate
                                                    </button>
                                                    <button className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                        Download
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Current Sprint Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Current Sprint Progress</h3>
                                    <div className="space-y-4">
                                        {enrolledSprints.length > 0 ? (
                                            sprints.filter(sprint => enrolledSprints.includes(sprint.id)).map((sprint) => {
                                                const progress = userProgress.find(p => p.sprintId === sprint.id);
                                                return (
                                                    <div key={sprint.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                        <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{sprint.title}</h4>
                                                        <div className={`flex justify-between text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-2`}>
                                                            <span>Progress</span>
                                                            <span>{progress?.progress || 0}%</span>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-2`}>
                                                            <div 
                                                                className="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full transition-all duration-300"
                                                                style={{ width: `${progress?.progress || 0}%` }}
                                                            ></div>
                                                        </div>
                                                        <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            Milestone {progress?.currentMilestone || 0}/{progress?.totalMilestones || 0}
                                                        </div>
                                                    </div>
                                                );
                                            })
                                        ) : (
                                            <p className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'} text-sm`}>No active sprints</p>
                                        )}
                                    </div>
                                </div>

                                {/* Learning Streak */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Learning Streak</h3>
                                    <div className="flex items-center gap-2 mb-4">
                                        {Array.from({ length: 7 }, (_, i) => (
                                            <div key={i} className={`w-8 h-8 rounded-full flex items-center justify-center ${
                                                i < 5 ? 'bg-orange-500' : (isLightMode ? 'bg-gray-200' : 'bg-gray-700')
                                            }`}>
                                                <div className="w-4 h-4 text-white">🔥</div>
                                            </div>
                                        ))}
                                    </div>
                                    <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>5 day streak! Keep it up!</p>
                                </div>

                                {/* Next Recommended Sprint */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recommended Next</h3>
                                    <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                        <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>AI-Powered Chat Application</h4>
                                        <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>Build an intelligent chat app with OpenAI</p>
                                        <div className="flex items-center gap-2 mb-3">
                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-red-400 bg-red-500/20">
                                                advanced
                                            </span>
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>2 weeks</span>
                                        </div>
                                        <button className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                            Start Sprint
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'achievements' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Your Achievements</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {achievements.map((achievement) => (
                                            <div key={achievement.id} className={`border rounded-lg p-6 ${
                                                achievement.earned 
                                                    ? 'bg-yellow-500/10 border-yellow-500/30' 
                                                    : (isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700')
                                            }`}>
                                                <div className="flex items-start gap-4">
                                                    <div className={`w-12 h-12 rounded-full flex items-center justify-center ${
                                                        achievement.earned ? 'bg-yellow-500' : (isLightMode ? 'bg-gray-200' : 'bg-gray-700')
                                                    }`}>
                                                        <div className="w-6 h-6 text-white text-xl">{achievement.icon}</div>
                                                    </div>
                                                    <div className="flex-1">
                                                        <h3 className={`text-lg font-semibold mb-2 ${
                                                            achievement.earned ? 'text-yellow-400' : (isLightMode ? 'text-gray-600' : 'text-gray-400')
                                                        }`}>
                                                            {achievement.title}
                                                        </h3>
                                                        <p className={`text-sm mb-2 ${
                                                            achievement.earned ? (isLightMode ? 'text-gray-600' : 'text-gray-300') : (isLightMode ? 'text-gray-500' : 'text-gray-500')
                                                        }`}>
                                                            {achievement.description}
                                                        </p>
                                                        {achievement.earned && (
                                                            <p className="text-xs text-yellow-400">
                                                                Earned on {achievement.earnedDate}
                                                            </p>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Achievement Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Achievement Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Earned</span>
                                            <span className="text-sm font-medium text-yellow-400">2/6</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completion Rate</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>33%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Next Achievement</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Full-Stack Developer</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Skill Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Skill Progress</h3>
                                    <div className="space-y-3">
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>React</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>85%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-green-500 h-1.5 rounded-full" style={{ width: '85%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Node.js</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>70%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-blue-500 h-1.5 rounded-full" style={{ width: '70%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-1">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>TypeScript</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>60%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1.5`}>
                                                <div className="bg-yellow-500 h-1.5 rounded-full" style={{ width: '60%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Sprint Detail Modal */}
                    {showSprintDetail && selectedSprint && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">{selectedSprint.title}</h2>
                                    <button
                                        onClick={() => setShowSprintDetail(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    {/* Sprint Details */}
                                    <div className="space-y-6">
                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Sprint Details</h3>
                                            <p className="text-gray-300 mb-4">{selectedSprint.description}</p>
                                            <div className="space-y-3">
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Deliverable:</span>
                                                    <span className="text-sm text-gray-50">{selectedSprint.deliverable}</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Duration:</span>
                                                    <span className="text-sm text-gray-50">{selectedSprint.duration}</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Estimated Hours:</span>
                                                    <span className="text-sm text-gray-50">{selectedSprint.estimatedHours} hours</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Industry:</span>
                                                    <span className="text-sm text-gray-50">{selectedSprint.industry}</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Technology Stack</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedSprint.technology.map((tech) => (
                                                    <span key={tech} className="px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full">
                                                        {tech}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Skills You'll Learn</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedSprint.skills.map((skill) => (
                                                    <span key={skill} className="px-3 py-1 bg-indigo-500/20 text-indigo-400 text-sm rounded-full">
                                                        {skill}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Prerequisites</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedSprint.prerequisites.map((prereq) => (
                                                    <span key={prereq} className="px-3 py-1 bg-gray-500/20 text-gray-400 text-sm rounded-full">
                                                        {prereq}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Sprint Stats */}
                                    <div className="space-y-6">
                                        <div className="bg-gray-800 border border-gray-700 rounded-lg p-6">
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Sprint Statistics</h3>
                                            <div className="space-y-3">
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Participants</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedSprint.participants.toLocaleString()}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Rating</span>
                                                    <span className="text-sm font-medium text-gray-50">⭐ {selectedSprint.rating}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Completion Rate</span>
                                                    <span className="text-sm font-medium text-gray-50">{selectedSprint.completionRate}%</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Difficulty</span>
                                                    <span className={`text-sm font-medium px-2 py-1 rounded-full ${getDifficultyColor(selectedSprint.difficulty)}`}>
                                                        {selectedSprint.difficulty}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="flex items-center gap-4">
                                            {enrolledSprints.includes(selectedSprint.id) ? (
                                                <button className="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300">
                                                    Continue Sprint
                                                </button>
                                            ) : (
                                                <button 
                                                    onClick={() => handleEnrollSprint(selectedSprint.id)}
                                                    className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300"
                                                >
                                                    Start Sprint
                                                </button>
                                            )}
                                            <button className="bg-gray-700 text-gray-300 px-4 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                Add to Wishlist
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Sprints when sprints-content is shown
        window.renderSprints = function() {
            console.log('renderSprints called');
            const container = document.getElementById('sprints-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Sprints...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<Sprints />);
                    console.log('Sprints rendered successfully');
                } catch (error) {
                    console.error('Error rendering Sprints:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Sprints</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('sprints-container not found');
            }
        };

        // Certifications React Component
        const Certifications = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedCertification, setSelectedCertification] = useState(null);
            const [showCertificationDetail, setShowCertificationDetail] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [filterCategory, setFilterCategory] = useState('all');

            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');
            const [filterLevel, setFilterLevel] = useState('all');

            const certifications = [
                {
                    id: 1,
                    name: 'AWS Certified Solutions Architect',
                    provider: 'Amazon Web Services',
                    category: 'cloud',
                    level: 'intermediate',
                    marketDemand: 95,
                    salaryImpact: '+$15,000',
                    studyTimeEstimate: '3-4 months',
                    passRate: 65,
                    renewalPeriod: '3 years',
                    prerequisites: ['AWS Fundamentals', 'Cloud Architecture Basics'],
                    description: 'Validate your ability to design and implement distributed systems on AWS',
                    officialUrl: 'https://aws.amazon.com/certification/certified-solutions-architect-associate/',
                    cost: '$150',
                    isRecommended: true,
                    userStatus: 'studying',
                    progress: 45,
                    targetDate: '2024-06-15'
                },
                {
                    id: 2,
                    name: 'Certified Kubernetes Administrator (CKA)',
                    provider: 'Cloud Native Computing Foundation',
                    category: 'devops',
                    level: 'intermediate',
                    marketDemand: 88,
                    salaryImpact: '+$12,000',
                    studyTimeEstimate: '2-3 months',
                    passRate: 70,
                    renewalPeriod: '3 years',
                    prerequisites: ['Linux Fundamentals', 'Container Basics'],
                    description: 'Demonstrate your ability to perform the responsibilities of a Kubernetes administrator',
                    officialUrl: 'https://www.cncf.io/certification/cka/',
                    cost: '$395',
                    isRecommended: true,
                    userStatus: 'planning',
                    progress: 0,
                    targetDate: '2024-08-20'
                },
                {
                    id: 3,
                    name: 'CISSP - Certified Information Systems Security Professional',
                    provider: 'ISC²',
                    category: 'security',
                    level: 'expert',
                    marketDemand: 92,
                    salaryImpact: '+$20,000',
                    studyTimeEstimate: '6-8 months',
                    passRate: 45,
                    renewalPeriod: '3 years',
                    prerequisites: ['5 years security experience', 'Security Fundamentals'],
                    description: 'The gold standard for information security professionals',
                    officialUrl: 'https://www.isc2.org/Certifications/CISSP',
                    cost: '$749',
                    isRecommended: false,
                    userStatus: 'not-started',
                    progress: 0,
                    targetDate: null
                },
                {
                    id: 4,
                    name: 'PMP - Project Management Professional',
                    provider: 'Project Management Institute',
                    category: 'project-management',
                    level: 'intermediate',
                    marketDemand: 85,
                    salaryImpact: '+$10,000',
                    studyTimeEstimate: '4-6 months',
                    passRate: 60,
                    renewalPeriod: '3 years',
                    prerequisites: ['35 hours project management education', 'Project experience'],
                    description: 'The most important industry-recognized certification for project managers',
                    officialUrl: 'https://www.pmi.org/certifications/project-management-pmp',
                    cost: '$405',
                    isRecommended: false,
                    userStatus: 'completed',
                    progress: 100,
                    targetDate: '2024-03-15'
                },
                {
                    id: 5,
                    name: 'Microsoft Azure Solutions Architect Expert',
                    provider: 'Microsoft',
                    category: 'cloud',
                    level: 'advanced',
                    marketDemand: 78,
                    salaryImpact: '+$13,000',
                    studyTimeEstimate: '4-5 months',
                    passRate: 55,
                    renewalPeriod: '1 year',
                    prerequisites: ['Azure Fundamentals', 'Cloud Architecture'],
                    description: 'Design and implement solutions that run on Microsoft Azure',
                    officialUrl: 'https://learn.microsoft.com/en-us/certifications/azure-solutions-architect/',
                    cost: '$165',
                    isRecommended: false,
                    userStatus: 'scheduled',
                    progress: 80,
                    targetDate: '2024-05-10'
                },
                {
                    id: 6,
                    name: 'Google Cloud Professional Data Engineer',
                    provider: 'Google Cloud',
                    category: 'data',
                    level: 'advanced',
                    marketDemand: 82,
                    salaryImpact: '+$18,000',
                    studyTimeEstimate: '3-4 months',
                    passRate: 68,
                    renewalPeriod: '2 years',
                    prerequisites: ['Data Engineering Fundamentals', 'SQL Knowledge'],
                    description: 'Design and build data processing systems on Google Cloud Platform',
                    officialUrl: 'https://cloud.google.com/certification/data-engineer',
                    cost: '$200',
                    isRecommended: true,
                    userStatus: 'not-started',
                    progress: 0,
                    targetDate: null
                }
            ];

            const userAchievements = [
                {
                    id: 1,
                    certificationId: 4,
                    name: 'PMP - Project Management Professional',
                    score: 85,
                    earnedDate: '2024-03-15',
                    validityPeriod: '2027-03-15',
                    careerImpact: '+$10,000 salary increase'
                }
            ];

            const getCategoryIcon = (category) => {
                switch (category) {
                    case 'cloud': return '☁️';
                    case 'devops': return '⚙️';
                    case 'security': return '🔒';
                    case 'programming': return '💻';
                    case 'project-management': return '📊';
                    case 'data': return '📈';
                    default: return '📜';
                }
            };

            const getCategoryColor = (category) => {
                switch (category) {
                    case 'cloud': return 'text-blue-400 bg-blue-500/20';
                    case 'devops': return 'text-green-400 bg-green-500/20';
                    case 'security': return 'text-red-400 bg-red-500/20';
                    case 'programming': return 'text-purple-400 bg-purple-500/20';
                    case 'project-management': return 'text-orange-400 bg-orange-500/20';
                    case 'data': return 'text-cyan-400 bg-cyan-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getLevelColor = (level) => {
                switch (level) {
                    case 'beginner': return 'text-green-400 bg-green-500/20';
                    case 'intermediate': return 'text-yellow-400 bg-yellow-500/20';
                    case 'advanced': return 'text-orange-400 bg-orange-500/20';
                    case 'expert': return 'text-red-400 bg-red-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getStatusColor = (status) => {
                switch (status) {
                    case 'completed': return 'text-green-400 bg-green-500/20';
                    case 'studying': return 'text-blue-400 bg-blue-500/20';
                    case 'planning': return 'text-yellow-400 bg-yellow-500/20';
                    case 'scheduled': return 'text-purple-400 bg-purple-500/20';
                    case 'expired': return 'text-red-400 bg-red-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const handleCertificationClick = (certification) => {
                setSelectedCertification(certification);
                setShowCertificationDetail(true);
            };

            const filteredCertifications = certifications.filter(cert => {
                const matchesSearch = cert.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                    cert.provider.toLowerCase().includes(searchQuery.toLowerCase());
                const matchesCategory = filterCategory === 'all' || cert.category === filterCategory;
                const matchesLevel = filterLevel === 'all' || cert.level === filterLevel;
                
                return matchesSearch && matchesCategory && matchesLevel;
            });

            const tabs = [
                { id: 'dashboard', label: 'Dashboard', icon: '📊' },
                { id: 'discover', label: 'Discover', icon: '🔍' },
                { id: 'roadmap', label: 'My Roadmap', icon: '🗺️' },
                { id: 'studies', label: 'Active Studies', icon: '📚' },
                { id: 'achievements', label: 'Achievements', icon: '🏆' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'dashboard' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Progress Overview */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Active Certifications</h2>
                                    <div className="space-y-4">
                                        {certifications.filter(cert => cert.userStatus === 'studying' || cert.userStatus === 'scheduled').map((cert) => (
                                            <div key={cert.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{getCategoryIcon(cert.category)}</div>
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{cert.name}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(cert.userStatus)}`}>
                                                                {cert.userStatus}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{cert.description}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>{cert.provider}</span>
                                                            <span>•</span>
                                                            <span>Target: {cert.targetDate}</span>
                                                            <span>•</span>
                                                            <span>{cert.studyTimeEstimate}</span>
                                                        </div>
                                                        <div className="w-full bg-gray-700 rounded-full h-2 mb-4">
                                                            <div 
                                                                className="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300"
                                                                style={{ width: `${cert.progress}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                        Continue Study
                                                    </button>
                                                    <button 
                                                        onClick={() => handleCertificationClick(cert)}
                                                        className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                    >
                                                        View Details
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* AI Recommendations */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>AI Recommendations</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {certifications.filter(cert => cert.isRecommended).map((cert) => (
                                            <div key={cert.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{getCategoryIcon(cert.category)}</div>
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{cert.name}</h3>
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-500/20">
                                                                Recommended
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} text-sm mb-3`}>{cert.description}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>Market Demand: {cert.marketDemand}%</span>
                                                            <span>•</span>
                                                            <span>Salary Impact: {cert.salaryImpact}</span>
                                                            <span>•</span>
                                                            <span>Pass Rate: {cert.passRate}%</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-2 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300">
                                                        Add to Plan
                                                    </button>
                                                    <button 
                                                        onClick={() => handleCertificationClick(cert)}
                                                        className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                                    >
                                                        Learn More
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Quick Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Active Studies</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>2</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Completed</span>
                                            <span className="text-sm font-medium text-green-400">1</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Planning</span>
                                            <span className="text-sm font-medium text-yellow-400">1</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Career Value</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>+$10,000</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Upcoming Deadlines */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Upcoming Deadlines</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Solutions Architect</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: June 15, 2024</p>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1 mt-2`}>
                                                <div className="bg-blue-500 h-1 rounded-full" style={{ width: '45%' }}></div>
                                            </div>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Azure Solutions Architect</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: May 10, 2024</p>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-1 mt-2`}>
                                                <div className="bg-blue-500 h-1 rounded-full" style={{ width: '80%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* AI Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>AI Insights</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Market Trends</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Cloud certifications are in high demand with 15% growth this quarter</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Study Tip</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Focus on hands-on labs for AWS certification success</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Next Step</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Consider adding Kubernetes certification to your roadmap</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'discover' && (
                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-3 space-y-6">
                                {/* Search and Filters */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Search</label>
                                            <div className="relative">
                                                <input
                                                    type="text"
                                                    value={searchQuery}
                                                    onChange={(e) => setSearchQuery(e.target.value)}
                                                    placeholder="Search certifications..."
                                                    className={`w-full pl-10 pr-4 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900 placeholder-gray-500' : 'bg-gray-800 border-gray-700 text-gray-50 placeholder-gray-400'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                                />
                                                <div className="absolute left-3 top-2.5 w-4 h-4 text-gray-400">🔍</div>
                                            </div>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Category</label>
                                            <select
                                                value={filterCategory}
                                                onChange={(e) => setFilterCategory(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Categories</option>
                                                <option value="cloud">Cloud</option>
                                                <option value="devops">DevOps</option>
                                                <option value="security">Security</option>
                                                <option value="programming">Programming</option>
                                                <option value="project-management">Project Management</option>
                                                <option value="data">Data</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Level</label>
                                            <select
                                                value={filterLevel}
                                                onChange={(e) => setFilterLevel(e.target.value)}
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            >
                                                <option value="all">All Levels</option>
                                                <option value="beginner">Beginner</option>
                                                <option value="intermediate">Intermediate</option>
                                                <option value="advanced">Advanced</option>
                                                <option value="expert">Expert</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Certifications Grid */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Available Certifications</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {filteredCertifications.map((cert) => (
                                            <div key={cert.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6 hover:border-indigo-500/50 transition-all duration-300`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{getCategoryIcon(cert.category)}</div>
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{cert.name}</h3>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} text-sm mb-3`}>{cert.provider}</p>
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(cert.category)}`}>
                                                                {cert.category}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getLevelColor(cert.level)}`}>
                                                                {cert.level}
                                                            </span>
                                                        </div>
                                                        <div className={`space-y-2 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <div className="flex justify-between">
                                                                <span>Market Demand</span>
                                                                <span className="text-green-400">{cert.marketDemand}%</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Salary Impact</span>
                                                                <span className="text-green-400">{cert.salaryImpact}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Study Time</span>
                                                                <span>{cert.studyTimeEstimate}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Pass Rate</span>
                                                                <span>{cert.passRate}%</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Cost</span>
                                                                <span>{cert.cost}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 text-sm">
                                                        Add to Plan
                                                    </button>
                                                    <button 
                                                        onClick={() => handleCertificationClick(cert)}
                                                        className={`${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} px-3 py-2 rounded-lg font-medium transition-colors duration-200 text-sm`}
                                                    >
                                                        Details
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Popular Certifications */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Popular This Month</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Solutions Architect</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+25% interest this month</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Kubernetes Administrator</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+18% interest this month</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>CISSP Security</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>+12% interest this month</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Career Impact Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Career Impact</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Average Salary Increase</span>
                                            <span className="text-sm font-medium text-green-400">+$15,000</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Job Market Growth</span>
                                            <span className="text-sm font-medium text-blue-400">+22%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Career Advancement</span>
                                            <span className="text-sm font-medium text-purple-400">85%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'roadmap' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Certification Roadmap</h2>
                                    <div className="space-y-6">
                                        {/* Roadmap Timeline */}
                                        <div className="relative">
                                            <div className={`absolute left-4 top-0 bottom-0 w-0.5 ${isLightMode ? 'bg-gray-300' : 'bg-gray-700'}`}></div>
                                            
                                            {/* Q1 2024 */}
                                            <div className="relative flex items-start gap-6 mb-8">
                                                <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center z-10">
                                                    <div className="w-4 h-4 text-white">✅</div>
                                                </div>
                                                <div className="flex-1">
                                                    <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Q1 2024 - Project Management</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>Completed PMP certification to strengthen project management skills</p>
                                                        <div className="flex items-center gap-2">
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-500/20">
                                                                Completed
                                                            </span>
                                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>March 15, 2024</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Q2 2024 */}
                                            <div className="relative flex items-start gap-6 mb-8">
                                                <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center z-10">
                                                    <div className="w-4 h-4 text-white">📚</div>
                                                </div>
                                                <div className="flex-1">
                                                    <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Q2 2024 - Cloud Architecture</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>AWS Solutions Architect certification in progress</p>
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-blue-400 bg-blue-500/20">
                                                                In Progress
                                                            </span>
                                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: June 15, 2024</span>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                            <div className="bg-blue-500 h-2 rounded-full" style={{ width: '45%' }}></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Q3 2024 */}
                                            <div className="relative flex items-start gap-6 mb-8">
                                                <div className="w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center z-10">
                                                    <div className="w-4 h-4 text-white">📅</div>
                                                </div>
                                                <div className="flex-1">
                                                    <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Q3 2024 - DevOps & Containers</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>Kubernetes Administrator certification planned</p>
                                                        <div className="flex items-center gap-2">
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-yellow-400 bg-yellow-500/20">
                                                                Planned
                                                            </span>
                                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: August 20, 2024</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Q4 2024 */}
                                            <div className="relative flex items-start gap-6">
                                                <div className="w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center z-10">
                                                    <div className="w-4 h-4 text-white">🎯</div>
                                                </div>
                                                <div className="flex-1">
                                                    <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>Q4 2024 - Security</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>CISSP certification to advance security expertise</p>
                                                        <div className="flex items-center gap-2">
                                                            <span className="px-2 py-1 rounded-full text-xs font-medium text-gray-400 bg-gray-500/20">
                                                                Future
                                                            </span>
                                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: December 2024</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Goal Setting */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Goal Setting</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Target Date</label>
                                            <input
                                                type="date"
                                                className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}
                                            />
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Study Hours/Week</label>
                                            <select className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>5-10 hours</option>
                                                <option>10-15 hours</option>
                                                <option>15-20 hours</option>
                                                <option>20+ hours</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className={`block text-sm font-medium ${isLightMode ? 'text-gray-700' : 'text-gray-300'} mb-2`}>Learning Style</label>
                                            <select className={`w-full px-3 py-2 ${isLightMode ? 'bg-white border-gray-300 text-gray-900' : 'bg-gray-800 border-gray-700 text-gray-50'} border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500`}>
                                                <option>Visual</option>
                                                <option>Hands-on</option>
                                                <option>Reading</option>
                                                <option>Mixed</option>
                                            </select>
                                        </div>
                                        <button className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                            Update Goals
                                        </button>
                                    </div>
                                </div>

                                {/* Path Dependencies */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Path Dependencies</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Fundamentals</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Required for AWS Solutions Architect</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Linux Basics</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Required for Kubernetes Administrator</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Security Experience</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Required for CISSP</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'studies' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Study Progress */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Study Progress</h2>
                                    <div className="space-y-6">
                                        {certifications.filter(cert => cert.userStatus === 'studying' || cert.userStatus === 'scheduled').map((cert) => (
                                            <div key={cert.id} className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <div className="text-2xl">{getCategoryIcon(cert.category)}</div>
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{cert.name}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(cert.userStatus)}`}>
                                                                {cert.userStatus}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{cert.provider}</p>
                                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                                            <div className="text-center">
                                                                <div className="text-2xl font-bold text-blue-400">{cert.progress}%</div>
                                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Overall Progress</div>
                                                            </div>
                                                            <div className="text-center">
                                                                <div className="text-2xl font-bold text-green-400">12</div>
                                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Study Hours</div>
                                                            </div>
                                                            <div className="text-center">
                                                                <div className="text-2xl font-bold text-yellow-400">3</div>
                                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Practice Tests</div>
                                                            </div>
                                                            <div className="text-center">
                                                                <div className="text-2xl font-bold text-purple-400">85%</div>
                                                                <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Avg Score</div>
                                                            </div>
                                                        </div>
                                                        <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-4`}>
                                                            <div 
                                                                className="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300"
                                                                style={{ width: `${cert.progress}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                        Continue Study
                                                    </button>
                                                    <button className="bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                                        Practice Test
                                                    </button>
                                                    <button className="bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                                        Schedule Exam
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Study Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Study Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                            Continue Current Study
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Take Practice Test
                                        </button>
                                        <button className="w-full bg-purple-600 text-white py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                            Schedule Exam
                                        </button>
                                        <button className={`w-full ${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} py-2 rounded-lg font-medium transition-colors duration-200`}>
                                            Review Study Materials
                                        </button>
                                    </div>
                                </div>

                                {/* Performance Analytics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Performance Analytics</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>AWS Architecture</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>85%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-green-500 h-2 rounded-full" style={{ width: '85%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Security</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>70%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-blue-500 h-2 rounded-full" style={{ width: '70%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Networking</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>60%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-yellow-500 h-2 rounded-full" style={{ width: '60%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Storage</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>45%</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-orange-500 h-2 rounded-full" style={{ width: '45%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'achievements' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Completed Certifications</h2>
                                    <div className="space-y-4">
                                        {userAchievements.map((achievement) => {
                                            const cert = certifications.find(c => c.id === achievement.certificationId);
                                            return (
                                                <div key={achievement.id} className={`${isLightMode ? 'bg-white border-green-500/30' : 'bg-gray-800 border-green-500/30'} border rounded-lg p-6`}>
                                                    <div className="flex items-start justify-between mb-4">
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-3 mb-2">
                                                                <div className="text-2xl">{getCategoryIcon(cert?.category || 'programming')}</div>
                                                                <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{achievement.name}</h3>
                                                                <span className="px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-500/20">
                                                                    Completed
                                                                </span>
                                                            </div>
                                                            <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{cert?.provider || 'Professional Certification'}</p>
                                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                                                <div className="text-center">
                                                                    <div className="text-2xl font-bold text-green-400">{achievement.score}%</div>
                                                                    <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Exam Score</div>
                                                                </div>
                                                                <div className="text-center">
                                                                    <div className="text-2xl font-bold text-blue-400">3</div>
                                                                    <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Years Valid</div>
                                                                </div>
                                                                <div className="text-center">
                                                                    <div className="text-2xl font-bold text-purple-400">2027</div>
                                                                    <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Expires</div>
                                                                </div>
                                                                <div className="text-center">
                                                                    <div className="text-2xl font-bold text-yellow-400">+$10K</div>
                                                                    <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Salary Impact</div>
                                                                </div>
                                                            </div>
                                                            <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                                <span>Earned: {achievement.earnedDate}</span>
                                                                <span>•</span>
                                                                <span>Valid until: {achievement.validityPeriod}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="flex items-center gap-3">
                                                        <button className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-2 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300">
                                                            View Certificate
                                                        </button>
                                                        <button className="bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                                            Download
                                                        </button>
                                                        <button className="bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200">
                                                            Share
                                                        </button>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Achievement Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Achievement Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Total Certifications</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>1</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Study Hours</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>120 hours</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Success Rate</span>
                                            <span className="text-sm font-medium text-green-400">100%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Career Value</span>
                                            <span className="text-sm font-medium text-yellow-400">+$10,000</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Next Milestones */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Next Milestones</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Solutions Architect</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Complete by June 15, 2024</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Multi-Cloud Expert</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Earn 3 cloud certifications</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white border-gray-200' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Security Specialist</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Complete CISSP certification</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Certification Detail Modal */}
                    {showCertificationDetail && selectedCertification && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">{selectedCertification.name}</h2>
                                    <button
                                        onClick={() => setShowCertificationDetail(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    {/* Certification Details */}
                                    <div className="space-y-6">
                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Certification Details</h3>
                                            <p className="text-gray-300 mb-4">{selectedCertification.description}</p>
                                            <div className="space-y-3">
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Provider:</span>
                                                    <span className="text-sm text-gray-50">{selectedCertification.provider}</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Study Time:</span>
                                                    <span className="text-sm text-gray-50">{selectedCertification.studyTimeEstimate}</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Pass Rate:</span>
                                                    <span className="text-sm text-gray-50">{selectedCertification.passRate}%</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Renewal Period:</span>
                                                    <span className="text-sm text-gray-50">{selectedCertification.renewalPeriod}</span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className="text-sm text-gray-400">Cost:</span>
                                                    <span className="text-sm text-gray-50">{selectedCertification.cost}</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Prerequisites</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedCertification.prerequisites.map((prereq) => (
                                                    <span key={prereq} className="px-3 py-1 bg-gray-500/20 text-gray-400 text-sm rounded-full">
                                                        {prereq}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Certification Stats */}
                                    <div className="space-y-6">
                                        <div className="bg-gray-800 border border-gray-700 rounded-lg p-6">
                                            <h3 className="text-lg font-semibold text-gray-50 mb-4">Market Information</h3>
                                            <div className="space-y-3">
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Market Demand</span>
                                                    <span className="text-sm font-medium text-green-400">{selectedCertification.marketDemand}%</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Salary Impact</span>
                                                    <span className="text-sm font-medium text-green-400">{selectedCertification.salaryImpact}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Category</span>
                                                    <span className={`text-sm font-medium px-2 py-1 rounded-full ${getCategoryColor(selectedCertification.category)}`}>
                                                        {selectedCertification.category}
                                                    </span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-sm text-gray-400">Level</span>
                                                    <span className={`text-sm font-medium px-2 py-1 rounded-full ${getLevelColor(selectedCertification.level)}`}>
                                                        {selectedCertification.level}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="flex items-center gap-4">
                                            <button className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300">
                                                Add to Plan
                                            </button>
                                            <button className="bg-gray-700 text-gray-300 px-4 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                Learn More
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Render Certifications when certifications-content is shown
        window.renderCertifications = function() {
            console.log('renderCertifications called');
            const container = document.getElementById('certifications-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Certifications...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<Certifications />);
                    console.log('Certifications rendered successfully');
                } catch (error) {
                    console.error('Error rendering Certifications:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Certifications</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('certifications-container not found');
            }
        };

        // Skill Benchmarking React Component
        const SkillBenchmarking = () => {
            const [activeTab, setActiveTab] = useState('overview');
            const [selectedRole, setSelectedRole] = useState('frontend-developer');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [showSetup, setShowSetup] = useState(false);

            // Check for light mode
            const isLightMode = !document.documentElement.classList.contains('dark');

            const skills = [
                {
                    id: 1,
                    name: 'React',
                    category: 'Frontend',
                    userLevel: 85,
                    marketDemand: 95,
                    averageLevel: 70,
                    topPerformerLevel: 90,
                    salaryImpact: '+$8,000',
                    trendDirection: 'up',
                    jobPostings: 12500,
                    gap: 5
                },
                {
                    id: 2,
                    name: 'TypeScript',
                    category: 'Frontend',
                    userLevel: 60,
                    marketDemand: 88,
                    averageLevel: 55,
                    topPerformerLevel: 85,
                    salaryImpact: '+$6,000',
                    trendDirection: 'up',
                    jobPostings: 8900,
                    gap: 25
                },
                {
                    id: 3,
                    name: 'Node.js',
                    category: 'Backend',
                    userLevel: 45,
                    marketDemand: 82,
                    averageLevel: 65,
                    topPerformerLevel: 88,
                    salaryImpact: '+$7,000',
                    trendDirection: 'stable',
                    jobPostings: 10200,
                    gap: 40
                },
                {
                    id: 4,
                    name: 'AWS',
                    category: 'Cloud',
                    userLevel: 30,
                    marketDemand: 92,
                    averageLevel: 50,
                    topPerformerLevel: 85,
                    salaryImpact: '+$12,000',
                    trendDirection: 'up',
                    jobPostings: 15600,
                    gap: 55
                },
                {
                    id: 5,
                    name: 'Docker',
                    category: 'DevOps',
                    userLevel: 25,
                    marketDemand: 78,
                    averageLevel: 40,
                    topPerformerLevel: 75,
                    salaryImpact: '+$5,000',
                    trendDirection: 'up',
                    jobPostings: 6800,
                    gap: 50
                },
                {
                    id: 6,
                    name: 'GraphQL',
                    category: 'Backend',
                    userLevel: 20,
                    marketDemand: 65,
                    averageLevel: 35,
                    topPerformerLevel: 70,
                    salaryImpact: '+$4,000',
                    trendDirection: 'stable',
                    jobPostings: 4200,
                    gap: 50
                }
            ];

            const jobRoles = [
                {
                    id: 'frontend-developer',
                    title: 'Frontend Developer',
                    category: 'Development',
                    alignment: 78,
                    averageSalary: '$85,000 - $120,000',
                    jobCount: 15400,
                    topSkills: ['React', 'TypeScript', 'JavaScript', 'CSS', 'HTML'],
                    location: 'Remote/Hybrid'
                },
                {
                    id: 'fullstack-developer',
                    title: 'Full-Stack Developer',
                    category: 'Development',
                    alignment: 65,
                    averageSalary: '$95,000 - $140,000',
                    jobCount: 12800,
                    topSkills: ['React', 'Node.js', 'TypeScript', 'AWS', 'Docker'],
                    location: 'Remote/Hybrid'
                },
                {
                    id: 'devops-engineer',
                    title: 'DevOps Engineer',
                    category: 'Infrastructure',
                    alignment: 45,
                    averageSalary: '$100,000 - $150,000',
                    jobCount: 8900,
                    topSkills: ['AWS', 'Docker', 'Kubernetes', 'CI/CD', 'Linux'],
                    location: 'Remote/Hybrid'
                },
                {
                    id: 'backend-developer',
                    title: 'Backend Developer',
                    category: 'Development',
                    alignment: 55,
                    averageSalary: '$90,000 - $130,000',
                    jobCount: 11200,
                    topSkills: ['Node.js', 'Python', 'AWS', 'GraphQL', 'Database'],
                    location: 'Remote/Hybrid'
                }
            ];

            const recommendations = [
                {
                    id: 1,
                    type: 'skill_gap',
                    title: 'Improve AWS Skills',
                    description: 'Your AWS skills are significantly below market average. Focus on core services like EC2, S3, and Lambda.',
                    priority: 'high',
                    impact: 'High salary increase potential',
                    effort: 'medium',
                    timeline: '3-4 months',
                    actionSteps: ['Complete AWS Fundamentals course', 'Build 2-3 projects using AWS services', 'Take AWS Solutions Architect exam']
                },
                {
                    id: 2,
                    type: 'trending_skill',
                    title: 'Learn Docker & Kubernetes',
                    description: 'Containerization skills are in high demand. Start with Docker basics and progress to Kubernetes.',
                    priority: 'medium',
                    impact: 'Strong market demand',
                    effort: 'low',
                    timeline: '2-3 months',
                    actionSteps: ['Complete Docker fundamentals', 'Build containerized applications', 'Learn Kubernetes basics']
                },
                {
                    id: 3,
                    type: 'career_pivot',
                    title: 'Consider Full-Stack Development',
                    description: 'Your frontend skills are strong. Adding backend skills could open full-stack opportunities.',
                    priority: 'medium',
                    impact: 'Career advancement',
                    effort: 'high',
                    timeline: '6-8 months',
                    actionSteps: ['Strengthen Node.js skills', 'Learn database design', 'Build full-stack projects']
                }
            ];

            const getAlignmentColor = (alignment) => {
                if (alignment >= 80) return 'text-green-400 bg-green-500/20';
                if (alignment >= 60) return 'text-yellow-400 bg-yellow-500/20';
                return 'text-red-400 bg-red-500/20';
            };

            const getGapColor = (gap) => {
                if (gap <= 10) return 'text-green-400 bg-green-500/20';
                if (gap <= 30) return 'text-yellow-400 bg-yellow-500/20';
                return 'text-red-400 bg-red-500/20';
            };

            const getPriorityColor = (priority) => {
                switch (priority) {
                    case 'high': return 'text-red-400 bg-red-500/20';
                    case 'medium': return 'text-yellow-400 bg-yellow-500/20';
                    case 'low': return 'text-green-400 bg-green-500/20';
                    default: return 'text-gray-400 bg-gray-500/20';
                }
            };

            const getTrendIcon = (trend) => {
                switch (trend) {
                    case 'up': return '📈';
                    case 'down': return '📉';
                    default: return '➡️';
                }
            };

            const getTrendColor = (trend) => {
                switch (trend) {
                    case 'up': return 'text-green-400';
                    case 'down': return 'text-red-400';
                    default: return 'text-gray-400';
                }
            };

            const handleRunAnalysis = () => {
                setIsAnalyzing(true);
                setTimeout(() => {
                    setIsAnalyzing(false);
                }, 3000);
            };

            const tabs = [
                { id: 'overview', label: 'Overview', icon: '📊' },
                { id: 'skills', label: 'Skills Analysis', icon: '🔍' },
                { id: 'roles', label: 'Role Comparison', icon: '👥' },
                { id: 'recommendations', label: 'Recommendations', icon: '💡' },
                { id: 'progress', label: 'Progress Tracking', icon: '📈' }
            ];

            return (
                <div className="space-y-8">

                    {/* Navigation Tabs */}
                    <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-2`}>
                        <div className="flex space-x-1 overflow-x-auto">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg'
                                            : isLightMode 
                                                ? 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                    }`}
                                >
                                    <div className="w-4 h-4">{tab.icon}</div>
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'overview' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Market Alignment Dashboard */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Market Alignment Dashboard</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="text-center">
                                            <div className="text-6xl font-bold text-green-400 mb-2">78%</div>
                                            <div className={`text-lg ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Overall Alignment</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Frontend Developer Role</div>
                                        </div>
                                        <div className="space-y-4">
                                            <div className="flex justify-between items-center">
                                                <span className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Skills Above Average</span>
                                                <span className="text-green-400 font-semibold">2/6</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Skills Need Improvement</span>
                                                <span className="text-red-400 font-semibold">4/6</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'}`}>Market Demand Match</span>
                                                <span className="text-blue-400 font-semibold">85%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Skills Heatmap */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Skills Heatmap</h2>
                                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                                        {skills.map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                                <div className="flex items-center justify-between mb-2">
                                                    <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getGapColor(skill.gap)}`}>
                                                        {skill.gap}% gap
                                                    </span>
                                                </div>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between text-sm">
                                                        <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Your Level</span>
                                                        <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.userLevel}%</span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                        <div 
                                                            className="bg-blue-500 h-2 rounded-full transition-all duration-300"
                                                            style={{ width: `${skill.userLevel}%` }}
                                                        ></div>
                                                    </div>
                                                    <div className="flex justify-between text-sm">
                                                        <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Market Avg</span>
                                                        <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.averageLevel}%</span>
                                                    </div>
                                                    <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                        <div 
                                                            className="bg-green-500 h-2 rounded-full transition-all duration-300"
                                                            style={{ width: `${skill.averageLevel}%` }}
                                                        ></div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Top Skill Gaps */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Top Skill Gaps</h2>
                                    <div className="space-y-4">
                                        {skills.filter(skill => skill.gap > 30).map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getGapColor(skill.gap)}`}>
                                                                {skill.gap}% gap
                                                            </span>
                                                            <span className={`text-sm ${getTrendColor(skill.trendDirection)}`}>
                                                                {getTrendIcon(skill.trendDirection)}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{skill.category} • {skill.jobPostings.toLocaleString()} job postings</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <span>Your Level: {skill.userLevel}%</span>
                                                            <span>•</span>
                                                            <span>Market Avg: {skill.averageLevel}%</span>
                                                            <span>•</span>
                                                            <span>Salary Impact: {skill.salaryImpact}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                                        Improve Skill
                                                    </button>
                                                    <button className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                        View Resources
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Quick Stats */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Quick Stats</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Analyzed</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>6</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Above Average</span>
                                            <span className="text-sm font-medium text-green-400">2</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Need Improvement</span>
                                            <span className="text-sm font-medium text-red-400">4</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Trending Skills</span>
                                            <span className="text-sm font-medium text-blue-400">3</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Market Insights */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Market Insights</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Hot Skills</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>AWS, React, TypeScript trending up</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Your Strengths</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>React and TypeScript above market</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Opportunities</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Cloud skills could boost salary 40%</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Recommended Actions */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Recommended Actions</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                            Run Full Analysis
                                        </button>
                                        <button className="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                            Set Skill Goals
                                        </button>
                                        <button className="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                            Compare Roles
                                        </button>
                                        <button className={`w-full ${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} py-2 rounded-lg font-medium transition-colors duration-200`}>
                                            Export Report
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'skills' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Skills Analysis */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Detailed Skills Analysis</h2>
                                    <div className="space-y-6">
                                        {skills.map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-xl font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getGapColor(skill.gap)}`}>
                                                                {skill.gap}% gap
                                                            </span>
                                                            <span className={`text-sm ${getTrendColor(skill.trendDirection)}`}>
                                                                {getTrendIcon(skill.trendDirection)}
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-4`}>{skill.category} • {skill.jobPostings.toLocaleString()} job postings • {skill.salaryImpact} salary impact</p>
                                                        
                                                        {/* Progress Bars */}
                                                        <div className="space-y-3">
                                                            <div>
                                                                <div className="flex justify-between text-sm mb-1">
                                                                    <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Your Level</span>
                                                                    <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.userLevel}%</span>
                                                                </div>
                                                                <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                                    <div 
                                                                        className="bg-blue-500 h-2 rounded-full transition-all duration-300"
                                                                        style={{ width: `${skill.userLevel}%` }}
                                                                    ></div>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <div className="flex justify-between text-sm mb-1">
                                                                    <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Market Average</span>
                                                                    <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.averageLevel}%</span>
                                                                </div>
                                                                <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                                    <div 
                                                                        className="bg-green-500 h-2 rounded-full transition-all duration-300"
                                                                        style={{ width: `${skill.averageLevel}%` }}
                                                                    ></div>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <div className="flex justify-between text-sm mb-1">
                                                                    <span className="text-gray-400">Top Performers</span>
                                                                    <span className="text-gray-50">{skill.topPerformerLevel}%</span>
                                                                </div>
                                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                                    <div 
                                                                        className="bg-purple-500 h-2 rounded-full transition-all duration-300"
                                                                        style={{ width: `${skill.topPerformerLevel}%` }}
                                                                    ></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                                        Improve Skill
                                                    </button>
                                                    <button className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                        View Resources
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Skill Categories */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Skill Categories</h3>
                                    <div className="space-y-3">
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Frontend</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>72% avg</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-blue-500 h-2 rounded-full" style={{ width: '72%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Backend</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>45% avg</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-yellow-500 h-2 rounded-full" style={{ width: '45%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Cloud</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>30% avg</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-red-500 h-2 rounded-full" style={{ width: '30%' }}></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2">
                                                <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>DevOps</span>
                                                <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>25% avg</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2`}>
                                                <div className="bg-red-500 h-2 rounded-full" style={{ width: '25%' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Trending Skills */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Trending Skills</h3>
                                    <div className="space-y-3">
                                        {skills.filter(skill => skill.trendDirection === 'up').map((skill) => (
                                            <div key={skill.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                                <div className="flex items-center justify-between">
                                                    <div>
                                                        <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{skill.name}</h4>
                                                        <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{skill.salaryImpact} impact</p>
                                                    </div>
                                                    <div className="text-green-400">📈</div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'roles' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Role Comparison */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Role Comparison</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {jobRoles.map((role) => (
                                            <div 
                                                key={role.id} 
                                                className={`border rounded-lg p-6 cursor-pointer transition-all duration-300 ${
                                                    selectedRole === role.id 
                                                        ? 'border-indigo-500 bg-indigo-500/10' 
                                                        : isLightMode
                                                            ? 'border-gray-200 bg-white/30 hover:border-gray-300'
                                                            : 'border-gray-700 bg-gray-800 hover:border-gray-600'
                                                }`}
                                                onClick={() => setSelectedRole(role.id)}
                                            >
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{role.title}</h3>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{role.category} • {role.location}</p>
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getAlignmentColor(role.alignment)}`}>
                                                                {role.alignment}% alignment
                                                            </span>
                                                        </div>
                                                        <div className={`space-y-2 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>
                                                            <div className="flex justify-between">
                                                                <span>Salary Range</span>
                                                                <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{role.averageSalary}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Job Count</span>
                                                                <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{role.jobCount.toLocaleString()}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="mb-4">
                                                    <h4 className={`text-sm font-medium ${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-2`}>Top Skills</h4>
                                                    <div className="flex flex-wrap gap-1">
                                                        {role.topSkills.map((skill) => (
                                                            <span key={skill} className={`px-2 py-1 ${isLightMode ? 'bg-gray-200 text-gray-700' : 'bg-gray-700 text-gray-300'} text-xs rounded-full`}>
                                                                {skill}
                                                            </span>
                                                        ))}
                                                    </div>
                                                </div>
                                                <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                                    View Details
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Selected Role Details */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Selected Role Details</h3>
                                    {(() => {
                                        const role = jobRoles.find(r => r.id === selectedRole);
                                        return role ? (
                                            <div className="space-y-4">
                                                <div>
                                                    <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-2`}>{role.title}</h4>
                                                    <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>{role.category}</p>
                                                </div>
                                                <div className="space-y-2 text-sm">
                                                    <div className="flex justify-between">
                                                        <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Alignment</span>
                                                        <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{role.alignment}%</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Salary Range</span>
                                                        <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{role.averageSalary}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className={`${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Job Count</span>
                                                        <span className={`${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{role.jobCount.toLocaleString()}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        ) : null;
                                    })()}
                                </div>

                                {/* Alignment Metrics */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Alignment Metrics</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Technical Skills</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>75%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Experience Level</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>80%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Market Demand</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>85%</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Salary Potential</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>70%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'recommendations' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* AI Recommendations */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>AI-Powered Recommendations</h2>
                                    <div className="space-y-6">
                                        {recommendations.map((rec) => (
                                            <div key={rec.id} className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-6`}>
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-2">
                                                            <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>{rec.title}</h3>
                                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(rec.priority)}`}>
                                                                {rec.priority} priority
                                                            </span>
                                                        </div>
                                                        <p className={`${isLightMode ? 'text-gray-600' : 'text-gray-300'} mb-3`}>{rec.description}</p>
                                                        <div className={`flex items-center gap-4 text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'} mb-3`}>
                                                            <span>Impact: {rec.impact}</span>
                                                            <span>•</span>
                                                            <span>Effort: {rec.effort}</span>
                                                            <span>•</span>
                                                            <span>Timeline: {rec.timeline}</span>
                                                        </div>
                                                        <div className="mb-4">
                                                            <h4 className="text-sm font-medium text-gray-300 mb-2">Action Steps</h4>
                                                            <ul className="space-y-1">
                                                                {rec.actionSteps.map((step, index) => (
                                                                    <li key={index} className="text-sm text-gray-400 flex items-start gap-2">
                                                                        <span className="text-indigo-400 mt-1">•</span>
                                                                        {step}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <button className="flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                                        Start Learning
                                                    </button>
                                                    <button className="bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors duration-200">
                                                        Add to Goals
                                                    </button>
                                                    <button className="bg-gray-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200">
                                                        Learn More
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Impact vs Effort Matrix */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Impact vs Effort</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>High Impact, Low Effort</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Docker & Kubernetes</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>High Impact, High Effort</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>AWS Skills</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Medium Impact, Low Effort</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>GraphQL</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Learning Resources */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Learning Resources</h3>
                                    <div className="space-y-3">
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>AWS Fundamentals</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Free course • 20 hours</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Docker Basics</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Interactive tutorial • 8 hours</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-3`}>
                                            <h4 className={`font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-1`}>Node.js Advanced</h4>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Project-based • 15 hours</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'progress' && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Main Content */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Progress Overview */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Progress Overview</h2>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-green-400 mb-2">+15</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Points Gained</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-blue-400 mb-2">3</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Improved</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-purple-400 mb-2">12</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Study Hours</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-yellow-400 mb-2">5</div>
                                            <div className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Recent Improvements */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Recent Improvements</h2>
                                    <div className="space-y-4">
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>React</h3>
                                                <span className="text-green-400 text-sm">+5% this week</span>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Improved from 80% to 85% - now above market average</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>TypeScript</h3>
                                                <span className="text-green-400 text-sm">+8% this week</span>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Improved from 52% to 60% - closing the gap</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Node.js</h3>
                                                <span className="text-green-400 text-sm">+3% this week</span>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Improved from 42% to 45% - steady progress</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Current Goals */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-8`}>
                                    <h2 className={`text-2xl font-bold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-6`}>Current Goals</h2>
                                    <div className="space-y-4">
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>AWS Skills</h3>
                                                <span className="text-blue-400 text-sm">45% complete</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-2`}>
                                                <div className="bg-blue-500 h-2 rounded-full" style={{ width: '45%' }}></div>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: 70% by end of month</p>
                                        </div>
                                        <div className={`${isLightMode ? 'bg-white/30 backdrop-blur-xl border-white/20' : 'bg-gray-800 border-gray-700'} border rounded-lg p-4`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className={`font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>Docker & Kubernetes</h3>
                                                <span className="text-blue-400 text-sm">20% complete</span>
                                            </div>
                                            <div className={`w-full ${isLightMode ? 'bg-gray-200' : 'bg-gray-700'} rounded-full h-2 mb-2`}>
                                                <div className="bg-blue-500 h-2 rounded-full" style={{ width: '20%' }}></div>
                                            </div>
                                            <p className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Target: 60% by next month</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Weekly Tracking */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Weekly Tracking</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Study Hours</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>12 hours</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Projects Completed</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>2</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Skills Practiced</span>
                                            <span className={`text-sm font-medium ${isLightMode ? 'text-gray-900' : 'text-gray-50'}`}>4</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className={`text-sm ${isLightMode ? 'text-gray-500' : 'text-gray-400'}`}>Learning Streak</span>
                                            <span className="text-sm font-medium text-green-400">7 days</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Export & Share */}
                                <div className={`${isLightMode ? 'bg-white/50 backdrop-blur-xl border-white/30' : 'bg-[#111827] border-gray-700/50'} border rounded-2xl p-6`}>
                                    <h3 className={`text-lg font-semibold ${isLightMode ? 'text-gray-900' : 'text-gray-50'} mb-4`}>Export & Share</h3>
                                    <div className="space-y-3">
                                        <button className="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-2 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                            Download Report
                                        </button>
                                        <button className="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200">
                                            Share on LinkedIn
                                        </button>
                                        <button className={`w-full ${isLightMode ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'} py-2 rounded-lg font-medium transition-colors duration-200`}>
                                            Export Data
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Setup Modal */}
                    {showSetup && (
                        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-[#111827] border border-gray-700 rounded-2xl p-8 max-w-2xl w-full">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-gray-50">Setup Your Profile</h2>
                                    <button
                                        onClick={() => setShowSetup(false)}
                                        className="p-2 bg-gray-700 text-gray-400 rounded-lg hover:bg-gray-600 transition-colors duration-200"
                                    >
                                        <div className="w-5 h-5">❌</div>
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Current Role</label>
                                        <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                            <option>Frontend Developer</option>
                                            <option>Backend Developer</option>
                                            <option>Full-Stack Developer</option>
                                            <option>DevOps Engineer</option>
                                            <option>Data Scientist</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Experience Level</label>
                                        <select className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                            <option>Entry Level (0-2 years)</option>
                                            <option>Mid Level (3-5 years)</option>
                                            <option>Senior Level (6-10 years)</option>
                                            <option>Expert Level (10+ years)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Location</label>
                                        <input
                                            type="text"
                                            placeholder="Enter your location"
                                            className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Career Goals</label>
                                        <textarea
                                            placeholder="Describe your career goals and aspirations"
                                            className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            rows={3}
                                        ></textarea>
                                    </div>
                                    <div className="flex items-center gap-4">
                                        <button className="flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-3 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-600 transition-all duration-300">
                                            Save Profile
                                        </button>
                                        <button 
                                            onClick={() => setShowSetup(false)}
                                            className="bg-gray-700 text-gray-300 px-4 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors duration-200"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };


        // Render Skill Benchmarking when skill-benchmarking-content is shown
        window.renderSkillBenchmarking = function() {
            console.log('renderSkillBenchmarking called');
            const container = document.getElementById('skill-benchmarking-container');
            console.log('Container found:', container);
            
            if (container) {
                try {
                    console.log('Creating React root and rendering Skill Benchmarking...');
                    const root = ReactDOM.createRoot(container);
                    root.render(<SkillBenchmarking />);
                    console.log('Skill Benchmarking rendered successfully');
                } catch (error) {
                    console.error('Error rendering Skill Benchmarking:', error);
                    container.innerHTML = `
                        <div class="text-center py-20">
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">Error loading Skill Benchmarking</h2>
                            <p class="text-slate-600">${error.message}</p>
                        </div>
                    `;
                }
            } else {
                console.error('skill-benchmarking-container not found');
            }
        };
    </script>

    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div id="search-modal-overlay" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div id="search-modal-content" class="relative w-full max-w-4xl bg-white/50 dark:bg-slate-800/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/30 dark:border-slate-700 m-4 flex flex-col" style="max-height: 90vh;">
            <div class="flex items-center justify-between p-5 flex-shrink-0 border-b border-white/30 dark:border-slate-700">
                <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-100">Search Results</h3>
                <button id="close-search-modal" class="p-2 rounded-lg hover:bg-slate-200/60 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="search-results-container" class="overflow-y-auto p-6 flex-grow custom-scrollbar">
                <div class="text-center py-12">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-slate-400 mb-4"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <p class="text-slate-500 dark:text-slate-400">Enter a search query to begin</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Search functionality
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const searchModal = document.getElementById('search-modal');
            const closeSearchModal = document.getElementById('close-search-modal');
            const searchModalOverlay = document.getElementById('search-modal-overlay');
            const searchResultsContainer = document.getElementById('search-results-container');

            let isLoading = false;

            async function performSearch(query) {
                if (!query || query.trim().length === 0 || isLoading) return;

                isLoading = true;
                searchResultsContainer.innerHTML = `
                    <div class="text-center py-12">
                        <div class="inline-block w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"></div>
                        <p class="text-slate-600 dark:text-slate-400">Searching...</p>
                    </div>
                `;

                try {
                    // Use the Serper API to search
                    const searchData = await SerperSearch.search(query);
                    const results = SerperSearch.formatResults(searchData);
                    SerperSearch.renderResults(results, searchResultsContainer);
                } catch (error) {
                    console.error('Search error:', error);
                    searchResultsContainer.innerHTML = `
                        <div class="text-center py-12">
                            <p class="text-red-600 mb-4">Error performing search: ${error.message}</p>
                            <p class="text-slate-500 text-sm">Please try again later.</p>
                        </div>
                    `;
                } finally {
                    isLoading = false;
                }
            }

            function openSearchModal() {
                searchModal.classList.remove('hidden');
            }

            function closeModal() {
                searchModal.classList.add('hidden');
            }

            // Search button click
            if (searchButton) {
                searchButton.addEventListener('click', () => {
                    const query = searchInput.value.trim();
                    if (query) {
                        performSearch(query);
                        openSearchModal();
                    }
                });
            }

            // Enter key in search input
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const query = searchInput.value.trim();
                        if (query) {
                            performSearch(query);
                            openSearchModal();
                        }
                    }
                });
            }

            // Close modal handlers
            if (closeSearchModal) {
                closeSearchModal.addEventListener('click', closeModal);
            }

            if (searchModalOverlay) {
                searchModalOverlay.addEventListener('click', closeModal);
            }

            // Escape key to close modal
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !searchModal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>
